import { Component, Input, Output, EventEmitter, forwardRef, ViewEncapsulation, ChangeDetectionStrategy, HostListener } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { DEFAULT_CALENDAR_LOCALE, DEFAULT_CALENDAR_COLORS, DEFAULT_CALENDAR_CONFIG } from '../../types/calendar.types';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
export class SaCalendarComponent {
    cdr;
    elementRef;
    // Basic inputs
    _value = null;
    size = 'md';
    status = 'default';
    label = '';
    _noLabel = false;
    set noLabel(value) {
        this._noLabel = value === true || value === 'true';
    }
    get noLabel() {
        return this._noLabel;
    }
    placeholder = 'Seleccionar fecha';
    helperText = '';
    errorText = '';
    required = false;
    readonly = false;
    disabled = false;
    minDate = null;
    maxDate = null;
    id = '';
    name = '';
    // Calendar specific inputs
    locale = DEFAULT_CALENDAR_LOCALE;
    colors = DEFAULT_CALENDAR_COLORS;
    config = DEFAULT_CALENDAR_CONFIG;
    validation = {};
    events = [];
    inline = false;
    showInput = true;
    // Outputs
    dateSelect = new EventEmitter();
    viewChange = new EventEmitter();
    monthChange = new EventEmitter();
    yearChange = new EventEmitter();
    focus = new EventEmitter();
    blur = new EventEmitter();
    // Internal state
    currentView = 'day';
    currentDate = new Date();
    selectedDates = [];
    calendarDays = [];
    calendarMonths = [];
    calendarYears = [];
    isOpen = false;
    isFocused = false;
    _generatedId;
    onChange = (_) => { };
    onTouched = () => { };
    constructor(cdr, elementRef) {
        this.cdr = cdr;
        this.elementRef = elementRef;
        this._generatedId = `sa-calendar-${Math.random().toString(36).substr(2, 9)}`;
    }
    onDocumentClickOutside(event) {
        // SOLUCION TEMPORAL: Usar click en lugar de mousedown con delay
        setTimeout(() => {
            if (!this.inline && this.isOpen) {
                const target = event.target;
                // Solo cerrar si el clic fue en SA-CALENDAR (Ã¡rea vacÃ­a)
                if (target.tagName === 'SA-CALENDAR') {
                    // Verificar que no sea un clic en elementos internos usando coordenadas
                    const rect = this.elementRef.nativeElement.getBoundingClientRect();
                    const clickX = event.clientX;
                    const clickY = event.clientY;
                    // Si el clic estÃ¡ en los bordes del componente (no en contenido), cerrar
                    const isNearEdge = clickX < rect.left + 20 || clickX > rect.right - 20 ||
                        clickY < rect.top + 20 || clickY > rect.bottom - 20;
                    if (isNearEdge) {
                        this.closeCalendar();
                    }
                }
            }
        }, 100); // Delay para permitir que otros clics se procesen primero
    }
    ngOnInit() {
        this.initializeCalendar();
        if (this.inline) {
            this.isOpen = true;
        }
    }
    ngOnChanges(changes) {
        if (changes['locale'] || changes['config']) {
            this.initializeCalendar();
        }
    }
    get calendarId() {
        return this.id || this._generatedId;
    }
    get mergedColors() {
        return { ...DEFAULT_CALENDAR_COLORS, ...this.colors };
    }
    get mergedConfig() {
        return { ...DEFAULT_CALENDAR_CONFIG, ...this.config };
    }
    get mergedLocale() {
        return { ...DEFAULT_CALENDAR_LOCALE, ...this.locale };
    }
    get inputValue() {
        if (!this._value)
            return '';
        if (Array.isArray(this._value)) {
            if (this.mergedConfig.allowRangeSelect && this._value.length === 2) {
                return `${this.formatDate(this._value[0])} - ${this.formatDate(this._value[1])}`;
            }
            return this._value.map(date => this.formatDate(date)).join(', ');
        }
        return this.formatDate(this._value);
    }
    get inputClasses() {
        const sizeMap = {
            'sm': 'form-control-sm',
            'md': '',
            'lg': 'form-control-lg'
        };
        const baseClasses = ['form-control', 'calendar-input'];
        if (sizeMap[this.size] && sizeMap[this.size] !== '') {
            baseClasses.push(sizeMap[this.size]);
        }
        if (this.status === 'error' || this.errorText) {
            baseClasses.push('is-invalid');
        }
        else if (this.status === 'success') {
            baseClasses.push('is-valid');
        }
        return baseClasses.join(' ');
    }
    get labelClasses() {
        const sizeMap = {
            'sm': 'form-label label-sm',
            'md': 'form-label label-md',
            'lg': 'form-label label-lg'
        };
        const baseClasses = sizeMap[this.size] || 'form-label label-md';
        // Si es noLabel, agregar clase para label fantasma
        if (this.noLabel) {
            return `${baseClasses} ghost-label`;
        }
        return baseClasses;
    }
    get shouldShowLabel() {
        return !!this.label || this.noLabel;
    }
    // ControlValueAccessor implementation
    writeValue(value) {
        this._value = value;
        this.updateSelectedDates();
        this.cdr.markForCheck();
    }
    registerOnChange(fn) {
        this.onChange = fn;
    }
    registerOnTouched(fn) {
        this.onTouched = fn;
    }
    setDisabledState(isDisabled) {
        this.disabled = isDisabled;
        this.cdr.markForCheck();
    }
    // Calendar initialization
    initializeCalendar() {
        this.updateSelectedDates();
        this.generateCalendarDays();
        this.generateCalendarMonths();
        this.generateCalendarYears();
        this.cdr.markForCheck();
    }
    updateSelectedDates() {
        this.selectedDates = [];
        if (this._value) {
            if (Array.isArray(this._value)) {
                this.selectedDates = [...this._value];
            }
            else {
                this.selectedDates = [this._value];
            }
        }
    }
    // Calendar generation methods
    generateCalendarDays() {
        const year = this.currentDate.getFullYear();
        const month = this.currentDate.getMonth();
        alert(`ðŸ”¥ GENERATE CALENDAR: currentDate=${this.currentDate}, year=${year}, month=${month} (${month === 6 ? 'JULIO' : month === 8 ? 'SEPTIEMBRE' : 'MES ' + month})`);
        const firstDay = new Date(year, month, 1);
        const lastDay = new Date(year, month + 1, 0);
        const startDate = new Date(firstDay);
        const endDate = new Date(lastDay);
        alert(`ðŸ”¥ GENERATE CALENDAR: firstDay=${firstDay}, lastDay=${lastDay}`);
        // Adjust start date to show previous month days if needed
        const firstDayOfWeek = this.mergedLocale.firstDayOfWeek;
        const startDayOfWeek = firstDay.getDay();
        const diff = (startDayOfWeek - firstDayOfWeek + 7) % 7;
        startDate.setDate(startDate.getDate() - diff);
        // Adjust end date to show next month days
        const endDayOfWeek = endDate.getDay();
        const endDiff = (6 - endDayOfWeek + firstDayOfWeek) % 7;
        endDate.setDate(endDate.getDate() + endDiff);
        this.calendarDays = [];
        const weeks = [];
        let week = [];
        const currentDateIter = new Date(startDate);
        while (currentDateIter <= endDate) {
            const calendarDay = this.createCalendarDay(currentDateIter, month);
            week.push(calendarDay);
            if (week.length === 7) {
                weeks.push([...week]);
                week = [];
            }
            currentDateIter.setDate(currentDateIter.getDate() + 1);
        }
        this.calendarDays = weeks;
    }
    createCalendarDay(date, currentMonth) {
        const today = new Date();
        const isToday = this.isSameDay(date, today);
        const isSelected = this.selectedDates.some(selectedDate => this.isSameDay(date, selectedDate));
        const isDisabled = this.isDateDisabled(date);
        const isInCurrentMonth = date.getMonth() === currentMonth;
        const isWeekend = date.getDay() === 0 || date.getDay() === 6;
        const hasEvent = this.events.some(event => this.isSameDay(event.date, date));
        const calendarDay = {
            date: new Date(date),
            day: date.getDate(),
            month: date.getMonth(),
            year: date.getFullYear(),
            isToday,
            isSelected,
            isDisabled,
            isInCurrentMonth,
            isWeekend,
            hasEvent
        };
        // Debug solo para el dÃ­a 16
        if (date.getDate() === 16) {
            alert(`ðŸ“… CREATE DAY 16: date=${date}, currentMonth=${currentMonth}, calendarDay.date=${calendarDay.date}, isInCurrentMonth=${isInCurrentMonth}`);
        }
        return calendarDay;
    }
    generateCalendarMonths() {
        const currentYear = this.currentDate.getFullYear();
        alert(`ðŸ“… GENERATE MONTHS: currentDate=${this.currentDate}, currentYear=${currentYear}`);
        this.calendarMonths = this.mergedLocale.monthsShort.map((month, index) => ({
            name: month,
            number: index,
            year: currentYear,
            isSelected: this.selectedDates.some(date => date.getFullYear() === currentYear && date.getMonth() === index),
            isDisabled: this.isMonthDisabled(currentYear, index),
            isCurrent: new Date().getFullYear() === currentYear && new Date().getMonth() === index
        }));
        // Debug para julio (mes 6)
        const julioMonth = this.calendarMonths[6];
        alert(`ðŸ“… JULIO GENERADO: name=${julioMonth.name}, number=${julioMonth.number}, year=${julioMonth.year}`);
    }
    generateCalendarYears() {
        const currentYear = this.currentDate.getFullYear();
        const startYear = currentYear - 10;
        const endYear = currentYear + 10;
        this.calendarYears = [];
        for (let year = startYear; year <= endYear; year++) {
            this.calendarYears.push({
                year,
                isSelected: this.selectedDates.some(date => date.getFullYear() === year),
                isDisabled: this.isYearDisabled(year),
                isCurrent: new Date().getFullYear() === year
            });
        }
    }
    // Date validation methods
    isDateDisabled(date) {
        // Check component-level min/max dates
        const minDate = this.getDateFromInput(this.minDate);
        const maxDate = this.getDateFromInput(this.maxDate);
        if (minDate && date < minDate) {
            return true;
        }
        if (maxDate && date > maxDate) {
            return true;
        }
        // Check validation-level min/max dates (legacy support)
        if (this.validation.minDate && date < this.validation.minDate) {
            return true;
        }
        if (this.validation.maxDate && date > this.validation.maxDate) {
            return true;
        }
        if (this.validation.disabledDates?.some(disabledDate => this.isSameDay(date, disabledDate))) {
            return true;
        }
        if (this.validation.disabledDays?.includes(date.getDay())) {
            return true;
        }
        if (this.validation.enabledDates && !this.validation.enabledDates.some(enabledDate => this.isSameDay(date, enabledDate))) {
            return true;
        }
        if (this.validation.customValidator && !this.validation.customValidator(date)) {
            return true;
        }
        return false;
    }
    isMonthDisabled(year, month) {
        const firstDayOfMonth = new Date(year, month, 1);
        const lastDayOfMonth = new Date(year, month + 1, 0);
        // Check if all days in the month are disabled
        for (let day = 1; day <= lastDayOfMonth.getDate(); day++) {
            const date = new Date(year, month, day);
            if (!this.isDateDisabled(date)) {
                return false;
            }
        }
        return true;
    }
    isYearDisabled(year) {
        // Check if all months in the year are disabled
        for (let month = 0; month < 12; month++) {
            if (!this.isMonthDisabled(year, month)) {
                return false;
            }
        }
        return true;
    }
    // Event handlers
    onInputClick(event) {
        if (!this.disabled && !this.readonly && !this.inline) {
            // Prevenir que el evento se propague para evitar que se cierre inmediatamente
            if (event) {
                event.stopPropagation();
                event.preventDefault();
            }
            // Usar setTimeout para evitar conflictos con el document:mousedown
            setTimeout(() => {
                this.toggleCalendar();
            }, 0);
        }
    }
    onInputFocus(event) {
        this.isFocused = true;
        this.focus.emit(event);
    }
    onInputBlur(event) {
        this.isFocused = false;
        this.onTouched();
        this.blur.emit(event);
    }
    onDayClick(day, event) {
        // MEGA DEBUG - Si no ves esto, hay cÃ³digo duplicado
        alert(`MEGA DEBUG: Seleccionando dÃ­a ${day.day}, fecha: ${day.date}`);
        if (day.isDisabled || this.disabled || this.readonly) {
            return;
        }
        if (event) {
            event.stopPropagation();
        }
        const selectedDate = new Date(day.date);
        alert(`MEGA DEBUG: Fecha final: ${selectedDate}`);
        this.selectDate(selectedDate);
    }
    onMonthClick(month, event) {
        console.log('ðŸ”¥ *** NUEVA VERSION *** MonthClick - Month:', month.number, 'Year:', month.year);
        if (month.isDisabled) {
            return;
        }
        // Prevenir que el evento se propague para evitar que se cierre el calendario
        if (event) {
            event.stopPropagation();
        }
        console.log('ðŸ”¥ MonthClick - CurrentDate antes:', this.currentDate);
        this.currentDate = new Date(month.year, month.number, 1);
        console.log('ðŸ”¥ MonthClick - CurrentDate despuÃ©s:', this.currentDate);
        this.setView('day');
        this.monthChange.emit(new Date(this.currentDate));
    }
    onYearClick(year, event) {
        console.log('ðŸŒŸ *** NUEVA VERSION *** YearClick - Year:', year.year, 'CurrentMonth:', this.currentDate.getMonth());
        if (year.isDisabled) {
            return;
        }
        // Prevenir que el evento se propague para evitar que se cierre el calendario
        if (event) {
            event.stopPropagation();
        }
        console.log('ðŸŒŸ YearClick - CurrentDate antes:', this.currentDate);
        this.currentDate = new Date(year.year, this.currentDate.getMonth(), 1);
        console.log('ðŸŒŸ YearClick - CurrentDate despuÃ©s:', this.currentDate);
        // Â¡SOLUCION! Regenerar los meses despuÃ©s de cambiar el aÃ±o
        this.generateCalendarMonths();
        this.setView('month');
        this.yearChange.emit(year.year);
    }
    onTodayClick() {
        const today = new Date();
        if (!this.isDateDisabled(today)) {
            this.selectDate(today);
            this.currentDate = new Date(today);
            this.generateCalendarDays();
        }
    }
    onClearClick() {
        this.selectDate(null);
    }
    onClearValue(event) {
        // Prevenir propagaciÃ³n del evento
        event.preventDefault();
        event.stopPropagation();
        if (!this.disabled) {
            this.selectDate(null);
        }
    }
    // Navigation methods
    navigatePrevious(event) {
        if (event) {
            event.stopPropagation();
        }
        switch (this.currentView) {
            case 'day':
                this.currentDate = new Date(this.currentDate.getFullYear(), this.currentDate.getMonth() - 1, 1);
                this.generateCalendarDays();
                break;
            case 'month':
                this.currentDate = new Date(this.currentDate.getFullYear() - 1, this.currentDate.getMonth(), 1);
                this.generateCalendarMonths();
                break;
            case 'year':
                this.currentDate = new Date(this.currentDate.getFullYear() - 21, this.currentDate.getMonth(), 1);
                this.generateCalendarYears();
                break;
        }
        this.cdr.markForCheck();
    }
    navigateNext(event) {
        if (event) {
            event.stopPropagation();
        }
        switch (this.currentView) {
            case 'day':
                this.currentDate = new Date(this.currentDate.getFullYear(), this.currentDate.getMonth() + 1, 1);
                this.generateCalendarDays();
                break;
            case 'month':
                this.currentDate = new Date(this.currentDate.getFullYear() + 1, this.currentDate.getMonth(), 1);
                this.generateCalendarMonths();
                break;
            case 'year':
                this.currentDate = new Date(this.currentDate.getFullYear() + 21, this.currentDate.getMonth(), 1);
                this.generateCalendarYears();
                break;
        }
        this.cdr.markForCheck();
    }
    setView(view) {
        this.currentView = view;
        this.viewChange.emit({
            view,
            date: new Date(this.currentDate),
            month: this.currentDate.getMonth(),
            year: this.currentDate.getFullYear()
        });
        this.cdr.markForCheck();
    }
    toggleCalendar() {
        this.isOpen = !this.isOpen;
        this.cdr.markForCheck();
    }
    closeCalendar() {
        this.isOpen = false;
        this.cdr.markForCheck();
    }
    // Helper methods
    getDateFromInput(dateInput) {
        if (!dateInput)
            return null;
        if (dateInput instanceof Date)
            return dateInput;
        return new Date(dateInput);
    }
    // Navigation methods
    canNavigateToPreviousMonth() {
        const minDate = this.getDateFromInput(this.minDate);
        if (!minDate)
            return true;
        const currentMonth = new Date(this.currentDate.getFullYear(), this.currentDate.getMonth(), 1);
        const previousMonth = new Date(currentMonth.getFullYear(), currentMonth.getMonth() - 1, 1);
        return previousMonth >= new Date(minDate.getFullYear(), minDate.getMonth(), 1);
    }
    canNavigateToNextMonth() {
        const maxDate = this.getDateFromInput(this.maxDate);
        if (!maxDate)
            return true;
        const currentMonth = new Date(this.currentDate.getFullYear(), this.currentDate.getMonth(), 1);
        const nextMonth = new Date(currentMonth.getFullYear(), currentMonth.getMonth() + 1, 1);
        return nextMonth <= new Date(maxDate.getFullYear(), maxDate.getMonth(), 1);
    }
    canNavigateToPreviousYear() {
        const minDate = this.getDateFromInput(this.minDate);
        if (!minDate)
            return true;
        return this.currentDate.getFullYear() - 1 >= minDate.getFullYear();
    }
    canNavigateToNextYear() {
        const maxDate = this.getDateFromInput(this.maxDate);
        if (!maxDate)
            return true;
        return this.currentDate.getFullYear() + 1 <= maxDate.getFullYear();
    }
    // Date selection logic
    selectDate(date) {
        alert(`SELECTDATE MEGA DEBUG: RecibiÃ³ fecha: ${date}`);
        if (date === null) {
            this.selectedDates = [];
            this._value = null;
        }
        else if (this.mergedConfig.allowMultiSelect) {
            this.handleMultiSelect(date);
        }
        else if (this.mergedConfig.allowRangeSelect) {
            this.handleRangeSelect(date);
        }
        else {
            this.selectedDates = [date];
            this._value = date;
        }
        alert(`SELECTDATE MEGA DEBUG: _value final: ${this._value}`);
        this.updateValue();
        if (this.mergedConfig.closeOnSelect && !this.mergedConfig.allowMultiSelect && !this.mergedConfig.allowRangeSelect) {
            this.closeCalendar();
        }
    }
    handleMultiSelect(date) {
        const existingIndex = this.selectedDates.findIndex(selectedDate => this.isSameDay(selectedDate, date));
        if (existingIndex > -1) {
            this.selectedDates.splice(existingIndex, 1);
        }
        else {
            this.selectedDates.push(date);
        }
        this._value = [...this.selectedDates];
    }
    handleRangeSelect(date) {
        if (this.selectedDates.length === 0 || this.selectedDates.length === 2) {
            this.selectedDates = [date];
        }
        else if (this.selectedDates.length === 1) {
            const startDate = this.selectedDates[0];
            if (date < startDate) {
                this.selectedDates = [date, startDate];
            }
            else {
                this.selectedDates = [startDate, date];
            }
        }
        this._value = [...this.selectedDates];
    }
    updateValue() {
        alert(`UPDATEVALUE MEGA DEBUG: selectedDates[0]: ${this.selectedDates[0]}, _value: ${this._value}, inputValue: ${this.inputValue}`);
        const selectEvent = {
            date: this.selectedDates[0] || new Date(),
            formattedDate: this.inputValue,
            selectedDates: [...this.selectedDates]
        };
        if (this.mergedConfig.allowRangeSelect && this.selectedDates.length === 2) {
            selectEvent.isRange = true;
            selectEvent.startDate = this.selectedDates[0];
            selectEvent.endDate = this.selectedDates[1];
        }
        this.onChange(this._value);
        this.dateSelect.emit(selectEvent);
        this.generateCalendarDays();
        this.cdr.markForCheck();
        alert(`UPDATEVALUE MEGA DEBUG: DespuÃ©s de onChange - inputValue: ${this.inputValue}`);
    }
    // Utility methods
    isSameDay(date1, date2) {
        return date1.getFullYear() === date2.getFullYear() &&
            date1.getMonth() === date2.getMonth() &&
            date1.getDate() === date2.getDate();
    }
    formatDate(date) {
        const day = date.getDate();
        const month = date.getMonth();
        const year = date.getFullYear().toString();
        let formattedDate = this.mergedLocale.dateFormat;
        // Reemplazar dÃ­a (con padding de cero para dÃ­as menores a 10)
        formattedDate = formattedDate.replace('dd', day.toString().padStart(2, '0'));
        // Reemplazar mes (verificar si es formato largo o corto)
        if (formattedDate.includes('mmmm')) {
            // Mes completo en espaÃ±ol
            formattedDate = formattedDate.replace('mmmm', this.mergedLocale.months[month].toLowerCase());
        }
        else if (formattedDate.includes('mmm')) {
            // Mes abreviado
            formattedDate = formattedDate.replace('mmm', this.mergedLocale.monthsShort[month]);
        }
        else if (formattedDate.includes('mm')) {
            // Mes numÃ©rico con padding
            formattedDate = formattedDate.replace('mm', (month + 1).toString().padStart(2, '0'));
        }
        else if (formattedDate.includes('m')) {
            // Mes numÃ©rico sin padding
            formattedDate = formattedDate.replace('m', (month + 1).toString());
        }
        // Reemplazar aÃ±o
        formattedDate = formattedDate.replace('yyyy', year);
        return formattedDate;
    }
    getHeaderTitle() {
        switch (this.currentView) {
            case 'day':
                return `${this.mergedLocale.months[this.currentDate.getMonth()]} ${this.currentDate.getFullYear()}`;
            case 'month':
                return this.currentDate.getFullYear().toString();
            case 'year':
                const startYear = this.currentDate.getFullYear() - 10;
                const endYear = this.currentDate.getFullYear() + 10;
                return `${startYear} - ${endYear}`;
            default:
                return '';
        }
    }
    getWeekdays() {
        const weekdays = [...this.mergedLocale.weekdaysMin];
        const firstDay = this.mergedLocale.firstDayOfWeek;
        return [
            ...weekdays.slice(firstDay),
            ...weekdays.slice(0, firstDay)
        ];
    }
    static Éµfac = i0.ÉµÉµngDeclareFactory({ minVersion: "12.0.0", version: "18.2.13", ngImport: i0, type: SaCalendarComponent, deps: [{ token: i0.ChangeDetectorRef }, { token: i0.ElementRef }], target: i0.ÉµÉµFactoryTarget.Component });
    static Éµcmp = i0.ÉµÉµngDeclareComponent({ minVersion: "14.0.0", version: "18.2.13", type: SaCalendarComponent, selector: "sa-calendar", inputs: { size: "size", status: "status", label: "label", noLabel: "noLabel", placeholder: "placeholder", helperText: "helperText", errorText: "errorText", required: "required", readonly: "readonly", disabled: "disabled", minDate: "minDate", maxDate: "maxDate", id: "id", name: "name", locale: "locale", colors: "colors", config: "config", validation: "validation", events: "events", inline: "inline", showInput: "showInput" }, outputs: { dateSelect: "dateSelect", viewChange: "viewChange", monthChange: "monthChange", yearChange: "yearChange", focus: "focus", blur: "blur" }, host: { listeners: { "document:click": "onDocumentClickOutside($event)" }, properties: { "class.sanna-ui-calendar-size-sm": "size === \"sm\"", "class.sanna-ui-calendar-size-md": "size === \"md\"", "class.sanna-ui-calendar-size-lg": "size === \"lg\"", "class.sanna-ui-calendar-disabled": "disabled", "class.sanna-ui-calendar-readonly": "readonly", "class.sanna-ui-calendar-inline": "inline" }, classAttribute: "sanna-ui-component sanna-ui-calendar" }, providers: [
            {
                provide: NG_VALUE_ACCESSOR,
                useExisting: forwardRef(() => SaCalendarComponent),
                multi: true
            }
        ], usesOnChanges: true, ngImport: i0, template: "<div class=\"sa-calendar-container sanna-ui-calendar-root\" [attr.data-sanna-calendar]=\"true\">\r\n  <!-- Input field (if not inline) -->\r\n  <div *ngIf=\"!inline\" class=\"calendar-input-container\">\r\n    <label *ngIf=\"shouldShowLabel\" [for]=\"calendarId\" [class]=\"labelClasses\">\r\n      {{ label }}\r\n      <span *ngIf=\"required && label\" class=\"text-danger\">*</span>\r\n    </label>\r\n\r\n    <div class=\"position-relative\">\r\n      <input\r\n        [id]=\"calendarId\"\r\n        [name]=\"name\"\r\n        [class]=\"inputClasses\"\r\n        type=\"text\"\r\n        [value]=\"inputValue\"\r\n        [placeholder]=\"placeholder\"\r\n        [required]=\"required\"\r\n        readonly=\"true\"\r\n        [disabled]=\"disabled\"\r\n        spellcheck=\"false\"\r\n        autocomplete=\"off\"\r\n        (click)=\"onInputClick($event)\"\r\n        (focus)=\"onInputFocus($event)\"\r\n        (blur)=\"onInputBlur($event)\"\r\n      />\r\n      \r\n      <!-- Clear icon (X) cuando hay valor -->\r\n      <div \r\n        *ngIf=\"inputValue && !disabled\"\r\n        class=\"clear-icon\" \r\n        (click)=\"onClearValue($event)\"\r\n        title=\"Limpiar fecha\">\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n          <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\r\n          <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\r\n        </svg>\r\n      </div>\r\n\r\n      <!-- Calendar icon (cuando no hay valor o est\u00E1 deshabilitado) -->\r\n      <div \r\n        *ngIf=\"!inputValue || disabled\"\r\n        class=\"calendar-icon\" \r\n        [class.disabled]=\"disabled || readonly\"\r\n        (click)=\"onInputClick($event)\">\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n          <rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect>\r\n          <line x1=\"16\" y1=\"2\" x2=\"16\" y2=\"6\"></line>\r\n          <line x1=\"8\" y1=\"2\" x2=\"8\" y2=\"6\"></line>\r\n          <line x1=\"3\" y1=\"10\" x2=\"21\" y2=\"10\"></line>\r\n        </svg>\r\n      </div>\r\n    </div>\r\n\r\n    <div *ngIf=\"helperText && !errorText\" class=\"form-text\">{{ helperText }}</div>\r\n    <div *ngIf=\"errorText\" class=\"invalid-feedback d-block\">{{ errorText }}</div>\r\n  </div>\r\n\r\n  <!-- Calendar popup/inline -->\r\n  <div \r\n    class=\"calendar-popup\" \r\n    [class.inline]=\"inline\"\r\n    [class.open]=\"isOpen\"\r\n    [style.--primary-color]=\"mergedColors.primary\"\r\n    [style.--secondary-color]=\"mergedColors.secondary\"\r\n    [style.--success-color]=\"mergedColors.success\"\r\n    [style.--error-color]=\"mergedColors.error\"\r\n    [style.--background-color]=\"mergedColors.background\"\r\n    [style.--surface-color]=\"mergedColors.surface\"\r\n    [style.--border-color]=\"mergedColors.border\"\r\n    [style.--disabled-color]=\"mergedColors.disabled\"\r\n    [style.--hover-color]=\"mergedColors.hover\"\r\n    [style.--weekday-header-bg]=\"mergedColors.weekdayHeaderBg\"\r\n    [style.--weekday-header-color]=\"mergedColors.weekdayHeaderColor\"\r\n    *ngIf=\"inline || isOpen\">\r\n    \r\n    <!-- Calendar header -->\r\n    <div class=\"calendar-header\" *ngIf=\"mergedConfig.showHeader\">\r\n      <!-- Navigation -->\r\n      <div class=\"calendar-navigation\" *ngIf=\"mergedConfig.showNavigation\">\r\n        <button \r\n          type=\"button\" \r\n          class=\"nav-button prev\" \r\n          (click)=\"navigatePrevious($event)\"\r\n          [disabled]=\"disabled || !canNavigateToPreviousMonth() && currentView === 'day' || !canNavigateToPreviousYear() && currentView === 'month'\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n            <polyline points=\"15,18 9,12 15,6\"></polyline>\r\n          </svg>\r\n        </button>\r\n\r\n        <div class=\"header-title-container\">\r\n          <button \r\n            type=\"button\" \r\n            class=\"header-title\"\r\n            (click)=\"currentView === 'day' ? setView('month') : currentView === 'month' ? setView('year') : null\"\r\n            [disabled]=\"disabled\">\r\n            {{ getHeaderTitle() }}\r\n          </button>\r\n        </div>\r\n\r\n        <button \r\n          type=\"button\" \r\n          class=\"nav-button next\" \r\n          (click)=\"navigateNext($event)\"\r\n          [disabled]=\"disabled || !canNavigateToNextMonth() && currentView === 'day' || !canNavigateToNextYear() && currentView === 'month'\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n            <polyline points=\"9,18 15,12 9,6\"></polyline>\r\n          </svg>\r\n        </button>\r\n      </div>\r\n\r\n      <!-- Action buttons (ocultos por defecto para dise\u00F1o m\u00E1s limpio) -->\r\n      <div class=\"calendar-actions\" *ngIf=\"mergedConfig.showTodayButton || mergedConfig.showClearButton\">\r\n        <button \r\n          *ngIf=\"mergedConfig.showTodayButton\"\r\n          type=\"button\" \r\n          class=\"action-button today-button\"\r\n          (click)=\"onTodayClick()\"\r\n          [disabled]=\"disabled\">\r\n          {{ mergedLocale.today }}\r\n        </button>\r\n        \r\n        <button \r\n          *ngIf=\"mergedConfig.showClearButton\"\r\n          type=\"button\" \r\n          class=\"action-button clear-button\"\r\n          (click)=\"onClearClick()\"\r\n          [disabled]=\"disabled\">\r\n          {{ mergedLocale.clear }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Calendar content -->\r\n    <div class=\"calendar-content\">\r\n      <!-- Day view -->\r\n      <div class=\"calendar-days\" *ngIf=\"currentView === 'day'\">\r\n        <!-- Weekday headers -->\r\n        <div class=\"weekdays\">\r\n          <div \r\n            class=\"weekday-header\" \r\n            *ngFor=\"let weekday of getWeekdays()\">\r\n            {{ weekday }}\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Calendar grid -->\r\n        <div class=\"days-grid\">\r\n          <div \r\n            class=\"week-row\" \r\n            *ngFor=\"let week of calendarDays\">\r\n            <div \r\n              class=\"day-cell\"\r\n              *ngFor=\"let day of week\"\r\n              [class.today]=\"day.isToday && mergedConfig.highlightToday\"\r\n              [class.selected]=\"day.isSelected\"\r\n              [class.disabled]=\"day.isDisabled\"\r\n              [class.other-month]=\"!day.isInCurrentMonth\"\r\n              [class.weekend]=\"day.isWeekend && mergedConfig.highlightWeekends\"\r\n              [class.has-event]=\"day.hasEvent\"\r\n              (click)=\"onDayClick(day, $event)\">\r\n              <span class=\"day-number\">{{ day.day }}</span>\r\n              <div *ngIf=\"day.hasEvent\" class=\"event-indicator\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Month view -->\r\n      <div class=\"calendar-months\" *ngIf=\"currentView === 'month'\">\r\n        <div class=\"months-grid\">\r\n          <div \r\n            class=\"month-cell\"\r\n            *ngFor=\"let month of calendarMonths\"\r\n            [class.selected]=\"month.isSelected\"\r\n            [class.disabled]=\"month.isDisabled\"\r\n            [class.current]=\"month.isCurrent\"\r\n            (click)=\"onMonthClick(month, $event)\">\r\n            {{ month.name }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Year view -->\r\n      <div class=\"calendar-years\" *ngIf=\"currentView === 'year'\">\r\n        <div class=\"years-grid\">\r\n          <div \r\n            class=\"year-cell\"\r\n            *ngFor=\"let year of calendarYears\"\r\n            [class.selected]=\"year.isSelected\"\r\n            [class.disabled]=\"year.isDisabled\"\r\n            [class.current]=\"year.isCurrent\"\r\n            (click)=\"onYearClick(year, $event)\">\r\n            {{ year.year }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n", styles: ["@charset \"UTF-8\";@import\"https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap\";:root{--sanna-font-family: Plus Jakarta Sans, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, sans-serif;--sanna-font-light: Plus Jakarta Sans, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, sans-serif;--sanna-font-regular: Plus Jakarta Sans, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, sans-serif;--sanna-font-medium: Plus Jakarta Sans, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, sans-serif;--sanna-font-semibold: Plus Jakarta Sans, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, sans-serif;--sanna-font-bold: Plus Jakarta Sans, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, sans-serif}.sanna-component{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif!important;font-optical-sizing:auto;font-style:normal;font-weight:400!important}.sanna-font-light{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif!important;font-optical-sizing:auto;font-style:normal;font-weight:300!important}.sanna-font-regular{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif!important;font-optical-sizing:auto;font-style:normal;font-weight:400!important}.sanna-font-medium,.sanna-font-semibold{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif!important;font-optical-sizing:auto;font-style:normal;font-weight:500!important}.sanna-font-bold{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif!important;font-optical-sizing:auto;font-style:normal;font-weight:700!important}[class*=sa-],[class^=sanna-]{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif!important;font-optical-sizing:auto;font-style:normal;font-weight:400!important}:host{display:block;width:100%;font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;box-sizing:border-box;position:relative;--primary-color: #36AD55;--secondary-color: #6c757d;--success-color: #32A047;--error-color: #ef4444;--warning-color: #f59e0b;--info-color: #3b82f6;--light-color: #f8f9fa;--dark-color: #212529;--background-color: #ffffff;--surface-color: #f8f9fa;--on-primary-color: #ffffff;--on-surface-color: #212529;--border-color: #dee2e6;--disabled-color: #e9ecef;--hover-color: #e9ecef;--weekday-header-bg: #f8f9fa;--weekday-header-color: #212529;--transition-duration: .2s;--border-radius: .375rem;--box-shadow: 0 .125rem .25rem rgba(0, 0, 0, .075);--box-shadow-focus: 0 0 0 .2rem rgba(54, 173, 85, .25)}:host *{box-sizing:border-box}.sa-calendar-container{position:relative;width:100%;font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;overflow:visible}.calendar-input-container{width:100%;margin-bottom:0}.form-label{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;color:var(--on-surface-color);font-size:14px;font-weight:400;margin-bottom:2px;display:inline-block}.form-label.label-sm{font-size:11px!important}.form-label.label-md{font-size:14px!important}.form-label.label-lg{font-size:16px!important}.form-label.ghost-label{visibility:hidden}.form-label.ghost-label:before{content:\"\\a0\"}.position-relative{position:relative}.calendar-input{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;display:block;width:100%;padding:.375rem 2.5rem .375rem .75rem;font-size:16px;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;background-clip:padding-box;border:1px solid #dee2e6;border-radius:.375rem;transition:border-color var(--transition-duration) ease-in-out,box-shadow var(--transition-duration) ease-in-out;box-sizing:border-box;cursor:pointer}.calendar-input:focus,.calendar-input:focus-visible,.calendar-input:focus-within{outline:none!important;box-shadow:inset 0 0 0 2px var(--primary-color)!important;border-color:transparent!important}.calendar-input:focus.mat-focused,.calendar-input:focus.mat-form-field-focused,.calendar-input:focus-visible.mat-focused,.calendar-input:focus-visible.mat-form-field-focused,.calendar-input:focus-within.mat-focused,.calendar-input:focus-within.mat-form-field-focused{outline:none!important;box-shadow:inset 0 0 0 2px var(--primary-color)!important;border-color:transparent!important}.calendar-input:disabled{background-color:#e9ecef!important;opacity:1;cursor:default}.calendar-input:read-only:not(:disabled){background-color:#fff!important;cursor:pointer}.calendar-input.is-valid{border-color:#32a047!important;padding-right:3.5rem!important}.calendar-input.is-valid:focus{box-shadow:inset 0 0 0 2px #32a047!important;border-color:transparent!important}.calendar-input.is-invalid{border-color:#ef4444!important;padding-right:3.5rem!important}.calendar-input.is-invalid:focus{box-shadow:inset 0 0 0 2px #ef4444!important;border-color:transparent!important}.calendar-input.form-control-sm{min-height:calc(1.5em + .5rem + 2px);padding:4.125px 8.25px!important;padding-right:2.25rem!important;font-size:11px!important;border-radius:.25rem}.calendar-input.form-control-lg{min-height:calc(1.5em + 1rem + 2px);padding:.5rem 1rem;padding-right:3rem!important;font-size:20px;border-radius:.5rem}.calendar-icon{position:absolute!important;top:50%!important;right:.75rem!important;transform:translateY(-50%)!important;width:20px!important;height:20px!important;cursor:pointer!important;pointer-events:all!important;z-index:10!important;display:flex!important;align-items:center!important;justify-content:center!important;color:#32a047!important;transition:color var(--transition-duration) ease-in-out!important}.calendar-icon svg{width:16px;height:16px;stroke:currentColor}.calendar-icon:hover{color:var(--primary-color)}.calendar-icon.disabled{color:var(--secondary-color);cursor:default;pointer-events:none}.calendar-input-container .position-relative .calendar-input.is-valid~.calendar-icon,.calendar-input-container .position-relative .calendar-input.is-invalid~.calendar-icon{right:2.25rem!important}.validation-icon{position:absolute!important;top:50%!important;right:.75rem!important;transform:translateY(-50%)!important;width:16px!important;height:16px!important;z-index:11!important;display:flex!important;align-items:center!important;justify-content:center!important}.validation-icon.success{color:#32a047!important}.validation-icon.error{color:#ef4444!important}.validation-icon svg{width:16px!important;height:16px!important;stroke:currentColor!important}.clear-icon{position:absolute!important;top:50%!important;right:.75rem!important;transform:translateY(-50%)!important;width:20px!important;height:20px!important;cursor:pointer!important;pointer-events:all!important;z-index:10!important;display:flex!important;align-items:center!important;justify-content:center!important;transition:color var(--transition-duration) ease-in-out,background-color var(--transition-duration) ease-in-out!important;border-radius:50%!important;color:var(--error-color)!important}.clear-icon svg{width:14px;height:14px;stroke:currentColor}.clear-icon:hover{background-color:#ef44441a}.calendar-input-container .position-relative .calendar-input.is-valid~.clear-icon,.calendar-input-container .position-relative .calendar-input.is-invalid~.clear-icon{right:2.25rem!important}.form-control-sm~.calendar-icon,.form-control-sm~.clear-icon{right:.5rem;width:18px;height:18px}.form-control-sm~.calendar-icon svg,.form-control-sm~.clear-icon svg{width:14px;height:14px}.form-control-lg~.calendar-icon,.form-control-lg~.clear-icon{right:1rem;width:24px;height:24px}.form-control-lg~.calendar-icon svg,.form-control-lg~.clear-icon svg{width:20px;height:20px}.calendar-popup{position:absolute;top:100%;left:0;z-index:1000;background:#fff!important;border:1px solid #dee2e6!important;border-radius:8px;box-shadow:0 8px 24px #0000001f;margin-top:4px;opacity:0;transform:translateY(-10px);visibility:hidden;transition:opacity var(--transition-duration) ease-in-out,transform var(--transition-duration) ease-in-out,visibility var(--transition-duration) ease-in-out;width:220px;max-width:90vw;box-sizing:border-box;overflow:hidden}.calendar-popup.open{opacity:1;transform:translateY(0);visibility:visible}.calendar-popup.inline{position:static;opacity:1;transform:none;visibility:visible;margin-top:0;box-shadow:none;border:1px solid var(--border-color)}.calendar-header{padding:1rem 1rem .5rem;border-bottom:1px solid #dee2e6!important;background:#fff!important;border-radius:8px 8px 0 0}.calendar-navigation{display:flex;align-items:center;justify-content:space-between;margin-bottom:.5rem}.nav-button{display:flex;align-items:center;justify-content:center;width:28px;height:28px;border:none;background:transparent;color:var(--secondary-color);border-radius:6px;cursor:pointer;transition:background-color var(--transition-duration) ease-in-out,color var(--transition-duration) ease-in-out}.nav-button svg{width:14px;height:14px}.nav-button:hover:not(:disabled){background:var(--hover-color);color:var(--on-surface-color)}.nav-button:disabled{opacity:.3;cursor:not-allowed}.header-title-container{flex:1;text-align:center;display:flex;justify-content:center;align-items:center}.header-title{background:none!important;border:none!important;font-size:12px!important;font-weight:500!important;color:var(--on-surface-color)!important;cursor:pointer!important;padding:.25rem .75rem!important;border-radius:6px!important;transition:background-color var(--transition-duration) ease-in-out!important;min-width:80px!important;min-height:32px!important;display:flex!important;align-items:center!important;justify-content:center!important;font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif!important;margin:0!important;outline:none!important}.header-title:hover:not(:disabled){background:var(--hover-color)}.header-title:disabled{cursor:default}.calendar-actions{display:none;gap:.5rem;justify-content:center;margin-top:.5rem}.action-button{padding:.375rem .75rem;font-size:14px;border:1px solid var(--border-color);background:var(--background-color);color:var(--on-surface-color);border-radius:var(--border-radius);cursor:pointer;transition:background-color var(--transition-duration) ease-in-out,border-color var(--transition-duration) ease-in-out,color var(--transition-duration) ease-in-out}.action-button:hover:not(:disabled){background:var(--primary-color);border-color:var(--primary-color);color:var(--on-primary-color)}.action-button:disabled{opacity:.5;cursor:not-allowed}.calendar-content{padding:.5rem .75rem .75rem;overflow:hidden;box-sizing:border-box}.calendar-days .weekdays{display:grid;grid-template-columns:repeat(7,1fr);gap:0;margin-bottom:6px;background-color:#e2f3e6;border-radius:4px;padding:.375rem 0}.calendar-days .weekday-header{text-align:center;font-size:10px;font-weight:800;color:var(--weekday-header-color);background-color:transparent;padding:0;text-transform:uppercase;letter-spacing:.3px}.calendar-days .days-grid .week-row{display:grid;grid-template-columns:repeat(7,1fr);gap:2px;margin-bottom:2px}.calendar-days .day-cell{position:relative;display:flex;align-items:center;justify-content:center;min-height:26px;width:100%;max-width:26px;margin:0 auto;border-radius:4px;cursor:pointer;transition:background-color var(--transition-duration) ease-in-out,color var(--transition-duration) ease-in-out,transform var(--transition-duration) ease-in-out;-webkit-user-select:none;user-select:none}.calendar-days .day-cell .day-number{font-size:11px;font-weight:400;z-index:1}.calendar-days .day-cell .event-indicator{position:absolute;bottom:4px;left:50%;transform:translate(-50%);width:4px;height:4px;background:var(--primary-color);border-radius:50%}.calendar-days .day-cell:hover:not(.disabled){background:var(--hover-color)}.calendar-days .day-cell.today{background:transparent;position:relative}.calendar-days .day-cell.today .day-number{color:var(--primary-color);font-weight:600}.calendar-days .day-cell.today:after{content:\"\";position:absolute;bottom:2px;left:50%;transform:translate(-50%);width:4px;height:4px;background-color:var(--primary-color);border-radius:50%}.calendar-days .day-cell.selected{background:var(--primary-color);color:var(--on-primary-color);font-weight:500}.calendar-days .day-cell.selected .day-number{font-weight:500;color:var(--on-primary-color)}.calendar-days .day-cell.selected:hover{background:var(--primary-color);opacity:.9}.calendar-days .day-cell.today.selected{background:var(--primary-color);color:var(--on-primary-color)}.calendar-days .day-cell.today.selected .day-number{color:var(--on-primary-color);font-weight:600}.calendar-days .day-cell.today.selected:after{display:none}.calendar-days .day-cell.disabled{opacity:.4;cursor:not-allowed}.calendar-days .day-cell.disabled:hover{background:transparent;transform:none}.calendar-days .day-cell.weekend{color:var(--error-color)}.calendar-days .day-cell.weekend .day-number{font-weight:500}.calendar-days .day-cell.has-event{background:#36ad551a}.calendar-days .day-cell.has-event:not(.selected):not(.today){border:1px solid var(--primary-color)}.calendar-months .months-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}.calendar-months .month-cell{display:flex!important;align-items:center!important;justify-content:center!important;min-height:40px!important;border-radius:var(--border-radius)!important;cursor:pointer!important;transition:background-color var(--transition-duration) ease-in-out,color var(--transition-duration) ease-in-out,transform var(--transition-duration) ease-in-out!important;-webkit-user-select:none!important;user-select:none!important;font-size:11px!important;font-weight:500!important;font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif!important;background:transparent!important;border:none!important;margin:0!important;padding:0!important;color:var(--on-surface-color)!important}.calendar-months .month-cell:hover:not(.disabled):not(.current):not(.selected){background:var(--hover-color)}.calendar-months .month-cell.current{background:var(--primary-color);color:var(--on-primary-color)}.calendar-months .month-cell.current:hover{background:var(--primary-color);opacity:.9}.calendar-months .month-cell.selected{background:var(--primary-color);color:var(--on-primary-color);font-weight:600}.calendar-months .month-cell.selected:hover{background:var(--primary-color);opacity:.9}.calendar-months .month-cell.disabled{opacity:.4;cursor:not-allowed}.calendar-months .month-cell.disabled:hover{background:transparent;transform:none}.calendar-years .years-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}.calendar-years .year-cell{display:flex!important;align-items:center!important;justify-content:center!important;min-height:40px!important;border-radius:var(--border-radius)!important;cursor:pointer!important;transition:background-color var(--transition-duration) ease-in-out,color var(--transition-duration) ease-in-out,transform var(--transition-duration) ease-in-out!important;-webkit-user-select:none!important;user-select:none!important;font-size:11px!important;font-weight:500!important;font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif!important;background:transparent!important;border:none!important;margin:0!important;padding:0!important;color:var(--on-surface-color)!important}.calendar-years .year-cell:hover:not(.disabled):not(.current):not(.selected){background:var(--hover-color)}.calendar-years .year-cell.current{background:var(--primary-color);color:var(--on-primary-color)}.calendar-years .year-cell.current:hover{background:var(--primary-color);opacity:.9}.calendar-years .year-cell.selected{background:var(--primary-color);color:var(--on-primary-color);font-weight:600}.calendar-years .year-cell.selected:hover{background:var(--primary-color);opacity:.9;transform:scale(1.02)}.calendar-years .year-cell.disabled{opacity:.4;cursor:not-allowed}.calendar-years .year-cell.disabled:hover{background:transparent;transform:none}.form-text{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif!important;font-size:12px;color:var(--secondary-color);margin-top:.25rem}.invalid-feedback{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif!important;font-size:12px;margin-top:.25rem;color:var(--error-color);display:block}.text-danger{color:var(--error-color)!important}@media (max-width: 576px){.calendar-popup{left:50%;transform:translate(-50%);width:200px;max-width:calc(100vw - 2rem)}.calendar-popup.open{transform:translate(-50%) translateY(0)}.calendar-header{padding:.75rem .75rem .5rem}.calendar-content{padding:.375rem .5rem .5rem}.header-title{min-width:70px;min-height:30px;padding:.5rem .75rem;font-size:11px}.day-cell{min-height:24px;width:100%;max-width:24px}.day-cell .day-number{font-size:10px}.months-grid{grid-template-columns:repeat(2,1fr)!important}.years-grid{grid-template-columns:repeat(3,1fr)!important}}@keyframes fadeInUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.calendar-popup.open{animation:fadeInUp var(--transition-duration) ease-out}:host(.theme-dark){--background-color: #1f2937;--surface-color: #374151;--on-surface-color: #f9fafb;--border-color: #4b5563;--disabled-color: #374151;--hover-color: #4b5563;--secondary-color: #9ca3af}:host(.theme-compact) .day-cell{min-height:28px}:host(.theme-compact) .calendar-header{padding:.5rem}:host(.theme-compact) .calendar-content{padding:.5rem}:host(.size-sm) .calendar-popup{min-width:240px}:host(.size-sm) .day-cell{min-height:28px}:host(.size-sm) .month-cell,:host(.size-sm) .year-cell{min-height:32px;font-size:10px}:host(.size-lg) .calendar-popup{min-width:320px}:host(.size-lg) .day-cell{min-height:44px}:host(.size-lg) .month-cell,:host(.size-lg) .year-cell{min-height:56px;font-size:16px}\n"], dependencies: [{ kind: "directive", type: i1.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.ShadowDom });
}
i0.ÉµÉµngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.13", ngImport: i0, type: SaCalendarComponent, decorators: [{
            type: Component,
            args: [{ selector: 'sa-calendar', encapsulation: ViewEncapsulation.ShadowDom, changeDetection: ChangeDetectionStrategy.OnPush, host: {
                        'class': 'sanna-ui-component sanna-ui-calendar',
                        '[class.sanna-ui-calendar-size-sm]': 'size === "sm"',
                        '[class.sanna-ui-calendar-size-md]': 'size === "md"',
                        '[class.sanna-ui-calendar-size-lg]': 'size === "lg"',
                        '[class.sanna-ui-calendar-disabled]': 'disabled',
                        '[class.sanna-ui-calendar-readonly]': 'readonly',
                        '[class.sanna-ui-calendar-inline]': 'inline'
                    }, providers: [
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef(() => SaCalendarComponent),
                            multi: true
                        }
                    ], template: "<div class=\"sa-calendar-container sanna-ui-calendar-root\" [attr.data-sanna-calendar]=\"true\">\r\n  <!-- Input field (if not inline) -->\r\n  <div *ngIf=\"!inline\" class=\"calendar-input-container\">\r\n    <label *ngIf=\"shouldShowLabel\" [for]=\"calendarId\" [class]=\"labelClasses\">\r\n      {{ label }}\r\n      <span *ngIf=\"required && label\" class=\"text-danger\">*</span>\r\n    </label>\r\n\r\n    <div class=\"position-relative\">\r\n      <input\r\n        [id]=\"calendarId\"\r\n        [name]=\"name\"\r\n        [class]=\"inputClasses\"\r\n        type=\"text\"\r\n        [value]=\"inputValue\"\r\n        [placeholder]=\"placeholder\"\r\n        [required]=\"required\"\r\n        readonly=\"true\"\r\n        [disabled]=\"disabled\"\r\n        spellcheck=\"false\"\r\n        autocomplete=\"off\"\r\n        (click)=\"onInputClick($event)\"\r\n        (focus)=\"onInputFocus($event)\"\r\n        (blur)=\"onInputBlur($event)\"\r\n      />\r\n      \r\n      <!-- Clear icon (X) cuando hay valor -->\r\n      <div \r\n        *ngIf=\"inputValue && !disabled\"\r\n        class=\"clear-icon\" \r\n        (click)=\"onClearValue($event)\"\r\n        title=\"Limpiar fecha\">\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n          <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\r\n          <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\r\n        </svg>\r\n      </div>\r\n\r\n      <!-- Calendar icon (cuando no hay valor o est\u00E1 deshabilitado) -->\r\n      <div \r\n        *ngIf=\"!inputValue || disabled\"\r\n        class=\"calendar-icon\" \r\n        [class.disabled]=\"disabled || readonly\"\r\n        (click)=\"onInputClick($event)\">\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n          <rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect>\r\n          <line x1=\"16\" y1=\"2\" x2=\"16\" y2=\"6\"></line>\r\n          <line x1=\"8\" y1=\"2\" x2=\"8\" y2=\"6\"></line>\r\n          <line x1=\"3\" y1=\"10\" x2=\"21\" y2=\"10\"></line>\r\n        </svg>\r\n      </div>\r\n    </div>\r\n\r\n    <div *ngIf=\"helperText && !errorText\" class=\"form-text\">{{ helperText }}</div>\r\n    <div *ngIf=\"errorText\" class=\"invalid-feedback d-block\">{{ errorText }}</div>\r\n  </div>\r\n\r\n  <!-- Calendar popup/inline -->\r\n  <div \r\n    class=\"calendar-popup\" \r\n    [class.inline]=\"inline\"\r\n    [class.open]=\"isOpen\"\r\n    [style.--primary-color]=\"mergedColors.primary\"\r\n    [style.--secondary-color]=\"mergedColors.secondary\"\r\n    [style.--success-color]=\"mergedColors.success\"\r\n    [style.--error-color]=\"mergedColors.error\"\r\n    [style.--background-color]=\"mergedColors.background\"\r\n    [style.--surface-color]=\"mergedColors.surface\"\r\n    [style.--border-color]=\"mergedColors.border\"\r\n    [style.--disabled-color]=\"mergedColors.disabled\"\r\n    [style.--hover-color]=\"mergedColors.hover\"\r\n    [style.--weekday-header-bg]=\"mergedColors.weekdayHeaderBg\"\r\n    [style.--weekday-header-color]=\"mergedColors.weekdayHeaderColor\"\r\n    *ngIf=\"inline || isOpen\">\r\n    \r\n    <!-- Calendar header -->\r\n    <div class=\"calendar-header\" *ngIf=\"mergedConfig.showHeader\">\r\n      <!-- Navigation -->\r\n      <div class=\"calendar-navigation\" *ngIf=\"mergedConfig.showNavigation\">\r\n        <button \r\n          type=\"button\" \r\n          class=\"nav-button prev\" \r\n          (click)=\"navigatePrevious($event)\"\r\n          [disabled]=\"disabled || !canNavigateToPreviousMonth() && currentView === 'day' || !canNavigateToPreviousYear() && currentView === 'month'\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n            <polyline points=\"15,18 9,12 15,6\"></polyline>\r\n          </svg>\r\n        </button>\r\n\r\n        <div class=\"header-title-container\">\r\n          <button \r\n            type=\"button\" \r\n            class=\"header-title\"\r\n            (click)=\"currentView === 'day' ? setView('month') : currentView === 'month' ? setView('year') : null\"\r\n            [disabled]=\"disabled\">\r\n            {{ getHeaderTitle() }}\r\n          </button>\r\n        </div>\r\n\r\n        <button \r\n          type=\"button\" \r\n          class=\"nav-button next\" \r\n          (click)=\"navigateNext($event)\"\r\n          [disabled]=\"disabled || !canNavigateToNextMonth() && currentView === 'day' || !canNavigateToNextYear() && currentView === 'month'\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n            <polyline points=\"9,18 15,12 9,6\"></polyline>\r\n          </svg>\r\n        </button>\r\n      </div>\r\n\r\n      <!-- Action buttons (ocultos por defecto para dise\u00F1o m\u00E1s limpio) -->\r\n      <div class=\"calendar-actions\" *ngIf=\"mergedConfig.showTodayButton || mergedConfig.showClearButton\">\r\n        <button \r\n          *ngIf=\"mergedConfig.showTodayButton\"\r\n          type=\"button\" \r\n          class=\"action-button today-button\"\r\n          (click)=\"onTodayClick()\"\r\n          [disabled]=\"disabled\">\r\n          {{ mergedLocale.today }}\r\n        </button>\r\n        \r\n        <button \r\n          *ngIf=\"mergedConfig.showClearButton\"\r\n          type=\"button\" \r\n          class=\"action-button clear-button\"\r\n          (click)=\"onClearClick()\"\r\n          [disabled]=\"disabled\">\r\n          {{ mergedLocale.clear }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Calendar content -->\r\n    <div class=\"calendar-content\">\r\n      <!-- Day view -->\r\n      <div class=\"calendar-days\" *ngIf=\"currentView === 'day'\">\r\n        <!-- Weekday headers -->\r\n        <div class=\"weekdays\">\r\n          <div \r\n            class=\"weekday-header\" \r\n            *ngFor=\"let weekday of getWeekdays()\">\r\n            {{ weekday }}\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Calendar grid -->\r\n        <div class=\"days-grid\">\r\n          <div \r\n            class=\"week-row\" \r\n            *ngFor=\"let week of calendarDays\">\r\n            <div \r\n              class=\"day-cell\"\r\n              *ngFor=\"let day of week\"\r\n              [class.today]=\"day.isToday && mergedConfig.highlightToday\"\r\n              [class.selected]=\"day.isSelected\"\r\n              [class.disabled]=\"day.isDisabled\"\r\n              [class.other-month]=\"!day.isInCurrentMonth\"\r\n              [class.weekend]=\"day.isWeekend && mergedConfig.highlightWeekends\"\r\n              [class.has-event]=\"day.hasEvent\"\r\n              (click)=\"onDayClick(day, $event)\">\r\n              <span class=\"day-number\">{{ day.day }}</span>\r\n              <div *ngIf=\"day.hasEvent\" class=\"event-indicator\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Month view -->\r\n      <div class=\"calendar-months\" *ngIf=\"currentView === 'month'\">\r\n        <div class=\"months-grid\">\r\n          <div \r\n            class=\"month-cell\"\r\n            *ngFor=\"let month of calendarMonths\"\r\n            [class.selected]=\"month.isSelected\"\r\n            [class.disabled]=\"month.isDisabled\"\r\n            [class.current]=\"month.isCurrent\"\r\n            (click)=\"onMonthClick(month, $event)\">\r\n            {{ month.name }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Year view -->\r\n      <div class=\"calendar-years\" *ngIf=\"currentView === 'year'\">\r\n        <div class=\"years-grid\">\r\n          <div \r\n            class=\"year-cell\"\r\n            *ngFor=\"let year of calendarYears\"\r\n            [class.selected]=\"year.isSelected\"\r\n            [class.disabled]=\"year.isDisabled\"\r\n            [class.current]=\"year.isCurrent\"\r\n            (click)=\"onYearClick(year, $event)\">\r\n            {{ year.year }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n", styles: ["@charset \"UTF-8\";@import\"https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap\";:root{--sanna-font-family: Plus Jakarta Sans, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, sans-serif;--sanna-font-light: Plus Jakarta Sans, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, sans-serif;--sanna-font-regular: Plus Jakarta Sans, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, sans-serif;--sanna-font-medium: Plus Jakarta Sans, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, sans-serif;--sanna-font-semibold: Plus Jakarta Sans, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, sans-serif;--sanna-font-bold: Plus Jakarta Sans, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, sans-serif}.sanna-component{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif!important;font-optical-sizing:auto;font-style:normal;font-weight:400!important}.sanna-font-light{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif!important;font-optical-sizing:auto;font-style:normal;font-weight:300!important}.sanna-font-regular{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif!important;font-optical-sizing:auto;font-style:normal;font-weight:400!important}.sanna-font-medium,.sanna-font-semibold{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif!important;font-optical-sizing:auto;font-style:normal;font-weight:500!important}.sanna-font-bold{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif!important;font-optical-sizing:auto;font-style:normal;font-weight:700!important}[class*=sa-],[class^=sanna-]{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif!important;font-optical-sizing:auto;font-style:normal;font-weight:400!important}:host{display:block;width:100%;font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;box-sizing:border-box;position:relative;--primary-color: #36AD55;--secondary-color: #6c757d;--success-color: #32A047;--error-color: #ef4444;--warning-color: #f59e0b;--info-color: #3b82f6;--light-color: #f8f9fa;--dark-color: #212529;--background-color: #ffffff;--surface-color: #f8f9fa;--on-primary-color: #ffffff;--on-surface-color: #212529;--border-color: #dee2e6;--disabled-color: #e9ecef;--hover-color: #e9ecef;--weekday-header-bg: #f8f9fa;--weekday-header-color: #212529;--transition-duration: .2s;--border-radius: .375rem;--box-shadow: 0 .125rem .25rem rgba(0, 0, 0, .075);--box-shadow-focus: 0 0 0 .2rem rgba(54, 173, 85, .25)}:host *{box-sizing:border-box}.sa-calendar-container{position:relative;width:100%;font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;overflow:visible}.calendar-input-container{width:100%;margin-bottom:0}.form-label{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;color:var(--on-surface-color);font-size:14px;font-weight:400;margin-bottom:2px;display:inline-block}.form-label.label-sm{font-size:11px!important}.form-label.label-md{font-size:14px!important}.form-label.label-lg{font-size:16px!important}.form-label.ghost-label{visibility:hidden}.form-label.ghost-label:before{content:\"\\a0\"}.position-relative{position:relative}.calendar-input{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;display:block;width:100%;padding:.375rem 2.5rem .375rem .75rem;font-size:16px;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;background-clip:padding-box;border:1px solid #dee2e6;border-radius:.375rem;transition:border-color var(--transition-duration) ease-in-out,box-shadow var(--transition-duration) ease-in-out;box-sizing:border-box;cursor:pointer}.calendar-input:focus,.calendar-input:focus-visible,.calendar-input:focus-within{outline:none!important;box-shadow:inset 0 0 0 2px var(--primary-color)!important;border-color:transparent!important}.calendar-input:focus.mat-focused,.calendar-input:focus.mat-form-field-focused,.calendar-input:focus-visible.mat-focused,.calendar-input:focus-visible.mat-form-field-focused,.calendar-input:focus-within.mat-focused,.calendar-input:focus-within.mat-form-field-focused{outline:none!important;box-shadow:inset 0 0 0 2px var(--primary-color)!important;border-color:transparent!important}.calendar-input:disabled{background-color:#e9ecef!important;opacity:1;cursor:default}.calendar-input:read-only:not(:disabled){background-color:#fff!important;cursor:pointer}.calendar-input.is-valid{border-color:#32a047!important;padding-right:3.5rem!important}.calendar-input.is-valid:focus{box-shadow:inset 0 0 0 2px #32a047!important;border-color:transparent!important}.calendar-input.is-invalid{border-color:#ef4444!important;padding-right:3.5rem!important}.calendar-input.is-invalid:focus{box-shadow:inset 0 0 0 2px #ef4444!important;border-color:transparent!important}.calendar-input.form-control-sm{min-height:calc(1.5em + .5rem + 2px);padding:4.125px 8.25px!important;padding-right:2.25rem!important;font-size:11px!important;border-radius:.25rem}.calendar-input.form-control-lg{min-height:calc(1.5em + 1rem + 2px);padding:.5rem 1rem;padding-right:3rem!important;font-size:20px;border-radius:.5rem}.calendar-icon{position:absolute!important;top:50%!important;right:.75rem!important;transform:translateY(-50%)!important;width:20px!important;height:20px!important;cursor:pointer!important;pointer-events:all!important;z-index:10!important;display:flex!important;align-items:center!important;justify-content:center!important;color:#32a047!important;transition:color var(--transition-duration) ease-in-out!important}.calendar-icon svg{width:16px;height:16px;stroke:currentColor}.calendar-icon:hover{color:var(--primary-color)}.calendar-icon.disabled{color:var(--secondary-color);cursor:default;pointer-events:none}.calendar-input-container .position-relative .calendar-input.is-valid~.calendar-icon,.calendar-input-container .position-relative .calendar-input.is-invalid~.calendar-icon{right:2.25rem!important}.validation-icon{position:absolute!important;top:50%!important;right:.75rem!important;transform:translateY(-50%)!important;width:16px!important;height:16px!important;z-index:11!important;display:flex!important;align-items:center!important;justify-content:center!important}.validation-icon.success{color:#32a047!important}.validation-icon.error{color:#ef4444!important}.validation-icon svg{width:16px!important;height:16px!important;stroke:currentColor!important}.clear-icon{position:absolute!important;top:50%!important;right:.75rem!important;transform:translateY(-50%)!important;width:20px!important;height:20px!important;cursor:pointer!important;pointer-events:all!important;z-index:10!important;display:flex!important;align-items:center!important;justify-content:center!important;transition:color var(--transition-duration) ease-in-out,background-color var(--transition-duration) ease-in-out!important;border-radius:50%!important;color:var(--error-color)!important}.clear-icon svg{width:14px;height:14px;stroke:currentColor}.clear-icon:hover{background-color:#ef44441a}.calendar-input-container .position-relative .calendar-input.is-valid~.clear-icon,.calendar-input-container .position-relative .calendar-input.is-invalid~.clear-icon{right:2.25rem!important}.form-control-sm~.calendar-icon,.form-control-sm~.clear-icon{right:.5rem;width:18px;height:18px}.form-control-sm~.calendar-icon svg,.form-control-sm~.clear-icon svg{width:14px;height:14px}.form-control-lg~.calendar-icon,.form-control-lg~.clear-icon{right:1rem;width:24px;height:24px}.form-control-lg~.calendar-icon svg,.form-control-lg~.clear-icon svg{width:20px;height:20px}.calendar-popup{position:absolute;top:100%;left:0;z-index:1000;background:#fff!important;border:1px solid #dee2e6!important;border-radius:8px;box-shadow:0 8px 24px #0000001f;margin-top:4px;opacity:0;transform:translateY(-10px);visibility:hidden;transition:opacity var(--transition-duration) ease-in-out,transform var(--transition-duration) ease-in-out,visibility var(--transition-duration) ease-in-out;width:220px;max-width:90vw;box-sizing:border-box;overflow:hidden}.calendar-popup.open{opacity:1;transform:translateY(0);visibility:visible}.calendar-popup.inline{position:static;opacity:1;transform:none;visibility:visible;margin-top:0;box-shadow:none;border:1px solid var(--border-color)}.calendar-header{padding:1rem 1rem .5rem;border-bottom:1px solid #dee2e6!important;background:#fff!important;border-radius:8px 8px 0 0}.calendar-navigation{display:flex;align-items:center;justify-content:space-between;margin-bottom:.5rem}.nav-button{display:flex;align-items:center;justify-content:center;width:28px;height:28px;border:none;background:transparent;color:var(--secondary-color);border-radius:6px;cursor:pointer;transition:background-color var(--transition-duration) ease-in-out,color var(--transition-duration) ease-in-out}.nav-button svg{width:14px;height:14px}.nav-button:hover:not(:disabled){background:var(--hover-color);color:var(--on-surface-color)}.nav-button:disabled{opacity:.3;cursor:not-allowed}.header-title-container{flex:1;text-align:center;display:flex;justify-content:center;align-items:center}.header-title{background:none!important;border:none!important;font-size:12px!important;font-weight:500!important;color:var(--on-surface-color)!important;cursor:pointer!important;padding:.25rem .75rem!important;border-radius:6px!important;transition:background-color var(--transition-duration) ease-in-out!important;min-width:80px!important;min-height:32px!important;display:flex!important;align-items:center!important;justify-content:center!important;font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif!important;margin:0!important;outline:none!important}.header-title:hover:not(:disabled){background:var(--hover-color)}.header-title:disabled{cursor:default}.calendar-actions{display:none;gap:.5rem;justify-content:center;margin-top:.5rem}.action-button{padding:.375rem .75rem;font-size:14px;border:1px solid var(--border-color);background:var(--background-color);color:var(--on-surface-color);border-radius:var(--border-radius);cursor:pointer;transition:background-color var(--transition-duration) ease-in-out,border-color var(--transition-duration) ease-in-out,color var(--transition-duration) ease-in-out}.action-button:hover:not(:disabled){background:var(--primary-color);border-color:var(--primary-color);color:var(--on-primary-color)}.action-button:disabled{opacity:.5;cursor:not-allowed}.calendar-content{padding:.5rem .75rem .75rem;overflow:hidden;box-sizing:border-box}.calendar-days .weekdays{display:grid;grid-template-columns:repeat(7,1fr);gap:0;margin-bottom:6px;background-color:#e2f3e6;border-radius:4px;padding:.375rem 0}.calendar-days .weekday-header{text-align:center;font-size:10px;font-weight:800;color:var(--weekday-header-color);background-color:transparent;padding:0;text-transform:uppercase;letter-spacing:.3px}.calendar-days .days-grid .week-row{display:grid;grid-template-columns:repeat(7,1fr);gap:2px;margin-bottom:2px}.calendar-days .day-cell{position:relative;display:flex;align-items:center;justify-content:center;min-height:26px;width:100%;max-width:26px;margin:0 auto;border-radius:4px;cursor:pointer;transition:background-color var(--transition-duration) ease-in-out,color var(--transition-duration) ease-in-out,transform var(--transition-duration) ease-in-out;-webkit-user-select:none;user-select:none}.calendar-days .day-cell .day-number{font-size:11px;font-weight:400;z-index:1}.calendar-days .day-cell .event-indicator{position:absolute;bottom:4px;left:50%;transform:translate(-50%);width:4px;height:4px;background:var(--primary-color);border-radius:50%}.calendar-days .day-cell:hover:not(.disabled){background:var(--hover-color)}.calendar-days .day-cell.today{background:transparent;position:relative}.calendar-days .day-cell.today .day-number{color:var(--primary-color);font-weight:600}.calendar-days .day-cell.today:after{content:\"\";position:absolute;bottom:2px;left:50%;transform:translate(-50%);width:4px;height:4px;background-color:var(--primary-color);border-radius:50%}.calendar-days .day-cell.selected{background:var(--primary-color);color:var(--on-primary-color);font-weight:500}.calendar-days .day-cell.selected .day-number{font-weight:500;color:var(--on-primary-color)}.calendar-days .day-cell.selected:hover{background:var(--primary-color);opacity:.9}.calendar-days .day-cell.today.selected{background:var(--primary-color);color:var(--on-primary-color)}.calendar-days .day-cell.today.selected .day-number{color:var(--on-primary-color);font-weight:600}.calendar-days .day-cell.today.selected:after{display:none}.calendar-days .day-cell.disabled{opacity:.4;cursor:not-allowed}.calendar-days .day-cell.disabled:hover{background:transparent;transform:none}.calendar-days .day-cell.weekend{color:var(--error-color)}.calendar-days .day-cell.weekend .day-number{font-weight:500}.calendar-days .day-cell.has-event{background:#36ad551a}.calendar-days .day-cell.has-event:not(.selected):not(.today){border:1px solid var(--primary-color)}.calendar-months .months-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}.calendar-months .month-cell{display:flex!important;align-items:center!important;justify-content:center!important;min-height:40px!important;border-radius:var(--border-radius)!important;cursor:pointer!important;transition:background-color var(--transition-duration) ease-in-out,color var(--transition-duration) ease-in-out,transform var(--transition-duration) ease-in-out!important;-webkit-user-select:none!important;user-select:none!important;font-size:11px!important;font-weight:500!important;font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif!important;background:transparent!important;border:none!important;margin:0!important;padding:0!important;color:var(--on-surface-color)!important}.calendar-months .month-cell:hover:not(.disabled):not(.current):not(.selected){background:var(--hover-color)}.calendar-months .month-cell.current{background:var(--primary-color);color:var(--on-primary-color)}.calendar-months .month-cell.current:hover{background:var(--primary-color);opacity:.9}.calendar-months .month-cell.selected{background:var(--primary-color);color:var(--on-primary-color);font-weight:600}.calendar-months .month-cell.selected:hover{background:var(--primary-color);opacity:.9}.calendar-months .month-cell.disabled{opacity:.4;cursor:not-allowed}.calendar-months .month-cell.disabled:hover{background:transparent;transform:none}.calendar-years .years-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}.calendar-years .year-cell{display:flex!important;align-items:center!important;justify-content:center!important;min-height:40px!important;border-radius:var(--border-radius)!important;cursor:pointer!important;transition:background-color var(--transition-duration) ease-in-out,color var(--transition-duration) ease-in-out,transform var(--transition-duration) ease-in-out!important;-webkit-user-select:none!important;user-select:none!important;font-size:11px!important;font-weight:500!important;font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif!important;background:transparent!important;border:none!important;margin:0!important;padding:0!important;color:var(--on-surface-color)!important}.calendar-years .year-cell:hover:not(.disabled):not(.current):not(.selected){background:var(--hover-color)}.calendar-years .year-cell.current{background:var(--primary-color);color:var(--on-primary-color)}.calendar-years .year-cell.current:hover{background:var(--primary-color);opacity:.9}.calendar-years .year-cell.selected{background:var(--primary-color);color:var(--on-primary-color);font-weight:600}.calendar-years .year-cell.selected:hover{background:var(--primary-color);opacity:.9;transform:scale(1.02)}.calendar-years .year-cell.disabled{opacity:.4;cursor:not-allowed}.calendar-years .year-cell.disabled:hover{background:transparent;transform:none}.form-text{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif!important;font-size:12px;color:var(--secondary-color);margin-top:.25rem}.invalid-feedback{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif!important;font-size:12px;margin-top:.25rem;color:var(--error-color);display:block}.text-danger{color:var(--error-color)!important}@media (max-width: 576px){.calendar-popup{left:50%;transform:translate(-50%);width:200px;max-width:calc(100vw - 2rem)}.calendar-popup.open{transform:translate(-50%) translateY(0)}.calendar-header{padding:.75rem .75rem .5rem}.calendar-content{padding:.375rem .5rem .5rem}.header-title{min-width:70px;min-height:30px;padding:.5rem .75rem;font-size:11px}.day-cell{min-height:24px;width:100%;max-width:24px}.day-cell .day-number{font-size:10px}.months-grid{grid-template-columns:repeat(2,1fr)!important}.years-grid{grid-template-columns:repeat(3,1fr)!important}}@keyframes fadeInUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.calendar-popup.open{animation:fadeInUp var(--transition-duration) ease-out}:host(.theme-dark){--background-color: #1f2937;--surface-color: #374151;--on-surface-color: #f9fafb;--border-color: #4b5563;--disabled-color: #374151;--hover-color: #4b5563;--secondary-color: #9ca3af}:host(.theme-compact) .day-cell{min-height:28px}:host(.theme-compact) .calendar-header{padding:.5rem}:host(.theme-compact) .calendar-content{padding:.5rem}:host(.size-sm) .calendar-popup{min-width:240px}:host(.size-sm) .day-cell{min-height:28px}:host(.size-sm) .month-cell,:host(.size-sm) .year-cell{min-height:32px;font-size:10px}:host(.size-lg) .calendar-popup{min-width:320px}:host(.size-lg) .day-cell{min-height:44px}:host(.size-lg) .month-cell,:host(.size-lg) .year-cell{min-height:56px;font-size:16px}\n"] }]
        }], ctorParameters: () => [{ type: i0.ChangeDetectorRef }, { type: i0.ElementRef }], propDecorators: { size: [{
                type: Input
            }], status: [{
                type: Input
            }], label: [{
                type: Input
            }], noLabel: [{
                type: Input
            }], placeholder: [{
                type: Input
            }], helperText: [{
                type: Input
            }], errorText: [{
                type: Input
            }], required: [{
                type: Input
            }], readonly: [{
                type: Input
            }], disabled: [{
                type: Input
            }], minDate: [{
                type: Input
            }], maxDate: [{
                type: Input
            }], id: [{
                type: Input
            }], name: [{
                type: Input
            }], locale: [{
                type: Input
            }], colors: [{
                type: Input
            }], config: [{
                type: Input
            }], validation: [{
                type: Input
            }], events: [{
                type: Input
            }], inline: [{
                type: Input
            }], showInput: [{
                type: Input
            }], dateSelect: [{
                type: Output
            }], viewChange: [{
                type: Output
            }], monthChange: [{
                type: Output
            }], yearChange: [{
                type: Output
            }], focus: [{
                type: Output
            }], blur: [{
                type: Output
            }], onDocumentClickOutside: [{
                type: HostListener,
                args: ['document:click', ['$event']]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2EtY2FsZW5kYXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvc2FubmEtdWkvc3JjL2xpYi9mb3Jtcy9zYS1jYWxlbmRhci9zYS1jYWxlbmRhci5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9zYW5uYS11aS9zcmMvbGliL2Zvcm1zL3NhLWNhbGVuZGFyL3NhLWNhbGVuZGFyLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDTCxTQUFTLEVBQ1QsS0FBSyxFQUNMLE1BQU0sRUFDTixZQUFZLEVBQ1osVUFBVSxFQUlWLGlCQUFpQixFQUNqQix1QkFBdUIsRUFFdkIsWUFBWSxFQUViLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBd0IsaUJBQWlCLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUN6RSxPQUFPLEVBY0wsdUJBQXVCLEVBQ3ZCLHVCQUF1QixFQUN2Qix1QkFBdUIsRUFDeEIsTUFBTSw0QkFBNEIsQ0FBQzs7O0FBeUJwQyxNQUFNLE9BQU8sbUJBQW1CO0lBMERwQjtJQUNBO0lBMURWLGVBQWU7SUFDUCxNQUFNLEdBQXlCLElBQUksQ0FBQztJQUNuQyxJQUFJLEdBQWlCLElBQUksQ0FBQztJQUMxQixNQUFNLEdBQW1CLFNBQVMsQ0FBQztJQUNuQyxLQUFLLEdBQVcsRUFBRSxDQUFDO0lBRXBCLFFBQVEsR0FBWSxLQUFLLENBQUM7SUFDbEMsSUFDSSxPQUFPLENBQUMsS0FBb0I7UUFDOUIsSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLEtBQUssSUFBSSxJQUFJLEtBQUssS0FBSyxNQUFNLENBQUM7SUFDckQsQ0FBQztJQUNELElBQUksT0FBTztRQUNULE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUN2QixDQUFDO0lBQ1EsV0FBVyxHQUFXLG1CQUFtQixDQUFDO0lBQzFDLFVBQVUsR0FBVyxFQUFF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bnQsIFxyXG4gIElucHV0LCBcclxuICBPdXRwdXQsIFxyXG4gIEV2ZW50RW1pdHRlciwgXHJcbiAgZm9yd2FyZFJlZiwgXHJcbiAgT25Jbml0LCBcclxuICBPbkNoYW5nZXMsXHJcbiAgU2ltcGxlQ2hhbmdlcyxcclxuICBWaWV3RW5jYXBzdWxhdGlvbiwgXHJcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXHJcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgSG9zdExpc3RlbmVyLFxyXG4gIEVsZW1lbnRSZWZcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQ29udHJvbFZhbHVlQWNjZXNzb3IsIE5HX1ZBTFVFX0FDQ0VTU09SIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xyXG5pbXBvcnQgeyBcclxuICBDYWxlbmRhclNpemUsIFxyXG4gIENhbGVuZGFyU3RhdHVzLCBcclxuICBDYWxlbmRhclZpZXdNb2RlLFxyXG4gIENhbGVuZGFyRGF5LFxyXG4gIENhbGVuZGFyTW9udGgsXHJcbiAgQ2FsZW5kYXJZZWFyLFxyXG4gIENhbGVuZGFyRXZlbnQsXHJcbiAgQ2FsZW5kYXJDb2xvcnMsXHJcbiAgQ2FsZW5kYXJMb2NhbGUsXHJcbiAgQ2FsZW5kYXJWYWxpZGF0aW9uLFxyXG4gIENhbGVuZGFyQ29uZmlnLFxyXG4gIENhbGVuZGFyU2VsZWN0RXZlbnQsXHJcbiAgQ2FsZW5kYXJWaWV3Q2hhbmdlRXZlbnQsXHJcbiAgREVGQVVMVF9DQUxFTkRBUl9MT0NBTEUsXHJcbiAgREVGQVVMVF9DQUxFTkRBUl9DT0xPUlMsXHJcbiAgREVGQVVMVF9DQUxFTkRBUl9DT05GSUdcclxufSBmcm9tICcuLi8uLi90eXBlcy9jYWxlbmRhci50eXBlcyc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ3NhLWNhbGVuZGFyJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vc2EtY2FsZW5kYXIuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL3NhLWNhbGVuZGFyLmNvbXBvbmVudC5zY3NzJ10sXHJcbiAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uU2hhZG93RG9tLFxyXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxyXG4gIGhvc3Q6IHtcclxuICAgICdjbGFzcyc6ICdzYW5uYS11aS1jb21wb25lbnQgc2FubmEtdWktY2FsZW5kYXInLFxyXG4gICAgJ1tjbGFzcy5zYW5uYS11aS1jYWxlbmRhci1zaXplLXNtXSc6ICdzaXplID09PSBcInNtXCInLFxyXG4gICAgJ1tjbGFzcy5zYW5uYS11aS1jYWxlbmRhci1zaXplLW1kXSc6ICdzaXplID09PSBcIm1kXCInLFxyXG4gICAgJ1tjbGFzcy5zYW5uYS11aS1jYWxlbmRhci1zaXplLWxnXSc6ICdzaXplID09PSBcImxnXCInLFxyXG4gICAgJ1tjbGFzcy5zYW5uYS11aS1jYWxlbmRhci1kaXNhYmxlZF0nOiAnZGlzYWJsZWQnLFxyXG4gICAgJ1tjbGFzcy5zYW5uYS11aS1jYWxlbmRhci1yZWFkb25seV0nOiAncmVhZG9ubHknLFxyXG4gICAgJ1tjbGFzcy5zYW5uYS11aS1jYWxlbmRhci1pbmxpbmVdJzogJ2lubGluZSdcclxuICB9LFxyXG4gIHByb3ZpZGVyczogW1xyXG4gICAge1xyXG4gICAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcclxuICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gU2FDYWxlbmRhckNvbXBvbmVudCksXHJcbiAgICAgIG11bHRpOiB0cnVlXHJcbiAgICB9XHJcbiAgXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgU2FDYWxlbmRhckNvbXBvbmVudCBpbXBsZW1lbnRzIENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBPbkluaXQsIE9uQ2hhbmdlcyB7XHJcbiAgLy8gQmFzaWMgaW5wdXRzXHJcbiAgcHJpdmF0ZSBfdmFsdWU6IERhdGUgfCBEYXRlW10gfCBudWxsID0gbnVsbDtcclxuICBASW5wdXQoKSBzaXplOiBDYWxlbmRhclNpemUgPSAnbWQnO1xyXG4gIEBJbnB1dCgpIHN0YXR1czogQ2FsZW5kYXJTdGF0dXMgPSAnZGVmYXVsdCc7XHJcbiAgQElucHV0KCkgbGFiZWw6IHN0cmluZyA9ICcnO1xyXG4gIFxyXG4gIHByaXZhdGUgX25vTGFiZWw6IGJvb2xlYW4gPSBmYWxzZTtcclxuICBASW5wdXQoKVxyXG4gIHNldCBub0xhYmVsKHZhbHVlOiBib29sZWFuIHwgYW55KSB7XHJcbiAgICB0aGlzLl9ub0xhYmVsID0gdmFsdWUgPT09IHRydWUgfHwgdmFsdWUgPT09ICd0cnVlJztcclxuICB9XHJcbiAgZ2V0IG5vTGFiZWwoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5fbm9MYWJlbDtcclxuICB9XHJcbiAgQElucHV0KCkgcGxhY2Vob2xkZXI6IHN0cmluZyA9ICdTZWxlY2Npb25hciBmZWNoYSc7XHJcbiAgQElucHV0KCkgaGVscGVyVGV4dDogc3RyaW5nID0gJyc7XHJcbiAgQElucHV0KCkgZXJyb3JUZXh0OiBzdHJpbmcgPSAnJztcclxuICBASW5wdXQoKSByZXF1aXJlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIEBJbnB1dCgpIHJlYWRvbmx5OiBib29sZWFuID0gZmFsc2U7XHJcbiAgQElucHV0KCkgZGlzYWJsZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICBASW5wdXQoKSBtaW5EYXRlOiBEYXRlIHwgc3RyaW5nIHwgbnVtYmVyIHwgbnVsbCA9IG51bGw7XHJcbiAgQElucHV0KCkgbWF4RGF0ZTogRGF0ZSB8IHN0cmluZyB8IG51bWJlciB8IG51bGwgPSBudWxsO1xyXG4gIEBJbnB1dCgpIGlkOiBzdHJpbmcgPSAnJztcclxuICBASW5wdXQoKSBuYW1lOiBzdHJpbmcgPSAnJztcclxuXHJcbiAgLy8gQ2FsZW5kYXIgc3BlY2lmaWMgaW5wdXRzXHJcbiAgQElucHV0KCkgbG9jYWxlOiBDYWxlbmRhckxvY2FsZSA9IERFRkFVTFRfQ0FMRU5EQVJfTE9DQUxFO1xyXG4gIEBJbnB1dCgpIGNvbG9yczogQ2FsZW5kYXJDb2xvcnMgPSBERUZBVUxUX0NBTEVOREFSX0NPTE9SUztcclxuICBASW5wdXQoKSBjb25maWc6IENhbGVuZGFyQ29uZmlnID0gREVGQVVMVF9DQUxFTkRBUl9DT05GSUc7XHJcbiAgQElucHV0KCkgdmFsaWRhdGlvbjogQ2FsZW5kYXJWYWxpZGF0aW9uID0ge307XHJcbiAgQElucHV0KCkgZXZlbnRzOiBDYWxlbmRhckV2ZW50W10gPSBbXTtcclxuICBASW5wdXQoKSBpbmxpbmU6IGJvb2xlYW4gPSBmYWxzZTtcclxuICBASW5wdXQoKSBzaG93SW5wdXQ6IGJvb2xlYW4gPSB0cnVlO1xyXG5cclxuICAvLyBPdXRwdXRzXHJcbiAgQE91dHB1dCgpIGRhdGVTZWxlY3QgPSBuZXcgRXZlbnRFbWl0dGVyPENhbGVuZGFyU2VsZWN0RXZlbnQ+KCk7XHJcbiAgQE91dHB1dCgpIHZpZXdDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPENhbGVuZGFyVmlld0NoYW5nZUV2ZW50PigpO1xyXG4gIEBPdXRwdXQoKSBtb250aENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8RGF0ZT4oKTtcclxuICBAT3V0cHV0KCkgeWVhckNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyPigpO1xyXG4gIEBPdXRwdXQoKSBmb2N1cyA9IG5ldyBFdmVudEVtaXR0ZXI8Rm9jdXNFdmVudD4oKTtcclxuICBAT3V0cHV0KCkgYmx1ciA9IG5ldyBFdmVudEVtaXR0ZXI8Rm9jdXNFdmVudD4oKTtcclxuXHJcbiAgLy8gSW50ZXJuYWwgc3RhdGVcclxuICBjdXJyZW50VmlldzogQ2FsZW5kYXJWaWV3TW9kZSA9ICdkYXknO1xyXG4gIGN1cnJlbnREYXRlOiBEYXRlID0gbmV3IERhdGUoKTtcclxuICBzZWxlY3RlZERhdGVzOiBEYXRlW10gPSBbXTtcclxuICBjYWxlbmRhckRheXM6IENhbGVuZGFyRGF5W11bXSA9IFtdO1xyXG4gIGNhbGVuZGFyTW9udGhzOiBDYWxlbmRhck1vbnRoW10gPSBbXTtcclxuICBjYWxlbmRhclllYXJzOiBDYWxlbmRhclllYXJbXSA9IFtdO1xyXG4gIGlzT3BlbjogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIGlzRm9jdXNlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICBwcml2YXRlIF9nZW5lcmF0ZWRJZDogc3RyaW5nO1xyXG4gIHByaXZhdGUgb25DaGFuZ2UgPSAoXzogYW55KSA9PiB7fTtcclxuICBwcml2YXRlIG9uVG91Y2hlZCA9ICgpID0+IHt9O1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgY2RyOiBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgIHByaXZhdGUgZWxlbWVudFJlZjogRWxlbWVudFJlZlxyXG4gICkge1xyXG4gICAgdGhpcy5fZ2VuZXJhdGVkSWQgPSBgc2EtY2FsZW5kYXItJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YDtcclxuICB9XHJcblxyXG5cclxuICBASG9zdExpc3RlbmVyKCdkb2N1bWVudDpjbGljaycsIFsnJGV2ZW50J10pXHJcbiAgb25Eb2N1bWVudENsaWNrT3V0c2lkZShldmVudDogRXZlbnQpIHtcclxuICAgIC8vIFNPTFVDSU9OIFRFTVBPUkFMOiBVc2FyIGNsaWNrIGVuIGx1Z2FyIGRlIG1vdXNlZG93biBjb24gZGVsYXlcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICBpZiAoIXRoaXMuaW5saW5lICYmIHRoaXMuaXNPcGVuKSB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIEVsZW1lbnQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gU29sbyBjZXJyYXIgc2kgZWwgY2xpYyBmdWUgZW4gU0EtQ0FMRU5EQVIgKMOhcmVhIHZhY8OtYSlcclxuICAgICAgICBpZiAodGFyZ2V0LnRhZ05hbWUgPT09ICdTQS1DQUxFTkRBUicpIHtcclxuICAgICAgICAgIC8vIFZlcmlmaWNhciBxdWUgbm8gc2VhIHVuIGNsaWMgZW4gZWxlbWVudG9zIGludGVybm9zIHVzYW5kbyBjb29yZGVuYWRhc1xyXG4gICAgICAgICAgY29uc3QgcmVjdCA9IHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgY29uc3QgY2xpY2tYID0gKGV2ZW50IGFzIE1vdXNlRXZlbnQpLmNsaWVudFg7XHJcbiAgICAgICAgICBjb25zdCBjbGlja1kgPSAoZXZlbnQgYXMgTW91c2VFdmVudCkuY2xpZW50WTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gU2kgZWwgY2xpYyBlc3TDoSBlbiBsb3MgYm9yZGVzIGRlbCBjb21wb25lbnRlIChubyBlbiBjb250ZW5pZG8pLCBjZXJyYXJcclxuICAgICAgICAgIGNvbnN0IGlzTmVhckVkZ2UgPSBcclxuICAgICAgICAgICAgY2xpY2tYIDwgcmVjdC5sZWZ0ICsgMjAgfHwgY2xpY2tYID4gcmVjdC5yaWdodCAtIDIwIHx8XHJcbiAgICAgICAgICAgIGNsaWNrWSA8IHJlY3QudG9wICsgMjAgfHwgY2xpY2tZID4gcmVjdC5ib3R0b20gLSAyMDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICBpZiAoaXNOZWFyRWRnZSkge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlQ2FsZW5kYXIoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0sIDEwMCk7IC8vIERlbGF5IHBhcmEgcGVybWl0aXIgcXVlIG90cm9zIGNsaWNzIHNlIHByb2Nlc2VuIHByaW1lcm9cclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgdGhpcy5pbml0aWFsaXplQ2FsZW5kYXIoKTtcclxuICAgIGlmICh0aGlzLmlubGluZSkge1xyXG4gICAgICB0aGlzLmlzT3BlbiA9IHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XHJcbiAgICBpZiAoY2hhbmdlc1snbG9jYWxlJ10gfHwgY2hhbmdlc1snY29uZmlnJ10pIHtcclxuICAgICAgdGhpcy5pbml0aWFsaXplQ2FsZW5kYXIoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuXHJcbiAgZ2V0IGNhbGVuZGFySWQoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLmlkIHx8IHRoaXMuX2dlbmVyYXRlZElkO1xyXG4gIH1cclxuXHJcbiAgZ2V0IG1lcmdlZENvbG9ycygpOiBDYWxlbmRhckNvbG9ycyB7XHJcbiAgICByZXR1cm4geyAuLi5ERUZBVUxUX0NBTEVOREFSX0NPTE9SUywgLi4udGhpcy5jb2xvcnMgfTtcclxuICB9XHJcblxyXG4gIGdldCBtZXJnZWRDb25maWcoKTogQ2FsZW5kYXJDb25maWcge1xyXG4gICAgcmV0dXJuIHsgLi4uREVGQVVMVF9DQUxFTkRBUl9DT05GSUcsIC4uLnRoaXMuY29uZmlnIH07XHJcbiAgfVxyXG5cclxuICBnZXQgbWVyZ2VkTG9jYWxlKCk6IENhbGVuZGFyTG9jYWxlIHtcclxuICAgIHJldHVybiB7IC4uLkRFRkFVTFRfQ0FMRU5EQVJfTE9DQUxFLCAuLi50aGlzLmxvY2FsZSB9O1xyXG4gIH1cclxuXHJcbiAgZ2V0IGlucHV0VmFsdWUoKTogc3RyaW5nIHtcclxuICAgIGlmICghdGhpcy5fdmFsdWUpIHJldHVybiAnJztcclxuICAgIFxyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5fdmFsdWUpKSB7XHJcbiAgICAgIGlmICh0aGlzLm1lcmdlZENvbmZpZy5hbGxvd1JhbmdlU2VsZWN0ICYmIHRoaXMuX3ZhbHVlLmxlbmd0aCA9PT0gMikge1xyXG4gICAgICAgIHJldHVybiBgJHt0aGlzLmZvcm1hdERhdGUodGhpcy5fdmFsdWVbMF0pfSAtICR7dGhpcy5mb3JtYXREYXRlKHRoaXMuX3ZhbHVlWzFdKX1gO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0aGlzLl92YWx1ZS5tYXAoZGF0ZSA9PiB0aGlzLmZvcm1hdERhdGUoZGF0ZSkpLmpvaW4oJywgJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiB0aGlzLmZvcm1hdERhdGUodGhpcy5fdmFsdWUpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGlucHV0Q2xhc3NlcygpOiBzdHJpbmcge1xyXG4gICAgY29uc3Qgc2l6ZU1hcCA9IHtcclxuICAgICAgJ3NtJzogJ2Zvcm0tY29udHJvbC1zbScsXHJcbiAgICAgICdtZCc6ICcnLFxyXG4gICAgICAnbGcnOiAnZm9ybS1jb250cm9sLWxnJ1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBiYXNlQ2xhc3NlcyA9IFsnZm9ybS1jb250cm9sJywgJ2NhbGVuZGFyLWlucHV0J107XHJcbiAgICBcclxuICAgIGlmIChzaXplTWFwW3RoaXMuc2l6ZV0gJiYgc2l6ZU1hcFt0aGlzLnNpemVdICE9PSAnJykge1xyXG4gICAgICBiYXNlQ2xhc3Nlcy5wdXNoKHNpemVNYXBbdGhpcy5zaXplXSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gJ2Vycm9yJyB8fCB0aGlzLmVycm9yVGV4dCkge1xyXG4gICAgICBiYXNlQ2xhc3Nlcy5wdXNoKCdpcy1pbnZhbGlkJyk7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdHVzID09PSAnc3VjY2VzcycpIHtcclxuICAgICAgYmFzZUNsYXNzZXMucHVzaCgnaXMtdmFsaWQnKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gYmFzZUNsYXNzZXMuam9pbignICcpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGxhYmVsQ2xhc3NlcygpOiBzdHJpbmcge1xyXG4gICAgY29uc3Qgc2l6ZU1hcCA9IHtcclxuICAgICAgJ3NtJzogJ2Zvcm0tbGFiZWwgbGFiZWwtc20nLFxyXG4gICAgICAnbWQnOiAnZm9ybS1sYWJlbCBsYWJlbC1tZCcsXHJcbiAgICAgICdsZyc6ICdmb3JtLWxhYmVsIGxhYmVsLWxnJ1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgY29uc3QgYmFzZUNsYXNzZXMgPSBzaXplTWFwW3RoaXMuc2l6ZV0gfHwgJ2Zvcm0tbGFiZWwgbGFiZWwtbWQnO1xyXG4gICAgXHJcbiAgICAvLyBTaSBlcyBub0xhYmVsLCBhZ3JlZ2FyIGNsYXNlIHBhcmEgbGFiZWwgZmFudGFzbWFcclxuICAgIGlmICh0aGlzLm5vTGFiZWwpIHtcclxuICAgICAgcmV0dXJuIGAke2Jhc2VDbGFzc2VzfSBnaG9zdC1sYWJlbGA7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBiYXNlQ2xhc3NlcztcclxuICB9XHJcblxyXG4gIGdldCBzaG91bGRTaG93TGFiZWwoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gISF0aGlzLmxhYmVsIHx8IHRoaXMubm9MYWJlbDtcclxuICB9XHJcblxyXG4gIC8vIENvbnRyb2xWYWx1ZUFjY2Vzc29yIGltcGxlbWVudGF0aW9uXHJcbiAgd3JpdGVWYWx1ZSh2YWx1ZTogYW55KTogdm9pZCB7XHJcbiAgICB0aGlzLl92YWx1ZSA9IHZhbHVlO1xyXG4gICAgdGhpcy51cGRhdGVTZWxlY3RlZERhdGVzKCk7XHJcbiAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcclxuICB9XHJcblxyXG4gIHJlZ2lzdGVyT25DaGFuZ2UoZm46IGFueSk6IHZvaWQge1xyXG4gICAgdGhpcy5vbkNoYW5nZSA9IGZuO1xyXG4gIH1cclxuXHJcbiAgcmVnaXN0ZXJPblRvdWNoZWQoZm46IGFueSk6IHZvaWQge1xyXG4gICAgdGhpcy5vblRvdWNoZWQgPSBmbjtcclxuICB9XHJcblxyXG4gIHNldERpc2FibGVkU3RhdGUoaXNEaXNhYmxlZDogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgdGhpcy5kaXNhYmxlZCA9IGlzRGlzYWJsZWQ7XHJcbiAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcclxuICB9XHJcblxyXG4gIC8vIENhbGVuZGFyIGluaXRpYWxpemF0aW9uXHJcbiAgcHJpdmF0ZSBpbml0aWFsaXplQ2FsZW5kYXIoKSB7XHJcbiAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkRGF0ZXMoKTtcclxuICAgIHRoaXMuZ2VuZXJhdGVDYWxlbmRhckRheXMoKTtcclxuICAgIHRoaXMuZ2VuZXJhdGVDYWxlbmRhck1vbnRocygpO1xyXG4gICAgdGhpcy5nZW5lcmF0ZUNhbGVuZGFyWWVhcnMoKTtcclxuICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB1cGRhdGVTZWxlY3RlZERhdGVzKCkge1xyXG4gICAgdGhpcy5zZWxlY3RlZERhdGVzID0gW107XHJcbiAgICBpZiAodGhpcy5fdmFsdWUpIHtcclxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5fdmFsdWUpKSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVzID0gWy4uLnRoaXMuX3ZhbHVlXTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZXMgPSBbdGhpcy5fdmFsdWVdO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBDYWxlbmRhciBnZW5lcmF0aW9uIG1ldGhvZHNcclxuICBwcml2YXRlIGdlbmVyYXRlQ2FsZW5kYXJEYXlzKCkge1xyXG4gICAgY29uc3QgeWVhciA9IHRoaXMuY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgIGNvbnN0IG1vbnRoID0gdGhpcy5jdXJyZW50RGF0ZS5nZXRNb250aCgpO1xyXG4gICAgXHJcbiAgICBhbGVydChg8J+UpSBHRU5FUkFURSBDQUxFTkRBUjogY3VycmVudERhdGU9JHt0aGlzLmN1cnJlbnREYXRlfSwgeWVhcj0ke3llYXJ9LCBtb250aD0ke21vbnRofSAoJHttb250aCA9PT0gNiA/ICdKVUxJTycgOiBtb250aCA9PT0gOCA/ICdTRVBUSUVNQlJFJyA6ICdNRVMgJyArIG1vbnRofSlgKTtcclxuICAgIFxyXG4gICAgY29uc3QgZmlyc3REYXkgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgMSk7XHJcbiAgICBjb25zdCBsYXN0RGF5ID0gbmV3IERhdGUoeWVhciwgbW9udGggKyAxLCAwKTtcclxuICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKGZpcnN0RGF5KTtcclxuICAgIGNvbnN0IGVuZERhdGUgPSBuZXcgRGF0ZShsYXN0RGF5KTtcclxuXHJcbiAgICBhbGVydChg8J+UpSBHRU5FUkFURSBDQUxFTkRBUjogZmlyc3REYXk9JHtmaXJzdERheX0sIGxhc3REYXk9JHtsYXN0RGF5fWApO1xyXG5cclxuICAgIC8vIEFkanVzdCBzdGFydCBkYXRlIHRvIHNob3cgcHJldmlvdXMgbW9udGggZGF5cyBpZiBuZWVkZWRcclxuICAgIGNvbnN0IGZpcnN0RGF5T2ZXZWVrID0gdGhpcy5tZXJnZWRMb2NhbGUuZmlyc3REYXlPZldlZWs7XHJcbiAgICBjb25zdCBzdGFydERheU9mV2VlayA9IGZpcnN0RGF5LmdldERheSgpO1xyXG4gICAgY29uc3QgZGlmZiA9IChzdGFydERheU9mV2VlayAtIGZpcnN0RGF5T2ZXZWVrICsgNykgJSA3O1xyXG4gICAgc3RhcnREYXRlLnNldERhdGUoc3RhcnREYXRlLmdldERhdGUoKSAtIGRpZmYpO1xyXG5cclxuICAgIC8vIEFkanVzdCBlbmQgZGF0ZSB0byBzaG93IG5leHQgbW9udGggZGF5c1xyXG4gICAgY29uc3QgZW5kRGF5T2ZXZWVrID0gZW5kRGF0ZS5nZXREYXkoKTtcclxuICAgIGNvbnN0IGVuZERpZmYgPSAoNiAtIGVuZERheU9mV2VlayArIGZpcnN0RGF5T2ZXZWVrKSAlIDc7XHJcbiAgICBlbmREYXRlLnNldERhdGUoZW5kRGF0ZS5nZXREYXRlKCkgKyBlbmREaWZmKTtcclxuXHJcbiAgICB0aGlzLmNhbGVuZGFyRGF5cyA9IFtdO1xyXG4gICAgY29uc3Qgd2Vla3M6IENhbGVuZGFyRGF5W11bXSA9IFtdO1xyXG4gICAgbGV0IHdlZWs6IENhbGVuZGFyRGF5W10gPSBbXTtcclxuXHJcbiAgICBjb25zdCBjdXJyZW50RGF0ZUl0ZXIgPSBuZXcgRGF0ZShzdGFydERhdGUpO1xyXG4gICAgd2hpbGUgKGN1cnJlbnREYXRlSXRlciA8PSBlbmREYXRlKSB7XHJcbiAgICAgIGNvbnN0IGNhbGVuZGFyRGF5ID0gdGhpcy5jcmVhdGVDYWxlbmRhckRheShjdXJyZW50RGF0ZUl0ZXIsIG1vbnRoKTtcclxuICAgICAgd2Vlay5wdXNoKGNhbGVuZGFyRGF5KTtcclxuXHJcbiAgICAgIGlmICh3ZWVrLmxlbmd0aCA9PT0gNykge1xyXG4gICAgICAgIHdlZWtzLnB1c2goWy4uLndlZWtdKTtcclxuICAgICAgICB3ZWVrID0gW107XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGN1cnJlbnREYXRlSXRlci5zZXREYXRlKGN1cnJlbnREYXRlSXRlci5nZXREYXRlKCkgKyAxKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmNhbGVuZGFyRGF5cyA9IHdlZWtzO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjcmVhdGVDYWxlbmRhckRheShkYXRlOiBEYXRlLCBjdXJyZW50TW9udGg6IG51bWJlcik6IENhbGVuZGFyRGF5IHtcclxuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcclxuICAgIGNvbnN0IGlzVG9kYXkgPSB0aGlzLmlzU2FtZURheShkYXRlLCB0b2RheSk7XHJcbiAgICBjb25zdCBpc1NlbGVjdGVkID0gdGhpcy5zZWxlY3RlZERhdGVzLnNvbWUoc2VsZWN0ZWREYXRlID0+IHRoaXMuaXNTYW1lRGF5KGRhdGUsIHNlbGVjdGVkRGF0ZSkpO1xyXG4gICAgY29uc3QgaXNEaXNhYmxlZCA9IHRoaXMuaXNEYXRlRGlzYWJsZWQoZGF0ZSk7XHJcbiAgICBjb25zdCBpc0luQ3VycmVudE1vbnRoID0gZGF0ZS5nZXRNb250aCgpID09PSBjdXJyZW50TW9udGg7XHJcbiAgICBjb25zdCBpc1dlZWtlbmQgPSBkYXRlLmdldERheSgpID09PSAwIHx8IGRhdGUuZ2V0RGF5KCkgPT09IDY7XHJcbiAgICBjb25zdCBoYXNFdmVudCA9IHRoaXMuZXZlbnRzLnNvbWUoZXZlbnQgPT4gdGhpcy5pc1NhbWVEYXkoZXZlbnQuZGF0ZSwgZGF0ZSkpO1xyXG5cclxuICAgIGNvbnN0IGNhbGVuZGFyRGF5ID0ge1xyXG4gICAgICBkYXRlOiBuZXcgRGF0ZShkYXRlKSxcclxuICAgICAgZGF5OiBkYXRlLmdldERhdGUoKSxcclxuICAgICAgbW9udGg6IGRhdGUuZ2V0TW9udGgoKSxcclxuICAgICAgeWVhcjogZGF0ZS5nZXRGdWxsWWVhcigpLFxyXG4gICAgICBpc1RvZGF5LFxyXG4gICAgICBpc1NlbGVjdGVkLFxyXG4gICAgICBpc0Rpc2FibGVkLFxyXG4gICAgICBpc0luQ3VycmVudE1vbnRoLFxyXG4gICAgICBpc1dlZWtlbmQsXHJcbiAgICAgIGhhc0V2ZW50XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIERlYnVnIHNvbG8gcGFyYSBlbCBkw61hIDE2XHJcbiAgICBpZiAoZGF0ZS5nZXREYXRlKCkgPT09IDE2KSB7XHJcbiAgICAgIGFsZXJ0KGDwn5OFIENSRUFURSBEQVkgMTY6IGRhdGU9JHtkYXRlfSwgY3VycmVudE1vbnRoPSR7Y3VycmVudE1vbnRofSwgY2FsZW5kYXJEYXkuZGF0ZT0ke2NhbGVuZGFyRGF5LmRhdGV9LCBpc0luQ3VycmVudE1vbnRoPSR7aXNJbkN1cnJlbnRNb250aH1gKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY2FsZW5kYXJEYXk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdlbmVyYXRlQ2FsZW5kYXJNb250aHMoKSB7XHJcbiAgICBjb25zdCBjdXJyZW50WWVhciA9IHRoaXMuY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgIGFsZXJ0KGDwn5OFIEdFTkVSQVRFIE1PTlRIUzogY3VycmVudERhdGU9JHt0aGlzLmN1cnJlbnREYXRlfSwgY3VycmVudFllYXI9JHtjdXJyZW50WWVhcn1gKTtcclxuICAgIFxyXG4gICAgdGhpcy5jYWxlbmRhck1vbnRocyA9IHRoaXMubWVyZ2VkTG9jYWxlLm1vbnRoc1Nob3J0Lm1hcCgobW9udGgsIGluZGV4KSA9PiAoe1xyXG4gICAgICBuYW1lOiBtb250aCxcclxuICAgICAgbnVtYmVyOiBpbmRleCxcclxuICAgICAgeWVhcjogY3VycmVudFllYXIsXHJcbiAgICAgIGlzU2VsZWN0ZWQ6IHRoaXMuc2VsZWN0ZWREYXRlcy5zb21lKGRhdGUgPT4gXHJcbiAgICAgICAgZGF0ZS5nZXRGdWxsWWVhcigpID09PSBjdXJyZW50WWVhciAmJiBkYXRlLmdldE1vbnRoKCkgPT09IGluZGV4XHJcbiAgICAgICksXHJcbiAgICAgIGlzRGlzYWJsZWQ6IHRoaXMuaXNNb250aERpc2FibGVkKGN1cnJlbnRZZWFyLCBpbmRleCksXHJcbiAgICAgIGlzQ3VycmVudDogbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpID09PSBjdXJyZW50WWVhciAmJiBuZXcgRGF0ZSgpLmdldE1vbnRoKCkgPT09IGluZGV4XHJcbiAgICB9KSk7XHJcbiAgICBcclxuICAgIC8vIERlYnVnIHBhcmEganVsaW8gKG1lcyA2KVxyXG4gICAgY29uc3QganVsaW9Nb250aCA9IHRoaXMuY2FsZW5kYXJNb250aHNbNl07XHJcbiAgICBhbGVydChg8J+ThSBKVUxJTyBHRU5FUkFETzogbmFtZT0ke2p1bGlvTW9udGgubmFtZX0sIG51bWJlcj0ke2p1bGlvTW9udGgubnVtYmVyfSwgeWVhcj0ke2p1bGlvTW9udGgueWVhcn1gKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2VuZXJhdGVDYWxlbmRhclllYXJzKCkge1xyXG4gICAgY29uc3QgY3VycmVudFllYXIgPSB0aGlzLmN1cnJlbnREYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICBjb25zdCBzdGFydFllYXIgPSBjdXJyZW50WWVhciAtIDEwO1xyXG4gICAgY29uc3QgZW5kWWVhciA9IGN1cnJlbnRZZWFyICsgMTA7XHJcblxyXG4gICAgdGhpcy5jYWxlbmRhclllYXJzID0gW107XHJcbiAgICBmb3IgKGxldCB5ZWFyID0gc3RhcnRZZWFyOyB5ZWFyIDw9IGVuZFllYXI7IHllYXIrKykge1xyXG4gICAgICB0aGlzLmNhbGVuZGFyWWVhcnMucHVzaCh7XHJcbiAgICAgICAgeWVhcixcclxuICAgICAgICBpc1NlbGVjdGVkOiB0aGlzLnNlbGVjdGVkRGF0ZXMuc29tZShkYXRlID0+IGRhdGUuZ2V0RnVsbFllYXIoKSA9PT0geWVhciksXHJcbiAgICAgICAgaXNEaXNhYmxlZDogdGhpcy5pc1llYXJEaXNhYmxlZCh5ZWFyKSxcclxuICAgICAgICBpc0N1cnJlbnQ6IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSA9PT0geWVhclxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIERhdGUgdmFsaWRhdGlvbiBtZXRob2RzXHJcbiAgcHJpdmF0ZSBpc0RhdGVEaXNhYmxlZChkYXRlOiBEYXRlKTogYm9vbGVhbiB7XHJcbiAgICAvLyBDaGVjayBjb21wb25lbnQtbGV2ZWwgbWluL21heCBkYXRlc1xyXG4gICAgY29uc3QgbWluRGF0ZSA9IHRoaXMuZ2V0RGF0ZUZyb21JbnB1dCh0aGlzLm1pbkRhdGUpO1xyXG4gICAgY29uc3QgbWF4RGF0ZSA9IHRoaXMuZ2V0RGF0ZUZyb21JbnB1dCh0aGlzLm1heERhdGUpO1xyXG4gICAgXHJcbiAgICBpZiAobWluRGF0ZSAmJiBkYXRlIDwgbWluRGF0ZSkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAobWF4RGF0ZSAmJiBkYXRlID4gbWF4RGF0ZSkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDaGVjayB2YWxpZGF0aW9uLWxldmVsIG1pbi9tYXggZGF0ZXMgKGxlZ2FjeSBzdXBwb3J0KVxyXG4gICAgaWYgKHRoaXMudmFsaWRhdGlvbi5taW5EYXRlICYmIGRhdGUgPCB0aGlzLnZhbGlkYXRpb24ubWluRGF0ZSkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy52YWxpZGF0aW9uLm1heERhdGUgJiYgZGF0ZSA+IHRoaXMudmFsaWRhdGlvbi5tYXhEYXRlKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLnZhbGlkYXRpb24uZGlzYWJsZWREYXRlcz8uc29tZShkaXNhYmxlZERhdGUgPT4gdGhpcy5pc1NhbWVEYXkoZGF0ZSwgZGlzYWJsZWREYXRlKSkpIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMudmFsaWRhdGlvbi5kaXNhYmxlZERheXM/LmluY2x1ZGVzKGRhdGUuZ2V0RGF5KCkpKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLnZhbGlkYXRpb24uZW5hYmxlZERhdGVzICYmICF0aGlzLnZhbGlkYXRpb24uZW5hYmxlZERhdGVzLnNvbWUoZW5hYmxlZERhdGUgPT4gdGhpcy5pc1NhbWVEYXkoZGF0ZSwgZW5hYmxlZERhdGUpKSkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy52YWxpZGF0aW9uLmN1c3RvbVZhbGlkYXRvciAmJiAhdGhpcy52YWxpZGF0aW9uLmN1c3RvbVZhbGlkYXRvcihkYXRlKSkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGlzTW9udGhEaXNhYmxlZCh5ZWFyOiBudW1iZXIsIG1vbnRoOiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgIGNvbnN0IGZpcnN0RGF5T2ZNb250aCA9IG5ldyBEYXRlKHllYXIsIG1vbnRoLCAxKTtcclxuICAgIGNvbnN0IGxhc3REYXlPZk1vbnRoID0gbmV3IERhdGUoeWVhciwgbW9udGggKyAxLCAwKTtcclxuXHJcbiAgICAvLyBDaGVjayBpZiBhbGwgZGF5cyBpbiB0aGUgbW9udGggYXJlIGRpc2FibGVkXHJcbiAgICBmb3IgKGxldCBkYXkgPSAxOyBkYXkgPD0gbGFzdERheU9mTW9udGguZ2V0RGF0ZSgpOyBkYXkrKykge1xyXG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoeWVhciwgbW9udGgsIGRheSk7XHJcbiAgICAgIGlmICghdGhpcy5pc0RhdGVEaXNhYmxlZChkYXRlKSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBpc1llYXJEaXNhYmxlZCh5ZWFyOiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgIC8vIENoZWNrIGlmIGFsbCBtb250aHMgaW4gdGhlIHllYXIgYXJlIGRpc2FibGVkXHJcbiAgICBmb3IgKGxldCBtb250aCA9IDA7IG1vbnRoIDwgMTI7IG1vbnRoKyspIHtcclxuICAgICAgaWYgKCF0aGlzLmlzTW9udGhEaXNhYmxlZCh5ZWFyLCBtb250aCkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIC8vIEV2ZW50IGhhbmRsZXJzXHJcbiAgb25JbnB1dENsaWNrKGV2ZW50PzogRXZlbnQpIHtcclxuICAgIGlmICghdGhpcy5kaXNhYmxlZCAmJiAhdGhpcy5yZWFkb25seSAmJiAhdGhpcy5pbmxpbmUpIHtcclxuICAgICAgLy8gUHJldmVuaXIgcXVlIGVsIGV2ZW50byBzZSBwcm9wYWd1ZSBwYXJhIGV2aXRhciBxdWUgc2UgY2llcnJlIGlubWVkaWF0YW1lbnRlXHJcbiAgICAgIGlmIChldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIFVzYXIgc2V0VGltZW91dCBwYXJhIGV2aXRhciBjb25mbGljdG9zIGNvbiBlbCBkb2N1bWVudDptb3VzZWRvd25cclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy50b2dnbGVDYWxlbmRhcigpO1xyXG4gICAgICB9LCAwKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uSW5wdXRGb2N1cyhldmVudDogRm9jdXNFdmVudCkge1xyXG4gICAgdGhpcy5pc0ZvY3VzZWQgPSB0cnVlO1xyXG4gICAgdGhpcy5mb2N1cy5lbWl0KGV2ZW50KTtcclxuICB9XHJcblxyXG4gIG9uSW5wdXRCbHVyKGV2ZW50OiBGb2N1c0V2ZW50KSB7XHJcbiAgICB0aGlzLmlzRm9jdXNlZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5vblRvdWNoZWQoKTtcclxuICAgIHRoaXMuYmx1ci5lbWl0KGV2ZW50KTtcclxuICB9XHJcblxyXG4gIG9uRGF5Q2xpY2soZGF5OiBDYWxlbmRhckRheSwgZXZlbnQ/OiBFdmVudCkge1xyXG4gICAgLy8gTUVHQSBERUJVRyAtIFNpIG5vIHZlcyBlc3RvLCBoYXkgY8OzZGlnbyBkdXBsaWNhZG9cclxuICAgIGFsZXJ0KGBNRUdBIERFQlVHOiBTZWxlY2Npb25hbmRvIGTDrWEgJHtkYXkuZGF5fSwgZmVjaGE6ICR7ZGF5LmRhdGV9YCk7XHJcbiAgICBcclxuICAgIGlmIChkYXkuaXNEaXNhYmxlZCB8fCB0aGlzLmRpc2FibGVkIHx8IHRoaXMucmVhZG9ubHkpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChldmVudCkge1xyXG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBzZWxlY3RlZERhdGUgPSBuZXcgRGF0ZShkYXkuZGF0ZSk7XHJcbiAgICBhbGVydChgTUVHQSBERUJVRzogRmVjaGEgZmluYWw6ICR7c2VsZWN0ZWREYXRlfWApO1xyXG4gICAgdGhpcy5zZWxlY3REYXRlKHNlbGVjdGVkRGF0ZSk7XHJcbiAgfVxyXG5cclxuICBvbk1vbnRoQ2xpY2sobW9udGg6IENhbGVuZGFyTW9udGgsIGV2ZW50PzogRXZlbnQpIHtcclxuICAgIGNvbnNvbGUubG9nKCfwn5SlICoqKiBOVUVWQSBWRVJTSU9OICoqKiBNb250aENsaWNrIC0gTW9udGg6JywgbW9udGgubnVtYmVyLCAnWWVhcjonLCBtb250aC55ZWFyKTtcclxuICAgIFxyXG4gICAgaWYgKG1vbnRoLmlzRGlzYWJsZWQpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFByZXZlbmlyIHF1ZSBlbCBldmVudG8gc2UgcHJvcGFndWUgcGFyYSBldml0YXIgcXVlIHNlIGNpZXJyZSBlbCBjYWxlbmRhcmlvXHJcbiAgICBpZiAoZXZlbnQpIHtcclxuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coJ/CflKUgTW9udGhDbGljayAtIEN1cnJlbnREYXRlIGFudGVzOicsIHRoaXMuY3VycmVudERhdGUpO1xyXG4gICAgdGhpcy5jdXJyZW50RGF0ZSA9IG5ldyBEYXRlKG1vbnRoLnllYXIsIG1vbnRoLm51bWJlciwgMSk7XHJcbiAgICBjb25zb2xlLmxvZygn8J+UpSBNb250aENsaWNrIC0gQ3VycmVudERhdGUgZGVzcHXDqXM6JywgdGhpcy5jdXJyZW50RGF0ZSk7XHJcbiAgICB0aGlzLnNldFZpZXcoJ2RheScpO1xyXG4gICAgdGhpcy5tb250aENoYW5nZS5lbWl0KG5ldyBEYXRlKHRoaXMuY3VycmVudERhdGUpKTtcclxuICB9XHJcblxyXG4gIG9uWWVhckNsaWNrKHllYXI6IENhbGVuZGFyWWVhciwgZXZlbnQ/OiBFdmVudCkge1xyXG4gICAgY29uc29sZS5sb2coJ/CfjJ8gKioqIE5VRVZBIFZFUlNJT04gKioqIFllYXJDbGljayAtIFllYXI6JywgeWVhci55ZWFyLCAnQ3VycmVudE1vbnRoOicsIHRoaXMuY3VycmVudERhdGUuZ2V0TW9udGgoKSk7XHJcbiAgICBcclxuICAgIGlmICh5ZWFyLmlzRGlzYWJsZWQpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFByZXZlbmlyIHF1ZSBlbCBldmVudG8gc2UgcHJvcGFndWUgcGFyYSBldml0YXIgcXVlIHNlIGNpZXJyZSBlbCBjYWxlbmRhcmlvXHJcbiAgICBpZiAoZXZlbnQpIHtcclxuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coJ/CfjJ8gWWVhckNsaWNrIC0gQ3VycmVudERhdGUgYW50ZXM6JywgdGhpcy5jdXJyZW50RGF0ZSk7XHJcbiAgICB0aGlzLmN1cnJlbnREYXRlID0gbmV3IERhdGUoeWVhci55ZWFyLCB0aGlzLmN1cnJlbnREYXRlLmdldE1vbnRoKCksIDEpO1xyXG4gICAgY29uc29sZS5sb2coJ/CfjJ8gWWVhckNsaWNrIC0gQ3VycmVudERhdGUgZGVzcHXDqXM6JywgdGhpcy5jdXJyZW50RGF0ZSk7XHJcbiAgICBcclxuICAgIC8vIMKhU09MVUNJT04hIFJlZ2VuZXJhciBsb3MgbWVzZXMgZGVzcHXDqXMgZGUgY2FtYmlhciBlbCBhw7FvXHJcbiAgICB0aGlzLmdlbmVyYXRlQ2FsZW5kYXJNb250aHMoKTtcclxuICAgIFxyXG4gICAgdGhpcy5zZXRWaWV3KCdtb250aCcpO1xyXG4gICAgdGhpcy55ZWFyQ2hhbmdlLmVtaXQoeWVhci55ZWFyKTtcclxuICB9XHJcblxyXG4gIG9uVG9kYXlDbGljaygpIHtcclxuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcclxuICAgIGlmICghdGhpcy5pc0RhdGVEaXNhYmxlZCh0b2RheSkpIHtcclxuICAgICAgdGhpcy5zZWxlY3REYXRlKHRvZGF5KTtcclxuICAgICAgdGhpcy5jdXJyZW50RGF0ZSA9IG5ldyBEYXRlKHRvZGF5KTtcclxuICAgICAgdGhpcy5nZW5lcmF0ZUNhbGVuZGFyRGF5cygpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25DbGVhckNsaWNrKCkge1xyXG4gICAgdGhpcy5zZWxlY3REYXRlKG51bGwpO1xyXG4gIH1cclxuXHJcbiAgb25DbGVhclZhbHVlKGV2ZW50OiBNb3VzZUV2ZW50KSB7XHJcbiAgICAvLyBQcmV2ZW5pciBwcm9wYWdhY2nDs24gZGVsIGV2ZW50b1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgXHJcbiAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcclxuICAgICAgdGhpcy5zZWxlY3REYXRlKG51bGwpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gTmF2aWdhdGlvbiBtZXRob2RzXHJcbiAgbmF2aWdhdGVQcmV2aW91cyhldmVudD86IEV2ZW50KSB7XHJcbiAgICBpZiAoZXZlbnQpIHtcclxuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcbiAgICBzd2l0Y2ggKHRoaXMuY3VycmVudFZpZXcpIHtcclxuICAgICAgY2FzZSAnZGF5JzpcclxuICAgICAgICB0aGlzLmN1cnJlbnREYXRlID0gbmV3IERhdGUodGhpcy5jdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpLCB0aGlzLmN1cnJlbnREYXRlLmdldE1vbnRoKCkgLSAxLCAxKTtcclxuICAgICAgICB0aGlzLmdlbmVyYXRlQ2FsZW5kYXJEYXlzKCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ21vbnRoJzpcclxuICAgICAgICB0aGlzLmN1cnJlbnREYXRlID0gbmV3IERhdGUodGhpcy5jdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpIC0gMSwgdGhpcy5jdXJyZW50RGF0ZS5nZXRNb250aCgpLCAxKTtcclxuICAgICAgICB0aGlzLmdlbmVyYXRlQ2FsZW5kYXJNb250aHMoKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAneWVhcic6XHJcbiAgICAgICAgdGhpcy5jdXJyZW50RGF0ZSA9IG5ldyBEYXRlKHRoaXMuY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKSAtIDIxLCB0aGlzLmN1cnJlbnREYXRlLmdldE1vbnRoKCksIDEpO1xyXG4gICAgICAgIHRoaXMuZ2VuZXJhdGVDYWxlbmRhclllYXJzKCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcclxuICB9XHJcblxyXG4gIG5hdmlnYXRlTmV4dChldmVudD86IEV2ZW50KSB7XHJcbiAgICBpZiAoZXZlbnQpIHtcclxuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcbiAgICBzd2l0Y2ggKHRoaXMuY3VycmVudFZpZXcpIHtcclxuICAgICAgY2FzZSAnZGF5JzpcclxuICAgICAgICB0aGlzLmN1cnJlbnREYXRlID0gbmV3IERhdGUodGhpcy5jdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpLCB0aGlzLmN1cnJlbnREYXRlLmdldE1vbnRoKCkgKyAxLCAxKTtcclxuICAgICAgICB0aGlzLmdlbmVyYXRlQ2FsZW5kYXJEYXlzKCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ21vbnRoJzpcclxuICAgICAgICB0aGlzLmN1cnJlbnREYXRlID0gbmV3IERhdGUodGhpcy5jdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpICsgMSwgdGhpcy5jdXJyZW50RGF0ZS5nZXRNb250aCgpLCAxKTtcclxuICAgICAgICB0aGlzLmdlbmVyYXRlQ2FsZW5kYXJNb250aHMoKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAneWVhcic6XHJcbiAgICAgICAgdGhpcy5jdXJyZW50RGF0ZSA9IG5ldyBEYXRlKHRoaXMuY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKSArIDIxLCB0aGlzLmN1cnJlbnREYXRlLmdldE1vbnRoKCksIDEpO1xyXG4gICAgICAgIHRoaXMuZ2VuZXJhdGVDYWxlbmRhclllYXJzKCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcclxuICB9XHJcblxyXG4gIHNldFZpZXcodmlldzogQ2FsZW5kYXJWaWV3TW9kZSkge1xyXG4gICAgdGhpcy5jdXJyZW50VmlldyA9IHZpZXc7XHJcbiAgICB0aGlzLnZpZXdDaGFuZ2UuZW1pdCh7XHJcbiAgICAgIHZpZXcsXHJcbiAgICAgIGRhdGU6IG5ldyBEYXRlKHRoaXMuY3VycmVudERhdGUpLFxyXG4gICAgICBtb250aDogdGhpcy5jdXJyZW50RGF0ZS5nZXRNb250aCgpLFxyXG4gICAgICB5ZWFyOiB0aGlzLmN1cnJlbnREYXRlLmdldEZ1bGxZZWFyKClcclxuICAgIH0pO1xyXG4gICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVDYWxlbmRhcigpIHtcclxuICAgIHRoaXMuaXNPcGVuID0gIXRoaXMuaXNPcGVuO1xyXG4gICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XHJcbiAgfVxyXG5cclxuICBjbG9zZUNhbGVuZGFyKCkge1xyXG4gICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcclxuICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xyXG4gIH1cclxuXHJcbiAgLy8gSGVscGVyIG1ldGhvZHNcclxuICBwcml2YXRlIGdldERhdGVGcm9tSW5wdXQoZGF0ZUlucHV0OiBEYXRlIHwgc3RyaW5nIHwgbnVtYmVyIHwgbnVsbCk6IERhdGUgfCBudWxsIHtcclxuICAgIGlmICghZGF0ZUlucHV0KSByZXR1cm4gbnVsbDtcclxuICAgIGlmIChkYXRlSW5wdXQgaW5zdGFuY2VvZiBEYXRlKSByZXR1cm4gZGF0ZUlucHV0O1xyXG4gICAgcmV0dXJuIG5ldyBEYXRlKGRhdGVJbnB1dCk7XHJcbiAgfVxyXG5cclxuICAvLyBOYXZpZ2F0aW9uIG1ldGhvZHNcclxuICBjYW5OYXZpZ2F0ZVRvUHJldmlvdXNNb250aCgpOiBib29sZWFuIHtcclxuICAgIGNvbnN0IG1pbkRhdGUgPSB0aGlzLmdldERhdGVGcm9tSW5wdXQodGhpcy5taW5EYXRlKTtcclxuICAgIGlmICghbWluRGF0ZSkgcmV0dXJuIHRydWU7XHJcbiAgICBcclxuICAgIGNvbnN0IGN1cnJlbnRNb250aCA9IG5ldyBEYXRlKHRoaXMuY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKSwgdGhpcy5jdXJyZW50RGF0ZS5nZXRNb250aCgpLCAxKTtcclxuICAgIGNvbnN0IHByZXZpb3VzTW9udGggPSBuZXcgRGF0ZShjdXJyZW50TW9udGguZ2V0RnVsbFllYXIoKSwgY3VycmVudE1vbnRoLmdldE1vbnRoKCkgLSAxLCAxKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHByZXZpb3VzTW9udGggPj0gbmV3IERhdGUobWluRGF0ZS5nZXRGdWxsWWVhcigpLCBtaW5EYXRlLmdldE1vbnRoKCksIDEpO1xyXG4gIH1cclxuXHJcbiAgY2FuTmF2aWdhdGVUb05leHRNb250aCgpOiBib29sZWFuIHtcclxuICAgIGNvbnN0IG1heERhdGUgPSB0aGlzLmdldERhdGVGcm9tSW5wdXQodGhpcy5tYXhEYXRlKTtcclxuICAgIGlmICghbWF4RGF0ZSkgcmV0dXJuIHRydWU7XHJcbiAgICBcclxuICAgIGNvbnN0IGN1cnJlbnRNb250aCA9IG5ldyBEYXRlKHRoaXMuY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKSwgdGhpcy5jdXJyZW50RGF0ZS5nZXRNb250aCgpLCAxKTtcclxuICAgIGNvbnN0IG5leHRNb250aCA9IG5ldyBEYXRlKGN1cnJlbnRNb250aC5nZXRGdWxsWWVhcigpLCBjdXJyZW50TW9udGguZ2V0TW9udGgoKSArIDEsIDEpO1xyXG4gICAgXHJcbiAgICByZXR1cm4gbmV4dE1vbnRoIDw9IG5ldyBEYXRlKG1heERhdGUuZ2V0RnVsbFllYXIoKSwgbWF4RGF0ZS5nZXRNb250aCgpLCAxKTtcclxuICB9XHJcblxyXG4gIGNhbk5hdmlnYXRlVG9QcmV2aW91c1llYXIoKTogYm9vbGVhbiB7XHJcbiAgICBjb25zdCBtaW5EYXRlID0gdGhpcy5nZXREYXRlRnJvbUlucHV0KHRoaXMubWluRGF0ZSk7XHJcbiAgICBpZiAoIW1pbkRhdGUpIHJldHVybiB0cnVlO1xyXG4gICAgXHJcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpIC0gMSA+PSBtaW5EYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgfVxyXG5cclxuICBjYW5OYXZpZ2F0ZVRvTmV4dFllYXIoKTogYm9vbGVhbiB7XHJcbiAgICBjb25zdCBtYXhEYXRlID0gdGhpcy5nZXREYXRlRnJvbUlucHV0KHRoaXMubWF4RGF0ZSk7XHJcbiAgICBpZiAoIW1heERhdGUpIHJldHVybiB0cnVlO1xyXG4gICAgXHJcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpICsgMSA8PSBtYXhEYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgfVxyXG5cclxuICAvLyBEYXRlIHNlbGVjdGlvbiBsb2dpY1xyXG4gIHByaXZhdGUgc2VsZWN0RGF0ZShkYXRlOiBEYXRlIHwgbnVsbCkge1xyXG4gICAgYWxlcnQoYFNFTEVDVERBVEUgTUVHQSBERUJVRzogUmVjaWJpw7MgZmVjaGE6ICR7ZGF0ZX1gKTtcclxuICAgIFxyXG4gICAgaWYgKGRhdGUgPT09IG51bGwpIHtcclxuICAgICAgdGhpcy5zZWxlY3RlZERhdGVzID0gW107XHJcbiAgICAgIHRoaXMuX3ZhbHVlID0gbnVsbDtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5tZXJnZWRDb25maWcuYWxsb3dNdWx0aVNlbGVjdCkge1xyXG4gICAgICB0aGlzLmhhbmRsZU11bHRpU2VsZWN0KGRhdGUpO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLm1lcmdlZENvbmZpZy5hbGxvd1JhbmdlU2VsZWN0KSB7XHJcbiAgICAgIHRoaXMuaGFuZGxlUmFuZ2VTZWxlY3QoZGF0ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnNlbGVjdGVkRGF0ZXMgPSBbZGF0ZV07XHJcbiAgICAgIHRoaXMuX3ZhbHVlID0gZGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICBhbGVydChgU0VMRUNUREFURSBNRUdBIERFQlVHOiBfdmFsdWUgZmluYWw6ICR7dGhpcy5fdmFsdWV9YCk7XHJcbiAgICB0aGlzLnVwZGF0ZVZhbHVlKCk7XHJcbiAgICBcclxuICAgIGlmICh0aGlzLm1lcmdlZENvbmZpZy5jbG9zZU9uU2VsZWN0ICYmICF0aGlzLm1lcmdlZENvbmZpZy5hbGxvd011bHRpU2VsZWN0ICYmICF0aGlzLm1lcmdlZENvbmZpZy5hbGxvd1JhbmdlU2VsZWN0KSB7XHJcbiAgICAgIHRoaXMuY2xvc2VDYWxlbmRhcigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBoYW5kbGVNdWx0aVNlbGVjdChkYXRlOiBEYXRlKSB7XHJcbiAgICBjb25zdCBleGlzdGluZ0luZGV4ID0gdGhpcy5zZWxlY3RlZERhdGVzLmZpbmRJbmRleChzZWxlY3RlZERhdGUgPT4gdGhpcy5pc1NhbWVEYXkoc2VsZWN0ZWREYXRlLCBkYXRlKSk7XHJcbiAgICBcclxuICAgIGlmIChleGlzdGluZ0luZGV4ID4gLTEpIHtcclxuICAgICAgdGhpcy5zZWxlY3RlZERhdGVzLnNwbGljZShleGlzdGluZ0luZGV4LCAxKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWREYXRlcy5wdXNoKGRhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX3ZhbHVlID0gWy4uLnRoaXMuc2VsZWN0ZWREYXRlc107XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGhhbmRsZVJhbmdlU2VsZWN0KGRhdGU6IERhdGUpIHtcclxuICAgIGlmICh0aGlzLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAwIHx8IHRoaXMuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDIpIHtcclxuICAgICAgdGhpcy5zZWxlY3RlZERhdGVzID0gW2RhdGVdO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IHRoaXMuc2VsZWN0ZWREYXRlc1swXTtcclxuICAgICAgaWYgKGRhdGUgPCBzdGFydERhdGUpIHtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZXMgPSBbZGF0ZSwgc3RhcnREYXRlXTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZXMgPSBbc3RhcnREYXRlLCBkYXRlXTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX3ZhbHVlID0gWy4uLnRoaXMuc2VsZWN0ZWREYXRlc107XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHVwZGF0ZVZhbHVlKCkge1xyXG4gICAgYWxlcnQoYFVQREFURVZBTFVFIE1FR0EgREVCVUc6IHNlbGVjdGVkRGF0ZXNbMF06ICR7dGhpcy5zZWxlY3RlZERhdGVzWzBdfSwgX3ZhbHVlOiAke3RoaXMuX3ZhbHVlfSwgaW5wdXRWYWx1ZTogJHt0aGlzLmlucHV0VmFsdWV9YCk7XHJcbiAgICBcclxuICAgIGNvbnN0IHNlbGVjdEV2ZW50OiBDYWxlbmRhclNlbGVjdEV2ZW50ID0ge1xyXG4gICAgICBkYXRlOiB0aGlzLnNlbGVjdGVkRGF0ZXNbMF0gfHwgbmV3IERhdGUoKSxcclxuICAgICAgZm9ybWF0dGVkRGF0ZTogdGhpcy5pbnB1dFZhbHVlLFxyXG4gICAgICBzZWxlY3RlZERhdGVzOiBbLi4udGhpcy5zZWxlY3RlZERhdGVzXVxyXG4gICAgfTtcclxuXHJcbiAgICBpZiAodGhpcy5tZXJnZWRDb25maWcuYWxsb3dSYW5nZVNlbGVjdCAmJiB0aGlzLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAyKSB7XHJcbiAgICAgIHNlbGVjdEV2ZW50LmlzUmFuZ2UgPSB0cnVlO1xyXG4gICAgICBzZWxlY3RFdmVudC5zdGFydERhdGUgPSB0aGlzLnNlbGVjdGVkRGF0ZXNbMF07XHJcbiAgICAgIHNlbGVjdEV2ZW50LmVuZERhdGUgPSB0aGlzLnNlbGVjdGVkRGF0ZXNbMV07XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5vbkNoYW5nZSh0aGlzLl92YWx1ZSk7XHJcbiAgICB0aGlzLmRhdGVTZWxlY3QuZW1pdChzZWxlY3RFdmVudCk7XHJcbiAgICB0aGlzLmdlbmVyYXRlQ2FsZW5kYXJEYXlzKCk7XHJcbiAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcclxuICAgIFxyXG4gICAgYWxlcnQoYFVQREFURVZBTFVFIE1FR0EgREVCVUc6IERlc3B1w6lzIGRlIG9uQ2hhbmdlIC0gaW5wdXRWYWx1ZTogJHt0aGlzLmlucHV0VmFsdWV9YCk7XHJcbiAgfVxyXG5cclxuICAvLyBVdGlsaXR5IG1ldGhvZHNcclxuICBwcml2YXRlIGlzU2FtZURheShkYXRlMTogRGF0ZSwgZGF0ZTI6IERhdGUpOiBib29sZWFuIHtcclxuICAgIHJldHVybiBkYXRlMS5nZXRGdWxsWWVhcigpID09PSBkYXRlMi5nZXRGdWxsWWVhcigpICYmXHJcbiAgICAgICAgICAgZGF0ZTEuZ2V0TW9udGgoKSA9PT0gZGF0ZTIuZ2V0TW9udGgoKSAmJlxyXG4gICAgICAgICAgIGRhdGUxLmdldERhdGUoKSA9PT0gZGF0ZTIuZ2V0RGF0ZSgpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBmb3JtYXREYXRlKGRhdGU6IERhdGUpOiBzdHJpbmcge1xyXG4gICAgY29uc3QgZGF5ID0gZGF0ZS5nZXREYXRlKCk7XHJcbiAgICBjb25zdCBtb250aCA9IGRhdGUuZ2V0TW9udGgoKTtcclxuICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKTtcclxuXHJcbiAgICBsZXQgZm9ybWF0dGVkRGF0ZSA9IHRoaXMubWVyZ2VkTG9jYWxlLmRhdGVGb3JtYXQ7XHJcbiAgICBcclxuICAgIC8vIFJlZW1wbGF6YXIgZMOtYSAoY29uIHBhZGRpbmcgZGUgY2VybyBwYXJhIGTDrWFzIG1lbm9yZXMgYSAxMClcclxuICAgIGZvcm1hdHRlZERhdGUgPSBmb3JtYXR0ZWREYXRlLnJlcGxhY2UoJ2RkJywgZGF5LnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKSk7XHJcbiAgICBcclxuICAgIC8vIFJlZW1wbGF6YXIgbWVzICh2ZXJpZmljYXIgc2kgZXMgZm9ybWF0byBsYXJnbyBvIGNvcnRvKVxyXG4gICAgaWYgKGZvcm1hdHRlZERhdGUuaW5jbHVkZXMoJ21tbW0nKSkge1xyXG4gICAgICAvLyBNZXMgY29tcGxldG8gZW4gZXNwYcOxb2xcclxuICAgICAgZm9ybWF0dGVkRGF0ZSA9IGZvcm1hdHRlZERhdGUucmVwbGFjZSgnbW1tbScsIHRoaXMubWVyZ2VkTG9jYWxlLm1vbnRoc1ttb250aF0udG9Mb3dlckNhc2UoKSk7XHJcbiAgICB9IGVsc2UgaWYgKGZvcm1hdHRlZERhdGUuaW5jbHVkZXMoJ21tbScpKSB7XHJcbiAgICAgIC8vIE1lcyBhYnJldmlhZG9cclxuICAgICAgZm9ybWF0dGVkRGF0ZSA9IGZvcm1hdHRlZERhdGUucmVwbGFjZSgnbW1tJywgdGhpcy5tZXJnZWRMb2NhbGUubW9udGhzU2hvcnRbbW9udGhdKTtcclxuICAgIH0gZWxzZSBpZiAoZm9ybWF0dGVkRGF0ZS5pbmNsdWRlcygnbW0nKSkge1xyXG4gICAgICAvLyBNZXMgbnVtw6lyaWNvIGNvbiBwYWRkaW5nXHJcbiAgICAgIGZvcm1hdHRlZERhdGUgPSBmb3JtYXR0ZWREYXRlLnJlcGxhY2UoJ21tJywgKG1vbnRoICsgMSkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpKTtcclxuICAgIH0gZWxzZSBpZiAoZm9ybWF0dGVkRGF0ZS5pbmNsdWRlcygnbScpKSB7XHJcbiAgICAgIC8vIE1lcyBudW3DqXJpY28gc2luIHBhZGRpbmdcclxuICAgICAgZm9ybWF0dGVkRGF0ZSA9IGZvcm1hdHRlZERhdGUucmVwbGFjZSgnbScsIChtb250aCArIDEpLnRvU3RyaW5nKCkpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBSZWVtcGxhemFyIGHDsW9cclxuICAgIGZvcm1hdHRlZERhdGUgPSBmb3JtYXR0ZWREYXRlLnJlcGxhY2UoJ3l5eXknLCB5ZWFyKTtcclxuXHJcbiAgICByZXR1cm4gZm9ybWF0dGVkRGF0ZTtcclxuICB9XHJcblxyXG4gIGdldEhlYWRlclRpdGxlKCk6IHN0cmluZyB7XHJcbiAgICBzd2l0Y2ggKHRoaXMuY3VycmVudFZpZXcpIHtcclxuICAgICAgY2FzZSAnZGF5JzpcclxuICAgICAgICByZXR1cm4gYCR7dGhpcy5tZXJnZWRMb2NhbGUubW9udGhzW3RoaXMuY3VycmVudERhdGUuZ2V0TW9udGgoKV19ICR7dGhpcy5jdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpfWA7XHJcbiAgICAgIGNhc2UgJ21vbnRoJzpcclxuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCk7XHJcbiAgICAgIGNhc2UgJ3llYXInOlxyXG4gICAgICAgIGNvbnN0IHN0YXJ0WWVhciA9IHRoaXMuY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKSAtIDEwO1xyXG4gICAgICAgIGNvbnN0IGVuZFllYXIgPSB0aGlzLmN1cnJlbnREYXRlLmdldEZ1bGxZZWFyKCkgKyAxMDtcclxuICAgICAgICByZXR1cm4gYCR7c3RhcnRZZWFyfSAtICR7ZW5kWWVhcn1gO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldFdlZWtkYXlzKCk6IHN0cmluZ1tdIHtcclxuICAgIGNvbnN0IHdlZWtkYXlzID0gWy4uLnRoaXMubWVyZ2VkTG9jYWxlLndlZWtkYXlzTWluXTtcclxuICAgIGNvbnN0IGZpcnN0RGF5ID0gdGhpcy5tZXJnZWRMb2NhbGUuZmlyc3REYXlPZldlZWs7XHJcbiAgICBcclxuICAgIHJldHVybiBbXHJcbiAgICAgIC4uLndlZWtkYXlzLnNsaWNlKGZpcnN0RGF5KSxcclxuICAgICAgLi4ud2Vla2RheXMuc2xpY2UoMCwgZmlyc3REYXkpXHJcbiAgICBdO1xyXG4gIH1cclxufVxyXG4iLCI8ZGl2IGNsYXNzPVwic2EtY2FsZW5kYXItY29udGFpbmVyIHNhbm5hLXVpLWNhbGVuZGFyLXJvb3RcIiBbYXR0ci5kYXRhLXNhbm5hLWNhbGVuZGFyXT1cInRydWVcIj5cclxuICA8IS0tIElucHV0IGZpZWxkIChpZiBub3QgaW5saW5lKSAtLT5cclxuICA8ZGl2ICpuZ0lmPVwiIWlubGluZVwiIGNsYXNzPVwiY2FsZW5kYXItaW5wdXQtY29udGFpbmVyXCI+XHJcbiAgICA8bGFiZWwgKm5nSWY9XCJzaG91bGRTaG93TGFiZWxcIiBbZm9yXT1cImNhbGVuZGFySWRcIiBbY2xhc3NdPVwibGFiZWxDbGFzc2VzXCI+XHJcbiAgICAgIHt7IGxhYmVsIH19XHJcbiAgICAgIDxzcGFuICpuZ0lmPVwicmVxdWlyZWQgJiYgbGFiZWxcIiBjbGFzcz1cInRleHQtZGFuZ2VyXCI+Kjwvc3Bhbj5cclxuICAgIDwvbGFiZWw+XHJcblxyXG4gICAgPGRpdiBjbGFzcz1cInBvc2l0aW9uLXJlbGF0aXZlXCI+XHJcbiAgICAgIDxpbnB1dFxyXG4gICAgICAgIFtpZF09XCJjYWxlbmRhcklkXCJcclxuICAgICAgICBbbmFtZV09XCJuYW1lXCJcclxuICAgICAgICBbY2xhc3NdPVwiaW5wdXRDbGFzc2VzXCJcclxuICAgICAgICB0eXBlPVwidGV4dFwiXHJcbiAgICAgICAgW3ZhbHVlXT1cImlucHV0VmFsdWVcIlxyXG4gICAgICAgIFtwbGFjZWhvbGRlcl09XCJwbGFjZWhvbGRlclwiXHJcbiAgICAgICAgW3JlcXVpcmVkXT1cInJlcXVpcmVkXCJcclxuICAgICAgICByZWFkb25seT1cInRydWVcIlxyXG4gICAgICAgIFtkaXNhYmxlZF09XCJkaXNhYmxlZFwiXHJcbiAgICAgICAgc3BlbGxjaGVjaz1cImZhbHNlXCJcclxuICAgICAgICBhdXRvY29tcGxldGU9XCJvZmZcIlxyXG4gICAgICAgIChjbGljayk9XCJvbklucHV0Q2xpY2soJGV2ZW50KVwiXHJcbiAgICAgICAgKGZvY3VzKT1cIm9uSW5wdXRGb2N1cygkZXZlbnQpXCJcclxuICAgICAgICAoYmx1cik9XCJvbklucHV0Qmx1cigkZXZlbnQpXCJcclxuICAgICAgLz5cclxuICAgICAgXHJcbiAgICAgIDwhLS0gQ2xlYXIgaWNvbiAoWCkgY3VhbmRvIGhheSB2YWxvciAtLT5cclxuICAgICAgPGRpdiBcclxuICAgICAgICAqbmdJZj1cImlucHV0VmFsdWUgJiYgIWRpc2FibGVkXCJcclxuICAgICAgICBjbGFzcz1cImNsZWFyLWljb25cIiBcclxuICAgICAgICAoY2xpY2spPVwib25DbGVhclZhbHVlKCRldmVudClcIlxyXG4gICAgICAgIHRpdGxlPVwiTGltcGlhciBmZWNoYVwiPlxyXG4gICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIj5cclxuICAgICAgICAgIDxsaW5lIHgxPVwiMThcIiB5MT1cIjZcIiB4Mj1cIjZcIiB5Mj1cIjE4XCI+PC9saW5lPlxyXG4gICAgICAgICAgPGxpbmUgeDE9XCI2XCIgeTE9XCI2XCIgeDI9XCIxOFwiIHkyPVwiMThcIj48L2xpbmU+XHJcbiAgICAgICAgPC9zdmc+XHJcbiAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgPCEtLSBDYWxlbmRhciBpY29uIChjdWFuZG8gbm8gaGF5IHZhbG9yIG8gZXN0w6EgZGVzaGFiaWxpdGFkbykgLS0+XHJcbiAgICAgIDxkaXYgXHJcbiAgICAgICAgKm5nSWY9XCIhaW5wdXRWYWx1ZSB8fCBkaXNhYmxlZFwiXHJcbiAgICAgICAgY2xhc3M9XCJjYWxlbmRhci1pY29uXCIgXHJcbiAgICAgICAgW2NsYXNzLmRpc2FibGVkXT1cImRpc2FibGVkIHx8IHJlYWRvbmx5XCJcclxuICAgICAgICAoY2xpY2spPVwib25JbnB1dENsaWNrKCRldmVudClcIj5cclxuICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCI+XHJcbiAgICAgICAgICA8cmVjdCB4PVwiM1wiIHk9XCI0XCIgd2lkdGg9XCIxOFwiIGhlaWdodD1cIjE4XCIgcng9XCIyXCIgcnk9XCIyXCI+PC9yZWN0PlxyXG4gICAgICAgICAgPGxpbmUgeDE9XCIxNlwiIHkxPVwiMlwiIHgyPVwiMTZcIiB5Mj1cIjZcIj48L2xpbmU+XHJcbiAgICAgICAgICA8bGluZSB4MT1cIjhcIiB5MT1cIjJcIiB4Mj1cIjhcIiB5Mj1cIjZcIj48L2xpbmU+XHJcbiAgICAgICAgICA8bGluZSB4MT1cIjNcIiB5MT1cIjEwXCIgeDI9XCIyMVwiIHkyPVwiMTBcIj48L2xpbmU+XHJcbiAgICAgICAgPC9zdmc+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcblxyXG4gICAgPGRpdiAqbmdJZj1cImhlbHBlclRleHQgJiYgIWVycm9yVGV4dFwiIGNsYXNzPVwiZm9ybS10ZXh0XCI+e3sgaGVscGVyVGV4dCB9fTwvZGl2PlxyXG4gICAgPGRpdiAqbmdJZj1cImVycm9yVGV4dFwiIGNsYXNzPVwiaW52YWxpZC1mZWVkYmFjayBkLWJsb2NrXCI+e3sgZXJyb3JUZXh0IH19PC9kaXY+XHJcbiAgPC9kaXY+XHJcblxyXG4gIDwhLS0gQ2FsZW5kYXIgcG9wdXAvaW5saW5lIC0tPlxyXG4gIDxkaXYgXHJcbiAgICBjbGFzcz1cImNhbGVuZGFyLXBvcHVwXCIgXHJcbiAgICBbY2xhc3MuaW5saW5lXT1cImlubGluZVwiXHJcbiAgICBbY2xhc3Mub3Blbl09XCJpc09wZW5cIlxyXG4gICAgW3N0eWxlLi0tcHJpbWFyeS1jb2xvcl09XCJtZXJnZWRDb2xvcnMucHJpbWFyeVwiXHJcbiAgICBbc3R5bGUuLS1zZWNvbmRhcnktY29sb3JdPVwibWVyZ2VkQ29sb3JzLnNlY29uZGFyeVwiXHJcbiAgICBbc3R5bGUuLS1zdWNjZXNzLWNvbG9yXT1cIm1lcmdlZENvbG9ycy5zdWNjZXNzXCJcclxuICAgIFtzdHlsZS4tLWVycm9yLWNvbG9yXT1cIm1lcmdlZENvbG9ycy5lcnJvclwiXHJcbiAgICBbc3R5bGUuLS1iYWNrZ3JvdW5kLWNvbG9yXT1cIm1lcmdlZENvbG9ycy5iYWNrZ3JvdW5kXCJcclxuICAgIFtzdHlsZS4tLXN1cmZhY2UtY29sb3JdPVwibWVyZ2VkQ29sb3JzLnN1cmZhY2VcIlxyXG4gICAgW3N0eWxlLi0tYm9yZGVyLWNvbG9yXT1cIm1lcmdlZENvbG9ycy5ib3JkZXJcIlxyXG4gICAgW3N0eWxlLi0tZGlzYWJsZWQtY29sb3JdPVwibWVyZ2VkQ29sb3JzLmRpc2FibGVkXCJcclxuICAgIFtzdHlsZS4tLWhvdmVyLWNvbG9yXT1cIm1lcmdlZENvbG9ycy5ob3ZlclwiXHJcbiAgICBbc3R5bGUuLS13ZWVrZGF5LWhlYWRlci1iZ109XCJtZXJnZWRDb2xvcnMud2Vla2RheUhlYWRlckJnXCJcclxuICAgIFtzdHlsZS4tLXdlZWtkYXktaGVhZGVyLWNvbG9yXT1cIm1lcmdlZENvbG9ycy53ZWVrZGF5SGVhZGVyQ29sb3JcIlxyXG4gICAgKm5nSWY9XCJpbmxpbmUgfHwgaXNPcGVuXCI+XHJcbiAgICBcclxuICAgIDwhLS0gQ2FsZW5kYXIgaGVhZGVyIC0tPlxyXG4gICAgPGRpdiBjbGFzcz1cImNhbGVuZGFyLWhlYWRlclwiICpuZ0lmPVwibWVyZ2VkQ29uZmlnLnNob3dIZWFkZXJcIj5cclxuICAgICAgPCEtLSBOYXZpZ2F0aW9uIC0tPlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiY2FsZW5kYXItbmF2aWdhdGlvblwiICpuZ0lmPVwibWVyZ2VkQ29uZmlnLnNob3dOYXZpZ2F0aW9uXCI+XHJcbiAgICAgICAgPGJ1dHRvbiBcclxuICAgICAgICAgIHR5cGU9XCJidXR0b25cIiBcclxuICAgICAgICAgIGNsYXNzPVwibmF2LWJ1dHRvbiBwcmV2XCIgXHJcbiAgICAgICAgICAoY2xpY2spPVwibmF2aWdhdGVQcmV2aW91cygkZXZlbnQpXCJcclxuICAgICAgICAgIFtkaXNhYmxlZF09XCJkaXNhYmxlZCB8fCAhY2FuTmF2aWdhdGVUb1ByZXZpb3VzTW9udGgoKSAmJiBjdXJyZW50VmlldyA9PT0gJ2RheScgfHwgIWNhbk5hdmlnYXRlVG9QcmV2aW91c1llYXIoKSAmJiBjdXJyZW50VmlldyA9PT0gJ21vbnRoJ1wiPlxyXG4gICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiPlxyXG4gICAgICAgICAgICA8cG9seWxpbmUgcG9pbnRzPVwiMTUsMTggOSwxMiAxNSw2XCI+PC9wb2x5bGluZT5cclxuICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgIDwvYnV0dG9uPlxyXG5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiaGVhZGVyLXRpdGxlLWNvbnRhaW5lclwiPlxyXG4gICAgICAgICAgPGJ1dHRvbiBcclxuICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiIFxyXG4gICAgICAgICAgICBjbGFzcz1cImhlYWRlci10aXRsZVwiXHJcbiAgICAgICAgICAgIChjbGljayk9XCJjdXJyZW50VmlldyA9PT0gJ2RheScgPyBzZXRWaWV3KCdtb250aCcpIDogY3VycmVudFZpZXcgPT09ICdtb250aCcgPyBzZXRWaWV3KCd5ZWFyJykgOiBudWxsXCJcclxuICAgICAgICAgICAgW2Rpc2FibGVkXT1cImRpc2FibGVkXCI+XHJcbiAgICAgICAgICAgIHt7IGdldEhlYWRlclRpdGxlKCkgfX1cclxuICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICA8YnV0dG9uIFxyXG4gICAgICAgICAgdHlwZT1cImJ1dHRvblwiIFxyXG4gICAgICAgICAgY2xhc3M9XCJuYXYtYnV0dG9uIG5leHRcIiBcclxuICAgICAgICAgIChjbGljayk9XCJuYXZpZ2F0ZU5leHQoJGV2ZW50KVwiXHJcbiAgICAgICAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWQgfHwgIWNhbk5hdmlnYXRlVG9OZXh0TW9udGgoKSAmJiBjdXJyZW50VmlldyA9PT0gJ2RheScgfHwgIWNhbk5hdmlnYXRlVG9OZXh0WWVhcigpICYmIGN1cnJlbnRWaWV3ID09PSAnbW9udGgnXCI+XHJcbiAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCI+XHJcbiAgICAgICAgICAgIDxwb2x5bGluZSBwb2ludHM9XCI5LDE4IDE1LDEyIDksNlwiPjwvcG9seWxpbmU+XHJcbiAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgPC9kaXY+XHJcblxyXG4gICAgICA8IS0tIEFjdGlvbiBidXR0b25zIChvY3VsdG9zIHBvciBkZWZlY3RvIHBhcmEgZGlzZcOxbyBtw6FzIGxpbXBpbykgLS0+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJjYWxlbmRhci1hY3Rpb25zXCIgKm5nSWY9XCJtZXJnZWRDb25maWcuc2hvd1RvZGF5QnV0dG9uIHx8IG1lcmdlZENvbmZpZy5zaG93Q2xlYXJCdXR0b25cIj5cclxuICAgICAgICA8YnV0dG9uIFxyXG4gICAgICAgICAgKm5nSWY9XCJtZXJnZWRDb25maWcuc2hvd1RvZGF5QnV0dG9uXCJcclxuICAgICAgICAgIHR5cGU9XCJidXR0b25cIiBcclxuICAgICAgICAgIGNsYXNzPVwiYWN0aW9uLWJ1dHRvbiB0b2RheS1idXR0b25cIlxyXG4gICAgICAgICAgKGNsaWNrKT1cIm9uVG9kYXlDbGljaygpXCJcclxuICAgICAgICAgIFtkaXNhYmxlZF09XCJkaXNhYmxlZFwiPlxyXG4gICAgICAgICAge3sgbWVyZ2VkTG9jYWxlLnRvZGF5IH19XHJcbiAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgXHJcbiAgICAgICAgPGJ1dHRvbiBcclxuICAgICAgICAgICpuZ0lmPVwibWVyZ2VkQ29uZmlnLnNob3dDbGVhckJ1dHRvblwiXHJcbiAgICAgICAgICB0eXBlPVwiYnV0dG9uXCIgXHJcbiAgICAgICAgICBjbGFzcz1cImFjdGlvbi1idXR0b24gY2xlYXItYnV0dG9uXCJcclxuICAgICAgICAgIChjbGljayk9XCJvbkNsZWFyQ2xpY2soKVwiXHJcbiAgICAgICAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWRcIj5cclxuICAgICAgICAgIHt7IG1lcmdlZExvY2FsZS5jbGVhciB9fVxyXG4gICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG5cclxuICAgIDwhLS0gQ2FsZW5kYXIgY29udGVudCAtLT5cclxuICAgIDxkaXYgY2xhc3M9XCJjYWxlbmRhci1jb250ZW50XCI+XHJcbiAgICAgIDwhLS0gRGF5IHZpZXcgLS0+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJjYWxlbmRhci1kYXlzXCIgKm5nSWY9XCJjdXJyZW50VmlldyA9PT0gJ2RheSdcIj5cclxuICAgICAgICA8IS0tIFdlZWtkYXkgaGVhZGVycyAtLT5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwid2Vla2RheXNcIj5cclxuICAgICAgICAgIDxkaXYgXHJcbiAgICAgICAgICAgIGNsYXNzPVwid2Vla2RheS1oZWFkZXJcIiBcclxuICAgICAgICAgICAgKm5nRm9yPVwibGV0IHdlZWtkYXkgb2YgZ2V0V2Vla2RheXMoKVwiPlxyXG4gICAgICAgICAgICB7eyB3ZWVrZGF5IH19XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgPCEtLSBDYWxlbmRhciBncmlkIC0tPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJkYXlzLWdyaWRcIj5cclxuICAgICAgICAgIDxkaXYgXHJcbiAgICAgICAgICAgIGNsYXNzPVwid2Vlay1yb3dcIiBcclxuICAgICAgICAgICAgKm5nRm9yPVwibGV0IHdlZWsgb2YgY2FsZW5kYXJEYXlzXCI+XHJcbiAgICAgICAgICAgIDxkaXYgXHJcbiAgICAgICAgICAgICAgY2xhc3M9XCJkYXktY2VsbFwiXHJcbiAgICAgICAgICAgICAgKm5nRm9yPVwibGV0IGRheSBvZiB3ZWVrXCJcclxuICAgICAgICAgICAgICBbY2xhc3MudG9kYXldPVwiZGF5LmlzVG9kYXkgJiYgbWVyZ2VkQ29uZmlnLmhpZ2hsaWdodFRvZGF5XCJcclxuICAgICAgICAgICAgICBbY2xhc3Muc2VsZWN0ZWRdPVwiZGF5LmlzU2VsZWN0ZWRcIlxyXG4gICAgICAgICAgICAgIFtjbGFzcy5kaXNhYmxlZF09XCJkYXkuaXNEaXNhYmxlZFwiXHJcbiAgICAgICAgICAgICAgW2NsYXNzLm90aGVyLW1vbnRoXT1cIiFkYXkuaXNJbkN1cnJlbnRNb250aFwiXHJcbiAgICAgICAgICAgICAgW2NsYXNzLndlZWtlbmRdPVwiZGF5LmlzV2Vla2VuZCAmJiBtZXJnZWRDb25maWcuaGlnaGxpZ2h0V2Vla2VuZHNcIlxyXG4gICAgICAgICAgICAgIFtjbGFzcy5oYXMtZXZlbnRdPVwiZGF5Lmhhc0V2ZW50XCJcclxuICAgICAgICAgICAgICAoY2xpY2spPVwib25EYXlDbGljayhkYXksICRldmVudClcIj5cclxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImRheS1udW1iZXJcIj57eyBkYXkuZGF5IH19PC9zcGFuPlxyXG4gICAgICAgICAgICAgIDxkaXYgKm5nSWY9XCJkYXkuaGFzRXZlbnRcIiBjbGFzcz1cImV2ZW50LWluZGljYXRvclwiPjwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuXHJcbiAgICAgIDwhLS0gTW9udGggdmlldyAtLT5cclxuICAgICAgPGRpdiBjbGFzcz1cImNhbGVuZGFyLW1vbnRoc1wiICpuZ0lmPVwiY3VycmVudFZpZXcgPT09ICdtb250aCdcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwibW9udGhzLWdyaWRcIj5cclxuICAgICAgICAgIDxkaXYgXHJcbiAgICAgICAgICAgIGNsYXNzPVwibW9udGgtY2VsbFwiXHJcbiAgICAgICAgICAgICpuZ0Zvcj1cImxldCBtb250aCBvZiBjYWxlbmRhck1vbnRoc1wiXHJcbiAgICAgICAgICAgIFtjbGFzcy5zZWxlY3RlZF09XCJtb250aC5pc1NlbGVjdGVkXCJcclxuICAgICAgICAgICAgW2NsYXNzLmRpc2FibGVkXT1cIm1vbnRoLmlzRGlzYWJsZWRcIlxyXG4gICAgICAgICAgICBbY2xhc3MuY3VycmVudF09XCJtb250aC5pc0N1cnJlbnRcIlxyXG4gICAgICAgICAgICAoY2xpY2spPVwib25Nb250aENsaWNrKG1vbnRoLCAkZXZlbnQpXCI+XHJcbiAgICAgICAgICAgIHt7IG1vbnRoLm5hbWUgfX1cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuXHJcbiAgICAgIDwhLS0gWWVhciB2aWV3IC0tPlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiY2FsZW5kYXIteWVhcnNcIiAqbmdJZj1cImN1cnJlbnRWaWV3ID09PSAneWVhcidcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwieWVhcnMtZ3JpZFwiPlxyXG4gICAgICAgICAgPGRpdiBcclxuICAgICAgICAgICAgY2xhc3M9XCJ5ZWFyLWNlbGxcIlxyXG4gICAgICAgICAgICAqbmdGb3I9XCJsZXQgeWVhciBvZiBjYWxlbmRhclllYXJzXCJcclxuICAgICAgICAgICAgW2NsYXNzLnNlbGVjdGVkXT1cInllYXIuaXNTZWxlY3RlZFwiXHJcbiAgICAgICAgICAgIFtjbGFzcy5kaXNhYmxlZF09XCJ5ZWFyLmlzRGlzYWJsZWRcIlxyXG4gICAgICAgICAgICBbY2xhc3MuY3VycmVudF09XCJ5ZWFyLmlzQ3VycmVudFwiXHJcbiAgICAgICAgICAgIChjbGljayk9XCJvblllYXJDbGljayh5ZWFyLCAkZXZlbnQpXCI+XHJcbiAgICAgICAgICAgIHt7IHllYXIueWVhciB9fVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgPC9kaXY+XHJcbjwvZGl2PlxyXG4iXX0=
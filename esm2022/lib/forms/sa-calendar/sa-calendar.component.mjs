import { Component, Input, Output, EventEmitter, forwardRef, ViewEncapsulation, ChangeDetectionStrategy, HostListener } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { DEFAULT_CALENDAR_LOCALE, DEFAULT_CALENDAR_COLORS, DEFAULT_CALENDAR_CONFIG } from '../../types/calendar.types';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
export class SaCalendarComponent {
    cdr;
    // Basic inputs
    _value = null;
    size = 'md';
    status = 'default';
    label = '';
    placeholder = 'Seleccionar fecha';
    helperText = '';
    errorText = '';
    required = false;
    readonly = false;
    disabled = false;
    id = '';
    name = '';
    // Calendar specific inputs
    locale = DEFAULT_CALENDAR_LOCALE;
    colors = DEFAULT_CALENDAR_COLORS;
    config = DEFAULT_CALENDAR_CONFIG;
    validation = {};
    events = [];
    inline = false;
    showInput = true;
    // Outputs
    dateSelect = new EventEmitter();
    viewChange = new EventEmitter();
    monthChange = new EventEmitter();
    yearChange = new EventEmitter();
    focus = new EventEmitter();
    blur = new EventEmitter();
    // Internal state
    currentView = 'day';
    currentDate = new Date();
    selectedDates = [];
    calendarDays = [];
    calendarMonths = [];
    calendarYears = [];
    isOpen = false;
    isFocused = false;
    _generatedId;
    onChange = (_) => { };
    onTouched = () => { };
    constructor(cdr) {
        this.cdr = cdr;
        this._generatedId = `sa-calendar-${Math.random().toString(36).substr(2, 9)}`;
    }
    ngOnInit() {
        this.initializeCalendar();
        if (this.inline) {
            this.isOpen = true;
        }
    }
    ngOnChanges(changes) {
        if (changes['locale'] || changes['config']) {
            this.initializeCalendar();
        }
    }
    onDocumentClick(event) {
        if (!this.inline && this.isOpen) {
            const target = event.target;
            const calendarElement = event.target.closest('sa-calendar');
            if (!calendarElement) {
                this.closeCalendar();
            }
        }
    }
    get calendarId() {
        return this.id || this._generatedId;
    }
    get mergedColors() {
        return { ...DEFAULT_CALENDAR_COLORS, ...this.colors };
    }
    get mergedConfig() {
        return { ...DEFAULT_CALENDAR_CONFIG, ...this.config };
    }
    get mergedLocale() {
        return { ...DEFAULT_CALENDAR_LOCALE, ...this.locale };
    }
    get inputValue() {
        if (!this._value)
            return '';
        if (Array.isArray(this._value)) {
            if (this.mergedConfig.allowRangeSelect && this._value.length === 2) {
                return `${this.formatDate(this._value[0])} - ${this.formatDate(this._value[1])}`;
            }
            return this._value.map(date => this.formatDate(date)).join(', ');
        }
        return this.formatDate(this._value);
    }
    get inputClasses() {
        const sizeMap = {
            'sm': 'form-control-sm',
            'md': '',
            'lg': 'form-control-lg'
        };
        const baseClasses = ['form-control', 'calendar-input'];
        if (sizeMap[this.size] && sizeMap[this.size] !== '') {
            baseClasses.push(sizeMap[this.size]);
        }
        if (this.status === 'error' || this.errorText) {
            baseClasses.push('is-invalid');
        }
        else if (this.status === 'success') {
            baseClasses.push('is-valid');
        }
        return baseClasses.join(' ');
    }
    get labelClasses() {
        const sizeMap = {
            'sm': 'form-label label-sm',
            'md': 'form-label label-md',
            'lg': 'form-label label-lg'
        };
        return sizeMap[this.size] || 'form-label label-md';
    }
    // ControlValueAccessor implementation
    writeValue(value) {
        this._value = value;
        this.updateSelectedDates();
        this.cdr.markForCheck();
    }
    registerOnChange(fn) {
        this.onChange = fn;
    }
    registerOnTouched(fn) {
        this.onTouched = fn;
    }
    setDisabledState(isDisabled) {
        this.disabled = isDisabled;
        this.cdr.markForCheck();
    }
    // Calendar initialization
    initializeCalendar() {
        this.updateSelectedDates();
        this.generateCalendarDays();
        this.generateCalendarMonths();
        this.generateCalendarYears();
        this.cdr.markForCheck();
    }
    updateSelectedDates() {
        this.selectedDates = [];
        if (this._value) {
            if (Array.isArray(this._value)) {
                this.selectedDates = [...this._value];
            }
            else {
                this.selectedDates = [this._value];
            }
        }
    }
    // Calendar generation methods
    generateCalendarDays() {
        const year = this.currentDate.getFullYear();
        const month = this.currentDate.getMonth();
        const firstDay = new Date(year, month, 1);
        const lastDay = new Date(year, month + 1, 0);
        const startDate = new Date(firstDay);
        const endDate = new Date(lastDay);
        // Adjust start date to show previous month days if needed
        const firstDayOfWeek = this.mergedLocale.firstDayOfWeek;
        const startDayOfWeek = firstDay.getDay();
        const diff = (startDayOfWeek - firstDayOfWeek + 7) % 7;
        startDate.setDate(startDate.getDate() - diff);
        // Adjust end date to show next month days
        const endDayOfWeek = endDate.getDay();
        const endDiff = (6 - endDayOfWeek + firstDayOfWeek) % 7;
        endDate.setDate(endDate.getDate() + endDiff);
        this.calendarDays = [];
        const weeks = [];
        let week = [];
        const currentDateIter = new Date(startDate);
        while (currentDateIter <= endDate) {
            const calendarDay = this.createCalendarDay(currentDateIter, month);
            week.push(calendarDay);
            if (week.length === 7) {
                weeks.push([...week]);
                week = [];
            }
            currentDateIter.setDate(currentDateIter.getDate() + 1);
        }
        this.calendarDays = weeks;
    }
    createCalendarDay(date, currentMonth) {
        const today = new Date();
        const isToday = this.isSameDay(date, today);
        const isSelected = this.selectedDates.some(selectedDate => this.isSameDay(date, selectedDate));
        const isDisabled = this.isDateDisabled(date);
        const isInCurrentMonth = date.getMonth() === currentMonth;
        const isWeekend = date.getDay() === 0 || date.getDay() === 6;
        const hasEvent = this.events.some(event => this.isSameDay(event.date, date));
        return {
            date: new Date(date),
            day: date.getDate(),
            month: date.getMonth(),
            year: date.getFullYear(),
            isToday,
            isSelected,
            isDisabled,
            isInCurrentMonth,
            isWeekend,
            hasEvent
        };
    }
    generateCalendarMonths() {
        const currentYear = this.currentDate.getFullYear();
        this.calendarMonths = this.mergedLocale.months.map((month, index) => ({
            name: month,
            number: index,
            year: currentYear,
            isSelected: this.selectedDates.some(date => date.getFullYear() === currentYear && date.getMonth() === index),
            isDisabled: this.isMonthDisabled(currentYear, index),
            isCurrent: new Date().getFullYear() === currentYear && new Date().getMonth() === index
        }));
    }
    generateCalendarYears() {
        const currentYear = this.currentDate.getFullYear();
        const startYear = currentYear - 10;
        const endYear = currentYear + 10;
        this.calendarYears = [];
        for (let year = startYear; year <= endYear; year++) {
            this.calendarYears.push({
                year,
                isSelected: this.selectedDates.some(date => date.getFullYear() === year),
                isDisabled: this.isYearDisabled(year),
                isCurrent: new Date().getFullYear() === year
            });
        }
    }
    // Date validation methods
    isDateDisabled(date) {
        if (this.validation.minDate && date < this.validation.minDate) {
            return true;
        }
        if (this.validation.maxDate && date > this.validation.maxDate) {
            return true;
        }
        if (this.validation.disabledDates?.some(disabledDate => this.isSameDay(date, disabledDate))) {
            return true;
        }
        if (this.validation.disabledDays?.includes(date.getDay())) {
            return true;
        }
        if (this.validation.enabledDates && !this.validation.enabledDates.some(enabledDate => this.isSameDay(date, enabledDate))) {
            return true;
        }
        if (this.validation.customValidator && !this.validation.customValidator(date)) {
            return true;
        }
        return false;
    }
    isMonthDisabled(year, month) {
        const firstDayOfMonth = new Date(year, month, 1);
        const lastDayOfMonth = new Date(year, month + 1, 0);
        // Check if all days in the month are disabled
        for (let day = 1; day <= lastDayOfMonth.getDate(); day++) {
            const date = new Date(year, month, day);
            if (!this.isDateDisabled(date)) {
                return false;
            }
        }
        return true;
    }
    isYearDisabled(year) {
        // Check if all months in the year are disabled
        for (let month = 0; month < 12; month++) {
            if (!this.isMonthDisabled(year, month)) {
                return false;
            }
        }
        return true;
    }
    // Event handlers
    onInputClick() {
        if (!this.disabled && !this.readonly && !this.inline) {
            this.toggleCalendar();
        }
    }
    onInputFocus(event) {
        this.isFocused = true;
        this.focus.emit(event);
    }
    onInputBlur(event) {
        this.isFocused = false;
        this.onTouched();
        this.blur.emit(event);
    }
    onDayClick(day) {
        if (day.isDisabled || this.disabled || this.readonly) {
            return;
        }
        const selectedDate = new Date(day.date);
        this.selectDate(selectedDate);
    }
    onMonthClick(month) {
        if (month.isDisabled) {
            return;
        }
        this.currentDate = new Date(month.year, month.number, 1);
        this.setView('day');
        this.monthChange.emit(new Date(this.currentDate));
    }
    onYearClick(year) {
        if (year.isDisabled) {
            return;
        }
        this.currentDate = new Date(year.year, this.currentDate.getMonth(), 1);
        this.setView('month');
        this.yearChange.emit(year.year);
    }
    onTodayClick() {
        const today = new Date();
        if (!this.isDateDisabled(today)) {
            this.selectDate(today);
            this.currentDate = new Date(today);
            this.generateCalendarDays();
        }
    }
    onClearClick() {
        this.selectDate(null);
    }
    onClearValue(event) {
        // Prevenir propagación del evento
        event.preventDefault();
        event.stopPropagation();
        if (!this.disabled) {
            this.selectDate(null);
        }
    }
    // Navigation methods
    navigatePrevious() {
        switch (this.currentView) {
            case 'day':
                this.currentDate = new Date(this.currentDate.getFullYear(), this.currentDate.getMonth() - 1, 1);
                this.generateCalendarDays();
                break;
            case 'month':
                this.currentDate = new Date(this.currentDate.getFullYear() - 1, this.currentDate.getMonth(), 1);
                this.generateCalendarMonths();
                break;
            case 'year':
                this.currentDate = new Date(this.currentDate.getFullYear() - 21, this.currentDate.getMonth(), 1);
                this.generateCalendarYears();
                break;
        }
        this.cdr.markForCheck();
    }
    navigateNext() {
        switch (this.currentView) {
            case 'day':
                this.currentDate = new Date(this.currentDate.getFullYear(), this.currentDate.getMonth() + 1, 1);
                this.generateCalendarDays();
                break;
            case 'month':
                this.currentDate = new Date(this.currentDate.getFullYear() + 1, this.currentDate.getMonth(), 1);
                this.generateCalendarMonths();
                break;
            case 'year':
                this.currentDate = new Date(this.currentDate.getFullYear() + 21, this.currentDate.getMonth(), 1);
                this.generateCalendarYears();
                break;
        }
        this.cdr.markForCheck();
    }
    setView(view) {
        this.currentView = view;
        this.viewChange.emit({
            view,
            date: new Date(this.currentDate),
            month: this.currentDate.getMonth(),
            year: this.currentDate.getFullYear()
        });
        this.cdr.markForCheck();
    }
    toggleCalendar() {
        this.isOpen = !this.isOpen;
        this.cdr.markForCheck();
    }
    closeCalendar() {
        this.isOpen = false;
        this.cdr.markForCheck();
    }
    // Date selection logic
    selectDate(date) {
        if (date === null) {
            this.selectedDates = [];
            this._value = null;
        }
        else if (this.mergedConfig.allowMultiSelect) {
            this.handleMultiSelect(date);
        }
        else if (this.mergedConfig.allowRangeSelect) {
            this.handleRangeSelect(date);
        }
        else {
            this.selectedDates = [date];
            this._value = date;
        }
        this.updateValue();
        if (this.mergedConfig.closeOnSelect && !this.mergedConfig.allowMultiSelect && !this.mergedConfig.allowRangeSelect) {
            this.closeCalendar();
        }
    }
    handleMultiSelect(date) {
        const existingIndex = this.selectedDates.findIndex(selectedDate => this.isSameDay(selectedDate, date));
        if (existingIndex > -1) {
            this.selectedDates.splice(existingIndex, 1);
        }
        else {
            this.selectedDates.push(date);
        }
        this._value = [...this.selectedDates];
    }
    handleRangeSelect(date) {
        if (this.selectedDates.length === 0 || this.selectedDates.length === 2) {
            this.selectedDates = [date];
        }
        else if (this.selectedDates.length === 1) {
            const startDate = this.selectedDates[0];
            if (date < startDate) {
                this.selectedDates = [date, startDate];
            }
            else {
                this.selectedDates = [startDate, date];
            }
        }
        this._value = [...this.selectedDates];
    }
    updateValue() {
        const selectEvent = {
            date: this.selectedDates[0] || new Date(),
            formattedDate: this.inputValue,
            selectedDates: [...this.selectedDates]
        };
        if (this.mergedConfig.allowRangeSelect && this.selectedDates.length === 2) {
            selectEvent.isRange = true;
            selectEvent.startDate = this.selectedDates[0];
            selectEvent.endDate = this.selectedDates[1];
        }
        this.onChange(this._value);
        this.dateSelect.emit(selectEvent);
        this.generateCalendarDays();
        this.cdr.markForCheck();
    }
    // Utility methods
    isSameDay(date1, date2) {
        return date1.getFullYear() === date2.getFullYear() &&
            date1.getMonth() === date2.getMonth() &&
            date1.getDate() === date2.getDate();
    }
    formatDate(date) {
        const day = date.getDate().toString();
        const month = date.getMonth();
        const year = date.getFullYear().toString();
        let formattedDate = this.mergedLocale.dateFormat;
        // Reemplazar día
        formattedDate = formattedDate.replace('dd', day);
        // Reemplazar mes (verificar si es formato largo o corto)
        if (formattedDate.includes('mmmm')) {
            // Mes completo en español
            formattedDate = formattedDate.replace('mmmm', this.mergedLocale.months[month].toLowerCase());
        }
        else if (formattedDate.includes('mmm')) {
            // Mes abreviado
            formattedDate = formattedDate.replace('mmm', this.mergedLocale.monthsShort[month]);
        }
        else if (formattedDate.includes('mm')) {
            // Mes numérico con padding
            formattedDate = formattedDate.replace('mm', (month + 1).toString().padStart(2, '0'));
        }
        else if (formattedDate.includes('m')) {
            // Mes numérico sin padding
            formattedDate = formattedDate.replace('m', (month + 1).toString());
        }
        // Reemplazar año
        formattedDate = formattedDate.replace('yyyy', year);
        return formattedDate;
    }
    getHeaderTitle() {
        switch (this.currentView) {
            case 'day':
                return `${this.mergedLocale.months[this.currentDate.getMonth()]} ${this.currentDate.getFullYear()}`;
            case 'month':
                return this.currentDate.getFullYear().toString();
            case 'year':
                const startYear = this.currentDate.getFullYear() - 10;
                const endYear = this.currentDate.getFullYear() + 10;
                return `${startYear} - ${endYear}`;
            default:
                return '';
        }
    }
    getWeekdays() {
        const weekdays = [...this.mergedLocale.weekdaysMin];
        const firstDay = this.mergedLocale.firstDayOfWeek;
        return [
            ...weekdays.slice(firstDay),
            ...weekdays.slice(0, firstDay)
        ];
    }
    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.13", ngImport: i0, type: SaCalendarComponent, deps: [{ token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component });
    static ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "18.2.13", type: SaCalendarComponent, selector: "sa-calendar", inputs: { size: "size", status: "status", label: "label", placeholder: "placeholder", helperText: "helperText", errorText: "errorText", required: "required", readonly: "readonly", disabled: "disabled", id: "id", name: "name", locale: "locale", colors: "colors", config: "config", validation: "validation", events: "events", inline: "inline", showInput: "showInput" }, outputs: { dateSelect: "dateSelect", viewChange: "viewChange", monthChange: "monthChange", yearChange: "yearChange", focus: "focus", blur: "blur" }, host: { listeners: { "document:click": "onDocumentClick($event)" } }, providers: [
            {
                provide: NG_VALUE_ACCESSOR,
                useExisting: forwardRef(() => SaCalendarComponent),
                multi: true
            }
        ], usesOnChanges: true, ngImport: i0, template: "<div class=\"sa-calendar-container\">\r\n  <!-- Input field (if not inline) -->\r\n  <div *ngIf=\"!inline\" class=\"calendar-input-container\">\r\n    <label *ngIf=\"label\" [for]=\"calendarId\" [class]=\"labelClasses\">\r\n      {{ label }}\r\n      <span *ngIf=\"required\" class=\"text-danger\">*</span>\r\n    </label>\r\n\r\n    <div class=\"position-relative\">\r\n      <input\r\n        [id]=\"calendarId\"\r\n        [name]=\"name\"\r\n        [class]=\"inputClasses\"\r\n        type=\"text\"\r\n        [value]=\"inputValue\"\r\n        [placeholder]=\"placeholder\"\r\n        [required]=\"required\"\r\n        readonly=\"true\"\r\n        [disabled]=\"disabled\"\r\n        spellcheck=\"false\"\r\n        autocomplete=\"off\"\r\n        (click)=\"onInputClick()\"\r\n        (focus)=\"onInputFocus($event)\"\r\n        (blur)=\"onInputBlur($event)\"\r\n      />\r\n      \r\n      <!-- Clear icon (X) cuando hay valor -->\r\n      <div \r\n        *ngIf=\"inputValue && !disabled\"\r\n        class=\"clear-icon\" \r\n        (click)=\"onClearValue($event)\"\r\n        title=\"Limpiar fecha\">\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n          <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\r\n          <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\r\n        </svg>\r\n      </div>\r\n\r\n      <!-- Calendar icon (cuando no hay valor o est\u00E1 deshabilitado) -->\r\n      <div \r\n        *ngIf=\"!inputValue || disabled\"\r\n        class=\"calendar-icon\" \r\n        [class.disabled]=\"disabled || readonly\"\r\n        (click)=\"onInputClick()\">\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n          <rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect>\r\n          <line x1=\"16\" y1=\"2\" x2=\"16\" y2=\"6\"></line>\r\n          <line x1=\"8\" y1=\"2\" x2=\"8\" y2=\"6\"></line>\r\n          <line x1=\"3\" y1=\"10\" x2=\"21\" y2=\"10\"></line>\r\n        </svg>\r\n      </div>\r\n    </div>\r\n\r\n    <div *ngIf=\"helperText && !errorText\" class=\"form-text\">{{ helperText }}</div>\r\n    <div *ngIf=\"errorText\" class=\"invalid-feedback d-block\">{{ errorText }}</div>\r\n  </div>\r\n\r\n  <!-- Calendar popup/inline -->\r\n  <div \r\n    class=\"calendar-popup\" \r\n    [class.inline]=\"inline\"\r\n    [class.open]=\"isOpen\"\r\n    [style.--primary-color]=\"mergedColors.primary\"\r\n    [style.--secondary-color]=\"mergedColors.secondary\"\r\n    [style.--success-color]=\"mergedColors.success\"\r\n    [style.--error-color]=\"mergedColors.error\"\r\n    [style.--background-color]=\"mergedColors.background\"\r\n    [style.--surface-color]=\"mergedColors.surface\"\r\n    [style.--border-color]=\"mergedColors.border\"\r\n    [style.--disabled-color]=\"mergedColors.disabled\"\r\n    [style.--hover-color]=\"mergedColors.hover\"\r\n    [style.--weekday-header-bg]=\"mergedColors.weekdayHeaderBg\"\r\n    [style.--weekday-header-color]=\"mergedColors.weekdayHeaderColor\"\r\n    *ngIf=\"inline || isOpen\">\r\n    \r\n    <!-- Calendar header -->\r\n    <div class=\"calendar-header\" *ngIf=\"mergedConfig.showHeader\">\r\n      <!-- Navigation -->\r\n      <div class=\"calendar-navigation\" *ngIf=\"mergedConfig.showNavigation\">\r\n        <button \r\n          type=\"button\" \r\n          class=\"nav-button prev\" \r\n          (click)=\"navigatePrevious()\"\r\n          [disabled]=\"disabled\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n            <polyline points=\"15,18 9,12 15,6\"></polyline>\r\n          </svg>\r\n        </button>\r\n\r\n        <div class=\"header-title-container\">\r\n          <button \r\n            type=\"button\" \r\n            class=\"header-title\"\r\n            (click)=\"currentView === 'day' ? setView('month') : currentView === 'month' ? setView('year') : null\"\r\n            [disabled]=\"disabled\">\r\n            {{ getHeaderTitle() }}\r\n          </button>\r\n        </div>\r\n\r\n        <button \r\n          type=\"button\" \r\n          class=\"nav-button next\" \r\n          (click)=\"navigateNext()\"\r\n          [disabled]=\"disabled\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n            <polyline points=\"9,18 15,12 9,6\"></polyline>\r\n          </svg>\r\n        </button>\r\n      </div>\r\n\r\n      <!-- Action buttons (ocultos por defecto para dise\u00F1o m\u00E1s limpio) -->\r\n      <div class=\"calendar-actions\" *ngIf=\"mergedConfig.showTodayButton || mergedConfig.showClearButton\">\r\n        <button \r\n          *ngIf=\"mergedConfig.showTodayButton\"\r\n          type=\"button\" \r\n          class=\"action-button today-button\"\r\n          (click)=\"onTodayClick()\"\r\n          [disabled]=\"disabled\">\r\n          {{ mergedLocale.today }}\r\n        </button>\r\n        \r\n        <button \r\n          *ngIf=\"mergedConfig.showClearButton\"\r\n          type=\"button\" \r\n          class=\"action-button clear-button\"\r\n          (click)=\"onClearClick()\"\r\n          [disabled]=\"disabled\">\r\n          {{ mergedLocale.clear }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Calendar content -->\r\n    <div class=\"calendar-content\">\r\n      <!-- Day view -->\r\n      <div class=\"calendar-days\" *ngIf=\"currentView === 'day'\">\r\n        <!-- Weekday headers -->\r\n        <div class=\"weekdays\">\r\n          <div \r\n            class=\"weekday-header\" \r\n            *ngFor=\"let weekday of getWeekdays()\">\r\n            {{ weekday }}\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Calendar grid -->\r\n        <div class=\"days-grid\">\r\n          <div \r\n            class=\"week-row\" \r\n            *ngFor=\"let week of calendarDays\">\r\n            <div \r\n              class=\"day-cell\"\r\n              *ngFor=\"let day of week\"\r\n              [class.today]=\"day.isToday && mergedConfig.highlightToday\"\r\n              [class.selected]=\"day.isSelected\"\r\n              [class.disabled]=\"day.isDisabled\"\r\n              [class.other-month]=\"!day.isInCurrentMonth\"\r\n              [class.weekend]=\"day.isWeekend && mergedConfig.highlightWeekends\"\r\n              [class.has-event]=\"day.hasEvent\"\r\n              (click)=\"onDayClick(day)\">\r\n              <span class=\"day-number\">{{ day.day }}</span>\r\n              <div *ngIf=\"day.hasEvent\" class=\"event-indicator\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Month view -->\r\n      <div class=\"calendar-months\" *ngIf=\"currentView === 'month'\">\r\n        <div class=\"months-grid\">\r\n          <div \r\n            class=\"month-cell\"\r\n            *ngFor=\"let month of calendarMonths\"\r\n            [class.selected]=\"month.isSelected\"\r\n            [class.disabled]=\"month.isDisabled\"\r\n            [class.current]=\"month.isCurrent\"\r\n            (click)=\"onMonthClick(month)\">\r\n            {{ month.name }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Year view -->\r\n      <div class=\"calendar-years\" *ngIf=\"currentView === 'year'\">\r\n        <div class=\"years-grid\">\r\n          <div \r\n            class=\"year-cell\"\r\n            *ngFor=\"let year of calendarYears\"\r\n            [class.selected]=\"year.isSelected\"\r\n            [class.disabled]=\"year.isDisabled\"\r\n            [class.current]=\"year.isCurrent\"\r\n            (click)=\"onYearClick(year)\">\r\n            {{ year.year }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n", styles: ["@charset \"UTF-8\";@import\"https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap\";:root{--sanna-font-family: Plus Jakarta Sans, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, sans-serif;--sanna-font-light: Plus Jakarta Sans, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, sans-serif;--sanna-font-regular: Plus Jakarta Sans, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, sans-serif;--sanna-font-medium: Plus Jakarta Sans, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, sans-serif;--sanna-font-semibold: Plus Jakarta Sans, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, sans-serif;--sanna-font-bold: Plus Jakarta Sans, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, sans-serif}.sanna-component{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif!important;font-optical-sizing:auto;font-style:normal;font-weight:400!important}.sanna-font-light{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif!important;font-optical-sizing:auto;font-style:normal;font-weight:300!important}.sanna-font-regular{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif!important;font-optical-sizing:auto;font-style:normal;font-weight:400!important}.sanna-font-medium,.sanna-font-semibold{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif!important;font-optical-sizing:auto;font-style:normal;font-weight:500!important}.sanna-font-bold{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif!important;font-optical-sizing:auto;font-style:normal;font-weight:700!important}[class*=sa-],[class^=sanna-]{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif!important;font-optical-sizing:auto;font-style:normal;font-weight:400!important}:host{display:block;width:100%;font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;box-sizing:border-box;--primary-color: #36AD55;--secondary-color: #6c757d;--success-color: #32A047;--error-color: #ef4444;--warning-color: #f59e0b;--info-color: #3b82f6;--light-color: #f8f9fa;--dark-color: #212529;--background-color: #ffffff;--surface-color: #f8f9fa;--on-primary-color: #ffffff;--on-surface-color: #212529;--border-color: #dee2e6;--disabled-color: #e9ecef;--hover-color: #e9ecef;--weekday-header-bg: #f8f9fa;--weekday-header-color: #212529;--transition-duration: .2s;--border-radius: .375rem;--box-shadow: 0 .125rem .25rem rgba(0, 0, 0, .075);--box-shadow-focus: 0 0 0 .2rem rgba(54, 173, 85, .25)}.sa-calendar-container{position:relative;width:100%}.calendar-input-container{width:100%;margin-bottom:0}.form-label{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;color:var(--on-surface-color);font-size:14px;font-weight:400!important;margin-bottom:2px;display:inline-block}.form-label.label-sm{font-size:11px!important}.form-label.label-md{font-size:14px!important}.form-label.label-lg{font-size:16px!important}.position-relative{position:relative}.calendar-input{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;display:block;width:100%;padding:.375rem .75rem;font-size:16px;font-weight:400;line-height:1.5;color:var(--on-surface-color);background-color:var(--background-color);background-clip:padding-box;border:1px solid var(--border-color);border-radius:var(--border-radius);transition:border-color var(--transition-duration) ease-in-out,box-shadow var(--transition-duration) ease-in-out;box-sizing:border-box;cursor:pointer;padding-right:2.5rem!important}.calendar-input:focus{outline:none!important;box-shadow:inset 0 0 0 2px var(--primary-color)!important;border-color:transparent!important}.calendar-input:disabled{background-color:var(--disabled-color);opacity:1;cursor:default}.calendar-input:read-only{background-color:#fff!important;cursor:pointer}.calendar-input.is-valid{border-color:var(--success-color)}.calendar-input.is-valid:focus{box-shadow:inset 0 0 0 2px var(--success-color)!important;border-color:transparent!important}.calendar-input.is-invalid{border-color:var(--error-color)}.calendar-input.is-invalid:focus{box-shadow:inset 0 0 0 2px var(--error-color)!important;border-color:transparent!important}.calendar-input.form-control-sm{min-height:calc(1.5em + .5rem + 2px);padding:4.125px 8.25px!important;padding-right:2.25rem!important;font-size:11px!important;border-radius:.25rem}.calendar-input.form-control-lg{min-height:calc(1.5em + 1rem + 2px);padding:.5rem 1rem;padding-right:3rem!important;font-size:20px;border-radius:.5rem}.calendar-icon{position:absolute;top:50%;right:.75rem;transform:translateY(-50%);width:20px;height:20px;cursor:pointer;pointer-events:all;z-index:10;display:flex;align-items:center;justify-content:center;color:var(--secondary-color);transition:color var(--transition-duration) ease-in-out}.calendar-icon svg{width:16px;height:16px;stroke:currentColor}.calendar-icon:hover{color:var(--primary-color)}.calendar-icon.disabled{color:var(--disabled-color);cursor:default;pointer-events:none}.clear-icon{position:absolute;top:50%;right:.75rem;transform:translateY(-50%);width:20px;height:20px;cursor:pointer;pointer-events:all;z-index:10;display:flex;align-items:center;justify-content:center;transition:color var(--transition-duration) ease-in-out,background-color var(--transition-duration) ease-in-out;border-radius:50%;color:var(--error-color)}.clear-icon svg{width:14px;height:14px;stroke:currentColor}.clear-icon:hover{background-color:#ef44441a}.form-control-sm~.calendar-icon,.form-control-sm~.clear-icon{right:.5rem;width:18px;height:18px}.form-control-sm~.calendar-icon svg,.form-control-sm~.clear-icon svg{width:14px;height:14px}.form-control-lg~.calendar-icon,.form-control-lg~.clear-icon{right:1rem;width:24px;height:24px}.form-control-lg~.calendar-icon svg,.form-control-lg~.clear-icon svg{width:20px;height:20px}.calendar-popup{position:absolute;top:100%;left:0;z-index:1000;background:var(--background-color);border:1px solid var(--border-color);border-radius:8px;box-shadow:0 8px 24px #0000001f;margin-top:4px;opacity:0;transform:translateY(-10px);visibility:hidden;transition:opacity var(--transition-duration) ease-in-out,transform var(--transition-duration) ease-in-out,visibility var(--transition-duration) ease-in-out;width:220px;max-width:90vw}.calendar-popup.open{opacity:1;transform:translateY(0);visibility:visible}.calendar-popup.inline{position:static;opacity:1;transform:none;visibility:visible;margin-top:0;box-shadow:none;border:1px solid var(--border-color)}.calendar-header{padding:1rem 1rem .5rem;border-bottom:1px solid var(--border-color);background:var(--background-color);border-radius:8px 8px 0 0}.calendar-navigation{display:flex;align-items:center;justify-content:space-between;margin-bottom:.5rem}.nav-button{display:flex;align-items:center;justify-content:center;width:28px;height:28px;border:none;background:transparent;color:var(--secondary-color);border-radius:6px;cursor:pointer;transition:background-color var(--transition-duration) ease-in-out,color var(--transition-duration) ease-in-out}.nav-button svg{width:14px;height:14px}.nav-button:hover:not(:disabled){background:var(--hover-color);color:var(--on-surface-color)}.nav-button:disabled{opacity:.3;cursor:not-allowed}.header-title-container{flex:1;text-align:center;display:flex;justify-content:center;align-items:center}.header-title{background:none;border:none;font-size:12px;font-weight:500;color:var(--on-surface-color);cursor:pointer;padding:.25rem .75rem;border-radius:6px;transition:background-color var(--transition-duration) ease-in-out;min-width:80px;min-height:32px;display:flex;align-items:center;justify-content:center}.header-title:hover:not(:disabled){background:var(--hover-color)}.header-title:disabled{cursor:default}.calendar-actions{display:none;gap:.5rem;justify-content:center;margin-top:.5rem}.action-button{padding:.375rem .75rem;font-size:14px;border:1px solid var(--border-color);background:var(--background-color);color:var(--on-surface-color);border-radius:var(--border-radius);cursor:pointer;transition:background-color var(--transition-duration) ease-in-out,border-color var(--transition-duration) ease-in-out,color var(--transition-duration) ease-in-out}.action-button:hover:not(:disabled){background:var(--primary-color);border-color:var(--primary-color);color:var(--on-primary-color)}.action-button:disabled{opacity:.5;cursor:not-allowed}.calendar-content{padding:.5rem .75rem .75rem}.calendar-days .weekdays{display:grid;grid-template-columns:repeat(7,1fr);gap:0;margin-bottom:6px;background-color:#f5f5f5;border-radius:4px;padding:.375rem 0}.calendar-days .weekday-header{text-align:center;font-size:10px;font-weight:800;color:var(--weekday-header-color);background-color:transparent;padding:0;text-transform:uppercase;letter-spacing:.3px}.calendar-days .days-grid .week-row{display:grid;grid-template-columns:repeat(7,1fr);gap:2px;margin-bottom:2px}.calendar-days .day-cell{position:relative;display:flex;align-items:center;justify-content:center;min-height:26px;width:100%;max-width:26px;margin:0 auto;border-radius:4px;cursor:pointer;transition:background-color var(--transition-duration) ease-in-out,color var(--transition-duration) ease-in-out,transform var(--transition-duration) ease-in-out;-webkit-user-select:none;user-select:none}.calendar-days .day-cell .day-number{font-size:11px;font-weight:400;z-index:1}.calendar-days .day-cell .event-indicator{position:absolute;bottom:4px;left:50%;transform:translate(-50%);width:4px;height:4px;background:var(--primary-color);border-radius:50%}.calendar-days .day-cell:hover:not(.disabled){background:var(--hover-color)}.calendar-days .day-cell.today{background:transparent;position:relative}.calendar-days .day-cell.today .day-number{color:var(--primary-color);font-weight:600}.calendar-days .day-cell.today:after{content:\"\";position:absolute;bottom:4px;left:50%;transform:translate(-50%);width:4px;height:4px;background-color:var(--primary-color);border-radius:50%}.calendar-days .day-cell.selected{background:var(--primary-color);color:var(--on-primary-color);font-weight:500}.calendar-days .day-cell.selected .day-number{font-weight:500;color:var(--on-primary-color)}.calendar-days .day-cell.selected:hover{background:var(--primary-color);opacity:.9}.calendar-days .day-cell.today.selected{background:var(--primary-color);color:var(--on-primary-color)}.calendar-days .day-cell.today.selected .day-number{color:var(--on-primary-color);font-weight:600}.calendar-days .day-cell.today.selected:after{display:none}.calendar-days .day-cell.disabled{opacity:.4;cursor:not-allowed}.calendar-days .day-cell.disabled:hover{background:transparent;transform:none}.calendar-days .day-cell.weekend{color:var(--error-color)}.calendar-days .day-cell.weekend .day-number{font-weight:500}.calendar-days .day-cell.has-event{background:#36ad551a}.calendar-days .day-cell.has-event:not(.selected):not(.today){border:1px solid var(--primary-color)}.calendar-months .months-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}.calendar-months .month-cell{display:flex;align-items:center;justify-content:center;min-height:40px;border-radius:var(--border-radius);cursor:pointer;transition:background-color var(--transition-duration) ease-in-out,color var(--transition-duration) ease-in-out,transform var(--transition-duration) ease-in-out;-webkit-user-select:none;user-select:none;font-size:11px;font-weight:500}.calendar-months .month-cell:hover:not(.disabled):not(.current):not(.selected){background:var(--hover-color)}.calendar-months .month-cell.current{background:var(--primary-color);color:var(--on-primary-color)}.calendar-months .month-cell.current:hover{background:var(--primary-color);opacity:.9}.calendar-months .month-cell.selected{background:var(--primary-color);color:var(--on-primary-color);font-weight:600}.calendar-months .month-cell.selected:hover{background:var(--primary-color);opacity:.9}.calendar-months .month-cell.disabled{opacity:.4;cursor:not-allowed}.calendar-months .month-cell.disabled:hover{background:transparent;transform:none}.calendar-years .years-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}.calendar-years .year-cell{display:flex;align-items:center;justify-content:center;min-height:40px;border-radius:var(--border-radius);cursor:pointer;transition:background-color var(--transition-duration) ease-in-out,color var(--transition-duration) ease-in-out,transform var(--transition-duration) ease-in-out;-webkit-user-select:none;user-select:none;font-size:11px;font-weight:500}.calendar-years .year-cell:hover:not(.disabled):not(.current):not(.selected){background:var(--hover-color)}.calendar-years .year-cell.current{background:var(--primary-color);color:var(--on-primary-color)}.calendar-years .year-cell.current:hover{background:var(--primary-color);opacity:.9}.calendar-years .year-cell.selected{background:var(--primary-color);color:var(--on-primary-color);font-weight:600}.calendar-years .year-cell.selected:hover{background:var(--primary-color);opacity:.9;transform:scale(1.02)}.calendar-years .year-cell.disabled{opacity:.4;cursor:not-allowed}.calendar-years .year-cell.disabled:hover{background:transparent;transform:none}.form-text{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;font-size:12px;color:var(--secondary-color);margin-top:.25rem}.invalid-feedback{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;font-size:12px;margin-top:.25rem;color:var(--error-color);display:block}.text-danger{color:var(--error-color)!important}@media (max-width: 576px){.calendar-popup{left:50%;transform:translate(-50%);width:200px;max-width:calc(100vw - 2rem)}.calendar-popup.open{transform:translate(-50%) translateY(0)}.calendar-header{padding:.75rem .75rem .5rem}.calendar-content{padding:.375rem .5rem .5rem}.header-title{min-width:70px;min-height:30px;padding:.5rem .75rem;font-size:11px}.day-cell{min-height:24px;width:100%;max-width:24px}.day-cell .day-number{font-size:10px}.months-grid{grid-template-columns:repeat(2,1fr)!important}.years-grid{grid-template-columns:repeat(3,1fr)!important}}@keyframes fadeInUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.calendar-popup.open{animation:fadeInUp var(--transition-duration) ease-out}:host(.theme-dark){--background-color: #1f2937;--surface-color: #374151;--on-surface-color: #f9fafb;--border-color: #4b5563;--disabled-color: #374151;--hover-color: #4b5563;--secondary-color: #9ca3af}:host(.theme-compact) .day-cell{min-height:28px}:host(.theme-compact) .calendar-header{padding:.5rem}:host(.theme-compact) .calendar-content{padding:.5rem}:host(.size-sm) .calendar-popup{min-width:240px}:host(.size-sm) .day-cell{min-height:28px}:host(.size-sm) .month-cell,:host(.size-sm) .year-cell{min-height:32px;font-size:10px}:host(.size-lg) .calendar-popup{min-width:320px}:host(.size-lg) .day-cell{min-height:44px}:host(.size-lg) .month-cell,:host(.size-lg) .year-cell{min-height:56px;font-size:16px}\n"], dependencies: [{ kind: "directive", type: i1.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.ShadowDom });
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.13", ngImport: i0, type: SaCalendarComponent, decorators: [{
            type: Component,
            args: [{ selector: 'sa-calendar', encapsulation: ViewEncapsulation.ShadowDom, changeDetection: ChangeDetectionStrategy.OnPush, providers: [
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef(() => SaCalendarComponent),
                            multi: true
                        }
                    ], template: "<div class=\"sa-calendar-container\">\r\n  <!-- Input field (if not inline) -->\r\n  <div *ngIf=\"!inline\" class=\"calendar-input-container\">\r\n    <label *ngIf=\"label\" [for]=\"calendarId\" [class]=\"labelClasses\">\r\n      {{ label }}\r\n      <span *ngIf=\"required\" class=\"text-danger\">*</span>\r\n    </label>\r\n\r\n    <div class=\"position-relative\">\r\n      <input\r\n        [id]=\"calendarId\"\r\n        [name]=\"name\"\r\n        [class]=\"inputClasses\"\r\n        type=\"text\"\r\n        [value]=\"inputValue\"\r\n        [placeholder]=\"placeholder\"\r\n        [required]=\"required\"\r\n        readonly=\"true\"\r\n        [disabled]=\"disabled\"\r\n        spellcheck=\"false\"\r\n        autocomplete=\"off\"\r\n        (click)=\"onInputClick()\"\r\n        (focus)=\"onInputFocus($event)\"\r\n        (blur)=\"onInputBlur($event)\"\r\n      />\r\n      \r\n      <!-- Clear icon (X) cuando hay valor -->\r\n      <div \r\n        *ngIf=\"inputValue && !disabled\"\r\n        class=\"clear-icon\" \r\n        (click)=\"onClearValue($event)\"\r\n        title=\"Limpiar fecha\">\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n          <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\r\n          <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\r\n        </svg>\r\n      </div>\r\n\r\n      <!-- Calendar icon (cuando no hay valor o est\u00E1 deshabilitado) -->\r\n      <div \r\n        *ngIf=\"!inputValue || disabled\"\r\n        class=\"calendar-icon\" \r\n        [class.disabled]=\"disabled || readonly\"\r\n        (click)=\"onInputClick()\">\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n          <rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect>\r\n          <line x1=\"16\" y1=\"2\" x2=\"16\" y2=\"6\"></line>\r\n          <line x1=\"8\" y1=\"2\" x2=\"8\" y2=\"6\"></line>\r\n          <line x1=\"3\" y1=\"10\" x2=\"21\" y2=\"10\"></line>\r\n        </svg>\r\n      </div>\r\n    </div>\r\n\r\n    <div *ngIf=\"helperText && !errorText\" class=\"form-text\">{{ helperText }}</div>\r\n    <div *ngIf=\"errorText\" class=\"invalid-feedback d-block\">{{ errorText }}</div>\r\n  </div>\r\n\r\n  <!-- Calendar popup/inline -->\r\n  <div \r\n    class=\"calendar-popup\" \r\n    [class.inline]=\"inline\"\r\n    [class.open]=\"isOpen\"\r\n    [style.--primary-color]=\"mergedColors.primary\"\r\n    [style.--secondary-color]=\"mergedColors.secondary\"\r\n    [style.--success-color]=\"mergedColors.success\"\r\n    [style.--error-color]=\"mergedColors.error\"\r\n    [style.--background-color]=\"mergedColors.background\"\r\n    [style.--surface-color]=\"mergedColors.surface\"\r\n    [style.--border-color]=\"mergedColors.border\"\r\n    [style.--disabled-color]=\"mergedColors.disabled\"\r\n    [style.--hover-color]=\"mergedColors.hover\"\r\n    [style.--weekday-header-bg]=\"mergedColors.weekdayHeaderBg\"\r\n    [style.--weekday-header-color]=\"mergedColors.weekdayHeaderColor\"\r\n    *ngIf=\"inline || isOpen\">\r\n    \r\n    <!-- Calendar header -->\r\n    <div class=\"calendar-header\" *ngIf=\"mergedConfig.showHeader\">\r\n      <!-- Navigation -->\r\n      <div class=\"calendar-navigation\" *ngIf=\"mergedConfig.showNavigation\">\r\n        <button \r\n          type=\"button\" \r\n          class=\"nav-button prev\" \r\n          (click)=\"navigatePrevious()\"\r\n          [disabled]=\"disabled\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n            <polyline points=\"15,18 9,12 15,6\"></polyline>\r\n          </svg>\r\n        </button>\r\n\r\n        <div class=\"header-title-container\">\r\n          <button \r\n            type=\"button\" \r\n            class=\"header-title\"\r\n            (click)=\"currentView === 'day' ? setView('month') : currentView === 'month' ? setView('year') : null\"\r\n            [disabled]=\"disabled\">\r\n            {{ getHeaderTitle() }}\r\n          </button>\r\n        </div>\r\n\r\n        <button \r\n          type=\"button\" \r\n          class=\"nav-button next\" \r\n          (click)=\"navigateNext()\"\r\n          [disabled]=\"disabled\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n            <polyline points=\"9,18 15,12 9,6\"></polyline>\r\n          </svg>\r\n        </button>\r\n      </div>\r\n\r\n      <!-- Action buttons (ocultos por defecto para dise\u00F1o m\u00E1s limpio) -->\r\n      <div class=\"calendar-actions\" *ngIf=\"mergedConfig.showTodayButton || mergedConfig.showClearButton\">\r\n        <button \r\n          *ngIf=\"mergedConfig.showTodayButton\"\r\n          type=\"button\" \r\n          class=\"action-button today-button\"\r\n          (click)=\"onTodayClick()\"\r\n          [disabled]=\"disabled\">\r\n          {{ mergedLocale.today }}\r\n        </button>\r\n        \r\n        <button \r\n          *ngIf=\"mergedConfig.showClearButton\"\r\n          type=\"button\" \r\n          class=\"action-button clear-button\"\r\n          (click)=\"onClearClick()\"\r\n          [disabled]=\"disabled\">\r\n          {{ mergedLocale.clear }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Calendar content -->\r\n    <div class=\"calendar-content\">\r\n      <!-- Day view -->\r\n      <div class=\"calendar-days\" *ngIf=\"currentView === 'day'\">\r\n        <!-- Weekday headers -->\r\n        <div class=\"weekdays\">\r\n          <div \r\n            class=\"weekday-header\" \r\n            *ngFor=\"let weekday of getWeekdays()\">\r\n            {{ weekday }}\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Calendar grid -->\r\n        <div class=\"days-grid\">\r\n          <div \r\n            class=\"week-row\" \r\n            *ngFor=\"let week of calendarDays\">\r\n            <div \r\n              class=\"day-cell\"\r\n              *ngFor=\"let day of week\"\r\n              [class.today]=\"day.isToday && mergedConfig.highlightToday\"\r\n              [class.selected]=\"day.isSelected\"\r\n              [class.disabled]=\"day.isDisabled\"\r\n              [class.other-month]=\"!day.isInCurrentMonth\"\r\n              [class.weekend]=\"day.isWeekend && mergedConfig.highlightWeekends\"\r\n              [class.has-event]=\"day.hasEvent\"\r\n              (click)=\"onDayClick(day)\">\r\n              <span class=\"day-number\">{{ day.day }}</span>\r\n              <div *ngIf=\"day.hasEvent\" class=\"event-indicator\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Month view -->\r\n      <div class=\"calendar-months\" *ngIf=\"currentView === 'month'\">\r\n        <div class=\"months-grid\">\r\n          <div \r\n            class=\"month-cell\"\r\n            *ngFor=\"let month of calendarMonths\"\r\n            [class.selected]=\"month.isSelected\"\r\n            [class.disabled]=\"month.isDisabled\"\r\n            [class.current]=\"month.isCurrent\"\r\n            (click)=\"onMonthClick(month)\">\r\n            {{ month.name }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Year view -->\r\n      <div class=\"calendar-years\" *ngIf=\"currentView === 'year'\">\r\n        <div class=\"years-grid\">\r\n          <div \r\n            class=\"year-cell\"\r\n            *ngFor=\"let year of calendarYears\"\r\n            [class.selected]=\"year.isSelected\"\r\n            [class.disabled]=\"year.isDisabled\"\r\n            [class.current]=\"year.isCurrent\"\r\n            (click)=\"onYearClick(year)\">\r\n            {{ year.year }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n", styles: ["@charset \"UTF-8\";@import\"https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap\";:root{--sanna-font-family: Plus Jakarta Sans, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, sans-serif;--sanna-font-light: Plus Jakarta Sans, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, sans-serif;--sanna-font-regular: Plus Jakarta Sans, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, sans-serif;--sanna-font-medium: Plus Jakarta Sans, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, sans-serif;--sanna-font-semibold: Plus Jakarta Sans, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, sans-serif;--sanna-font-bold: Plus Jakarta Sans, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, sans-serif}.sanna-component{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif!important;font-optical-sizing:auto;font-style:normal;font-weight:400!important}.sanna-font-light{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif!important;font-optical-sizing:auto;font-style:normal;font-weight:300!important}.sanna-font-regular{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif!important;font-optical-sizing:auto;font-style:normal;font-weight:400!important}.sanna-font-medium,.sanna-font-semibold{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif!important;font-optical-sizing:auto;font-style:normal;font-weight:500!important}.sanna-font-bold{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif!important;font-optical-sizing:auto;font-style:normal;font-weight:700!important}[class*=sa-],[class^=sanna-]{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif!important;font-optical-sizing:auto;font-style:normal;font-weight:400!important}:host{display:block;width:100%;font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;box-sizing:border-box;--primary-color: #36AD55;--secondary-color: #6c757d;--success-color: #32A047;--error-color: #ef4444;--warning-color: #f59e0b;--info-color: #3b82f6;--light-color: #f8f9fa;--dark-color: #212529;--background-color: #ffffff;--surface-color: #f8f9fa;--on-primary-color: #ffffff;--on-surface-color: #212529;--border-color: #dee2e6;--disabled-color: #e9ecef;--hover-color: #e9ecef;--weekday-header-bg: #f8f9fa;--weekday-header-color: #212529;--transition-duration: .2s;--border-radius: .375rem;--box-shadow: 0 .125rem .25rem rgba(0, 0, 0, .075);--box-shadow-focus: 0 0 0 .2rem rgba(54, 173, 85, .25)}.sa-calendar-container{position:relative;width:100%}.calendar-input-container{width:100%;margin-bottom:0}.form-label{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;color:var(--on-surface-color);font-size:14px;font-weight:400!important;margin-bottom:2px;display:inline-block}.form-label.label-sm{font-size:11px!important}.form-label.label-md{font-size:14px!important}.form-label.label-lg{font-size:16px!important}.position-relative{position:relative}.calendar-input{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;display:block;width:100%;padding:.375rem .75rem;font-size:16px;font-weight:400;line-height:1.5;color:var(--on-surface-color);background-color:var(--background-color);background-clip:padding-box;border:1px solid var(--border-color);border-radius:var(--border-radius);transition:border-color var(--transition-duration) ease-in-out,box-shadow var(--transition-duration) ease-in-out;box-sizing:border-box;cursor:pointer;padding-right:2.5rem!important}.calendar-input:focus{outline:none!important;box-shadow:inset 0 0 0 2px var(--primary-color)!important;border-color:transparent!important}.calendar-input:disabled{background-color:var(--disabled-color);opacity:1;cursor:default}.calendar-input:read-only{background-color:#fff!important;cursor:pointer}.calendar-input.is-valid{border-color:var(--success-color)}.calendar-input.is-valid:focus{box-shadow:inset 0 0 0 2px var(--success-color)!important;border-color:transparent!important}.calendar-input.is-invalid{border-color:var(--error-color)}.calendar-input.is-invalid:focus{box-shadow:inset 0 0 0 2px var(--error-color)!important;border-color:transparent!important}.calendar-input.form-control-sm{min-height:calc(1.5em + .5rem + 2px);padding:4.125px 8.25px!important;padding-right:2.25rem!important;font-size:11px!important;border-radius:.25rem}.calendar-input.form-control-lg{min-height:calc(1.5em + 1rem + 2px);padding:.5rem 1rem;padding-right:3rem!important;font-size:20px;border-radius:.5rem}.calendar-icon{position:absolute;top:50%;right:.75rem;transform:translateY(-50%);width:20px;height:20px;cursor:pointer;pointer-events:all;z-index:10;display:flex;align-items:center;justify-content:center;color:var(--secondary-color);transition:color var(--transition-duration) ease-in-out}.calendar-icon svg{width:16px;height:16px;stroke:currentColor}.calendar-icon:hover{color:var(--primary-color)}.calendar-icon.disabled{color:var(--disabled-color);cursor:default;pointer-events:none}.clear-icon{position:absolute;top:50%;right:.75rem;transform:translateY(-50%);width:20px;height:20px;cursor:pointer;pointer-events:all;z-index:10;display:flex;align-items:center;justify-content:center;transition:color var(--transition-duration) ease-in-out,background-color var(--transition-duration) ease-in-out;border-radius:50%;color:var(--error-color)}.clear-icon svg{width:14px;height:14px;stroke:currentColor}.clear-icon:hover{background-color:#ef44441a}.form-control-sm~.calendar-icon,.form-control-sm~.clear-icon{right:.5rem;width:18px;height:18px}.form-control-sm~.calendar-icon svg,.form-control-sm~.clear-icon svg{width:14px;height:14px}.form-control-lg~.calendar-icon,.form-control-lg~.clear-icon{right:1rem;width:24px;height:24px}.form-control-lg~.calendar-icon svg,.form-control-lg~.clear-icon svg{width:20px;height:20px}.calendar-popup{position:absolute;top:100%;left:0;z-index:1000;background:var(--background-color);border:1px solid var(--border-color);border-radius:8px;box-shadow:0 8px 24px #0000001f;margin-top:4px;opacity:0;transform:translateY(-10px);visibility:hidden;transition:opacity var(--transition-duration) ease-in-out,transform var(--transition-duration) ease-in-out,visibility var(--transition-duration) ease-in-out;width:220px;max-width:90vw}.calendar-popup.open{opacity:1;transform:translateY(0);visibility:visible}.calendar-popup.inline{position:static;opacity:1;transform:none;visibility:visible;margin-top:0;box-shadow:none;border:1px solid var(--border-color)}.calendar-header{padding:1rem 1rem .5rem;border-bottom:1px solid var(--border-color);background:var(--background-color);border-radius:8px 8px 0 0}.calendar-navigation{display:flex;align-items:center;justify-content:space-between;margin-bottom:.5rem}.nav-button{display:flex;align-items:center;justify-content:center;width:28px;height:28px;border:none;background:transparent;color:var(--secondary-color);border-radius:6px;cursor:pointer;transition:background-color var(--transition-duration) ease-in-out,color var(--transition-duration) ease-in-out}.nav-button svg{width:14px;height:14px}.nav-button:hover:not(:disabled){background:var(--hover-color);color:var(--on-surface-color)}.nav-button:disabled{opacity:.3;cursor:not-allowed}.header-title-container{flex:1;text-align:center;display:flex;justify-content:center;align-items:center}.header-title{background:none;border:none;font-size:12px;font-weight:500;color:var(--on-surface-color);cursor:pointer;padding:.25rem .75rem;border-radius:6px;transition:background-color var(--transition-duration) ease-in-out;min-width:80px;min-height:32px;display:flex;align-items:center;justify-content:center}.header-title:hover:not(:disabled){background:var(--hover-color)}.header-title:disabled{cursor:default}.calendar-actions{display:none;gap:.5rem;justify-content:center;margin-top:.5rem}.action-button{padding:.375rem .75rem;font-size:14px;border:1px solid var(--border-color);background:var(--background-color);color:var(--on-surface-color);border-radius:var(--border-radius);cursor:pointer;transition:background-color var(--transition-duration) ease-in-out,border-color var(--transition-duration) ease-in-out,color var(--transition-duration) ease-in-out}.action-button:hover:not(:disabled){background:var(--primary-color);border-color:var(--primary-color);color:var(--on-primary-color)}.action-button:disabled{opacity:.5;cursor:not-allowed}.calendar-content{padding:.5rem .75rem .75rem}.calendar-days .weekdays{display:grid;grid-template-columns:repeat(7,1fr);gap:0;margin-bottom:6px;background-color:#f5f5f5;border-radius:4px;padding:.375rem 0}.calendar-days .weekday-header{text-align:center;font-size:10px;font-weight:800;color:var(--weekday-header-color);background-color:transparent;padding:0;text-transform:uppercase;letter-spacing:.3px}.calendar-days .days-grid .week-row{display:grid;grid-template-columns:repeat(7,1fr);gap:2px;margin-bottom:2px}.calendar-days .day-cell{position:relative;display:flex;align-items:center;justify-content:center;min-height:26px;width:100%;max-width:26px;margin:0 auto;border-radius:4px;cursor:pointer;transition:background-color var(--transition-duration) ease-in-out,color var(--transition-duration) ease-in-out,transform var(--transition-duration) ease-in-out;-webkit-user-select:none;user-select:none}.calendar-days .day-cell .day-number{font-size:11px;font-weight:400;z-index:1}.calendar-days .day-cell .event-indicator{position:absolute;bottom:4px;left:50%;transform:translate(-50%);width:4px;height:4px;background:var(--primary-color);border-radius:50%}.calendar-days .day-cell:hover:not(.disabled){background:var(--hover-color)}.calendar-days .day-cell.today{background:transparent;position:relative}.calendar-days .day-cell.today .day-number{color:var(--primary-color);font-weight:600}.calendar-days .day-cell.today:after{content:\"\";position:absolute;bottom:4px;left:50%;transform:translate(-50%);width:4px;height:4px;background-color:var(--primary-color);border-radius:50%}.calendar-days .day-cell.selected{background:var(--primary-color);color:var(--on-primary-color);font-weight:500}.calendar-days .day-cell.selected .day-number{font-weight:500;color:var(--on-primary-color)}.calendar-days .day-cell.selected:hover{background:var(--primary-color);opacity:.9}.calendar-days .day-cell.today.selected{background:var(--primary-color);color:var(--on-primary-color)}.calendar-days .day-cell.today.selected .day-number{color:var(--on-primary-color);font-weight:600}.calendar-days .day-cell.today.selected:after{display:none}.calendar-days .day-cell.disabled{opacity:.4;cursor:not-allowed}.calendar-days .day-cell.disabled:hover{background:transparent;transform:none}.calendar-days .day-cell.weekend{color:var(--error-color)}.calendar-days .day-cell.weekend .day-number{font-weight:500}.calendar-days .day-cell.has-event{background:#36ad551a}.calendar-days .day-cell.has-event:not(.selected):not(.today){border:1px solid var(--primary-color)}.calendar-months .months-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}.calendar-months .month-cell{display:flex;align-items:center;justify-content:center;min-height:40px;border-radius:var(--border-radius);cursor:pointer;transition:background-color var(--transition-duration) ease-in-out,color var(--transition-duration) ease-in-out,transform var(--transition-duration) ease-in-out;-webkit-user-select:none;user-select:none;font-size:11px;font-weight:500}.calendar-months .month-cell:hover:not(.disabled):not(.current):not(.selected){background:var(--hover-color)}.calendar-months .month-cell.current{background:var(--primary-color);color:var(--on-primary-color)}.calendar-months .month-cell.current:hover{background:var(--primary-color);opacity:.9}.calendar-months .month-cell.selected{background:var(--primary-color);color:var(--on-primary-color);font-weight:600}.calendar-months .month-cell.selected:hover{background:var(--primary-color);opacity:.9}.calendar-months .month-cell.disabled{opacity:.4;cursor:not-allowed}.calendar-months .month-cell.disabled:hover{background:transparent;transform:none}.calendar-years .years-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}.calendar-years .year-cell{display:flex;align-items:center;justify-content:center;min-height:40px;border-radius:var(--border-radius);cursor:pointer;transition:background-color var(--transition-duration) ease-in-out,color var(--transition-duration) ease-in-out,transform var(--transition-duration) ease-in-out;-webkit-user-select:none;user-select:none;font-size:11px;font-weight:500}.calendar-years .year-cell:hover:not(.disabled):not(.current):not(.selected){background:var(--hover-color)}.calendar-years .year-cell.current{background:var(--primary-color);color:var(--on-primary-color)}.calendar-years .year-cell.current:hover{background:var(--primary-color);opacity:.9}.calendar-years .year-cell.selected{background:var(--primary-color);color:var(--on-primary-color);font-weight:600}.calendar-years .year-cell.selected:hover{background:var(--primary-color);opacity:.9;transform:scale(1.02)}.calendar-years .year-cell.disabled{opacity:.4;cursor:not-allowed}.calendar-years .year-cell.disabled:hover{background:transparent;transform:none}.form-text{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;font-size:12px;color:var(--secondary-color);margin-top:.25rem}.invalid-feedback{font-family:Plus Jakarta Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;font-size:12px;margin-top:.25rem;color:var(--error-color);display:block}.text-danger{color:var(--error-color)!important}@media (max-width: 576px){.calendar-popup{left:50%;transform:translate(-50%);width:200px;max-width:calc(100vw - 2rem)}.calendar-popup.open{transform:translate(-50%) translateY(0)}.calendar-header{padding:.75rem .75rem .5rem}.calendar-content{padding:.375rem .5rem .5rem}.header-title{min-width:70px;min-height:30px;padding:.5rem .75rem;font-size:11px}.day-cell{min-height:24px;width:100%;max-width:24px}.day-cell .day-number{font-size:10px}.months-grid{grid-template-columns:repeat(2,1fr)!important}.years-grid{grid-template-columns:repeat(3,1fr)!important}}@keyframes fadeInUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.calendar-popup.open{animation:fadeInUp var(--transition-duration) ease-out}:host(.theme-dark){--background-color: #1f2937;--surface-color: #374151;--on-surface-color: #f9fafb;--border-color: #4b5563;--disabled-color: #374151;--hover-color: #4b5563;--secondary-color: #9ca3af}:host(.theme-compact) .day-cell{min-height:28px}:host(.theme-compact) .calendar-header{padding:.5rem}:host(.theme-compact) .calendar-content{padding:.5rem}:host(.size-sm) .calendar-popup{min-width:240px}:host(.size-sm) .day-cell{min-height:28px}:host(.size-sm) .month-cell,:host(.size-sm) .year-cell{min-height:32px;font-size:10px}:host(.size-lg) .calendar-popup{min-width:320px}:host(.size-lg) .day-cell{min-height:44px}:host(.size-lg) .month-cell,:host(.size-lg) .year-cell{min-height:56px;font-size:16px}\n"] }]
        }], ctorParameters: () => [{ type: i0.ChangeDetectorRef }], propDecorators: { size: [{
                type: Input
            }], status: [{
                type: Input
            }], label: [{
                type: Input
            }], placeholder: [{
                type: Input
            }], helperText: [{
                type: Input
            }], errorText: [{
                type: Input
            }], required: [{
                type: Input
            }], readonly: [{
                type: Input
            }], disabled: [{
                type: Input
            }], id: [{
                type: Input
            }], name: [{
                type: Input
            }], locale: [{
                type: Input
            }], colors: [{
                type: Input
            }], config: [{
                type: Input
            }], validation: [{
                type: Input
            }], events: [{
                type: Input
            }], inline: [{
                type: Input
            }], showInput: [{
                type: Input
            }], dateSelect: [{
                type: Output
            }], viewChange: [{
                type: Output
            }], monthChange: [{
                type: Output
            }], yearChange: [{
                type: Output
            }], focus: [{
                type: Output
            }], blur: [{
                type: Output
            }], onDocumentClick: [{
                type: HostListener,
                args: ['document:click', ['$event']]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2EtY2FsZW5kYXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvc2FubmEtdWkvc3JjL2xpYi9mb3Jtcy9zYS1jYWxlbmRhci9zYS1jYWxlbmRhci5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9zYW5uYS11aS9zcmMvbGliL2Zvcm1zL3NhLWNhbGVuZGFyL3NhLWNhbGVuZGFyLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDTCxTQUFTLEVBQ1QsS0FBSyxFQUNMLE1BQU0sRUFDTixZQUFZLEVBQ1osVUFBVSxFQUlWLGlCQUFpQixFQUNqQix1QkFBdUIsRUFFdkIsWUFBWSxFQUNiLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBd0IsaUJBQWlCLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUN6RSxPQUFPLEVBY0wsdUJBQXVCLEVBQ3ZCLHVCQUF1QixFQUN2Qix1QkFBdUIsRUFDeEIsTUFBTSw0QkFBNEIsQ0FBQzs7O0FBZ0JwQyxNQUFNLE9BQU8sbUJBQW1CO0lBOENWO0lBN0NwQixlQUFlO0lBQ1AsTUFBTSxHQUF5QixJQUFJLENBQUM7SUFDbkMsSUFBSSxHQUFpQixJQUFJLENBQUM7SUFDMUIsTUFBTSxHQUFtQixTQUFTLENBQUM7SUFDbkMsS0FBSyxHQUFXLEVBQUUsQ0FBQztJQUNuQixXQUFXLEdBQVcsbUJBQW1CLENBQUM7SUFDMUMsVUFBVSxHQUFXLEVBQUUsQ0FBQztJQUN4QixTQUFTLEdBQVcsRUFBRSxDQUFDO0lBQ3ZCLFFBQVEsR0FBWSxLQUFLLENBQUM7SUFDMUIsUUFBUSxHQUFZLEtBQUssQ0FBQztJQUMxQixRQUFRLEdBQVksS0FBSyxDQUFDO0lBQzFCLEVBQUUsR0FBVyxFQUFFLENBQUM7SUFDaEIsSUFBSSxHQUFXLEVBQUUsQ0FBQztJQUUzQiwyQkFBMkI7SUFDbEIsTUFBTSxHQUFt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RyxVQUFVO3NCQUFuQixNQUFNO2dCQUNHLEtBQUs7c0JBQWQsTUFBTTtnQkFDRyxJQUFJO3NCQUFiLE1BQU07Z0JBa0NQLGVBQWU7c0JBRGQsWUFBWTt1QkFBQyxnQkFBZ0IsRUFBRSxDQUFDLFFBQVEsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFxyXG4gIENvbXBvbmVudCwgXHJcbiAgSW5wdXQsIFxyXG4gIE91dHB1dCwgXHJcbiAgRXZlbnRFbWl0dGVyLCBcclxuICBmb3J3YXJkUmVmLCBcclxuICBPbkluaXQsIFxyXG4gIE9uQ2hhbmdlcyxcclxuICBTaW1wbGVDaGFuZ2VzLFxyXG4gIFZpZXdFbmNhcHN1bGF0aW9uLCBcclxuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcclxuICBDaGFuZ2VEZXRlY3RvclJlZixcclxuICBIb3N0TGlzdGVuZXJcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQ29udHJvbFZhbHVlQWNjZXNzb3IsIE5HX1ZBTFVFX0FDQ0VTU09SIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xyXG5pbXBvcnQgeyBcclxuICBDYWxlbmRhclNpemUsIFxyXG4gIENhbGVuZGFyU3RhdHVzLCBcclxuICBDYWxlbmRhclZpZXdNb2RlLFxyXG4gIENhbGVuZGFyRGF5LFxyXG4gIENhbGVuZGFyTW9udGgsXHJcbiAgQ2FsZW5kYXJZZWFyLFxyXG4gIENhbGVuZGFyRXZlbnQsXHJcbiAgQ2FsZW5kYXJDb2xvcnMsXHJcbiAgQ2FsZW5kYXJMb2NhbGUsXHJcbiAgQ2FsZW5kYXJWYWxpZGF0aW9uLFxyXG4gIENhbGVuZGFyQ29uZmlnLFxyXG4gIENhbGVuZGFyU2VsZWN0RXZlbnQsXHJcbiAgQ2FsZW5kYXJWaWV3Q2hhbmdlRXZlbnQsXHJcbiAgREVGQVVMVF9DQUxFTkRBUl9MT0NBTEUsXHJcbiAgREVGQVVMVF9DQUxFTkRBUl9DT0xPUlMsXHJcbiAgREVGQVVMVF9DQUxFTkRBUl9DT05GSUdcclxufSBmcm9tICcuLi8uLi90eXBlcy9jYWxlbmRhci50eXBlcyc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ3NhLWNhbGVuZGFyJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vc2EtY2FsZW5kYXIuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL3NhLWNhbGVuZGFyLmNvbXBvbmVudC5zY3NzJ10sXHJcbiAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uU2hhZG93RG9tLFxyXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxyXG4gIHByb3ZpZGVyczogW1xyXG4gICAge1xyXG4gICAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcclxuICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gU2FDYWxlbmRhckNvbXBvbmVudCksXHJcbiAgICAgIG11bHRpOiB0cnVlXHJcbiAgICB9XHJcbiAgXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgU2FDYWxlbmRhckNvbXBvbmVudCBpbXBsZW1lbnRzIENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBPbkluaXQsIE9uQ2hhbmdlcyB7XHJcbiAgLy8gQmFzaWMgaW5wdXRzXHJcbiAgcHJpdmF0ZSBfdmFsdWU6IERhdGUgfCBEYXRlW10gfCBudWxsID0gbnVsbDtcclxuICBASW5wdXQoKSBzaXplOiBDYWxlbmRhclNpemUgPSAnbWQnO1xyXG4gIEBJbnB1dCgpIHN0YXR1czogQ2FsZW5kYXJTdGF0dXMgPSAnZGVmYXVsdCc7XHJcbiAgQElucHV0KCkgbGFiZWw6IHN0cmluZyA9ICcnO1xyXG4gIEBJbnB1dCgpIHBsYWNlaG9sZGVyOiBzdHJpbmcgPSAnU2VsZWNjaW9uYXIgZmVjaGEnO1xyXG4gIEBJbnB1dCgpIGhlbHBlclRleHQ6IHN0cmluZyA9ICcnO1xyXG4gIEBJbnB1dCgpIGVycm9yVGV4dDogc3RyaW5nID0gJyc7XHJcbiAgQElucHV0KCkgcmVxdWlyZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICBASW5wdXQoKSByZWFkb25seTogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIEBJbnB1dCgpIGRpc2FibGVkOiBib29sZWFuID0gZmFsc2U7XHJcbiAgQElucHV0KCkgaWQ6IHN0cmluZyA9ICcnO1xyXG4gIEBJbnB1dCgpIG5hbWU6IHN0cmluZyA9ICcnO1xyXG5cclxuICAvLyBDYWxlbmRhciBzcGVjaWZpYyBpbnB1dHNcclxuICBASW5wdXQoKSBsb2NhbGU6IENhbGVuZGFyTG9jYWxlID0gREVGQVVMVF9DQUxFTkRBUl9MT0NBTEU7XHJcbiAgQElucHV0KCkgY29sb3JzOiBDYWxlbmRhckNvbG9ycyA9IERFRkFVTFRfQ0FMRU5EQVJfQ09MT1JTO1xyXG4gIEBJbnB1dCgpIGNvbmZpZzogQ2FsZW5kYXJDb25maWcgPSBERUZBVUxUX0NBTEVOREFSX0NPTkZJRztcclxuICBASW5wdXQoKSB2YWxpZGF0aW9uOiBDYWxlbmRhclZhbGlkYXRpb24gPSB7fTtcclxuICBASW5wdXQoKSBldmVudHM6IENhbGVuZGFyRXZlbnRbXSA9IFtdO1xyXG4gIEBJbnB1dCgpIGlubGluZTogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIEBJbnB1dCgpIHNob3dJbnB1dDogYm9vbGVhbiA9IHRydWU7XHJcblxyXG4gIC8vIE91dHB1dHNcclxuICBAT3V0cHV0KCkgZGF0ZVNlbGVjdCA9IG5ldyBFdmVudEVtaXR0ZXI8Q2FsZW5kYXJTZWxlY3RFdmVudD4oKTtcclxuICBAT3V0cHV0KCkgdmlld0NoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8Q2FsZW5kYXJWaWV3Q2hhbmdlRXZlbnQ+KCk7XHJcbiAgQE91dHB1dCgpIG1vbnRoQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxEYXRlPigpO1xyXG4gIEBPdXRwdXQoKSB5ZWFyQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxudW1iZXI+KCk7XHJcbiAgQE91dHB1dCgpIGZvY3VzID0gbmV3IEV2ZW50RW1pdHRlcjxGb2N1c0V2ZW50PigpO1xyXG4gIEBPdXRwdXQoKSBibHVyID0gbmV3IEV2ZW50RW1pdHRlcjxGb2N1c0V2ZW50PigpO1xyXG5cclxuICAvLyBJbnRlcm5hbCBzdGF0ZVxyXG4gIGN1cnJlbnRWaWV3OiBDYWxlbmRhclZpZXdNb2RlID0gJ2RheSc7XHJcbiAgY3VycmVudERhdGU6IERhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gIHNlbGVjdGVkRGF0ZXM6IERhdGVbXSA9IFtdO1xyXG4gIGNhbGVuZGFyRGF5czogQ2FsZW5kYXJEYXlbXVtdID0gW107XHJcbiAgY2FsZW5kYXJNb250aHM6IENhbGVuZGFyTW9udGhbXSA9IFtdO1xyXG4gIGNhbGVuZGFyWWVhcnM6IENhbGVuZGFyWWVhcltdID0gW107XHJcbiAgaXNPcGVuOiBib29sZWFuID0gZmFsc2U7XHJcbiAgaXNGb2N1c2VkOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gIHByaXZhdGUgX2dlbmVyYXRlZElkOiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSBvbkNoYW5nZSA9IChfOiBhbnkpID0+IHt9O1xyXG4gIHByaXZhdGUgb25Ub3VjaGVkID0gKCkgPT4ge307XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgY2RyOiBDaGFuZ2VEZXRlY3RvclJlZikge1xyXG4gICAgdGhpcy5fZ2VuZXJhdGVkSWQgPSBgc2EtY2FsZW5kYXItJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YDtcclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgdGhpcy5pbml0aWFsaXplQ2FsZW5kYXIoKTtcclxuICAgIGlmICh0aGlzLmlubGluZSkge1xyXG4gICAgICB0aGlzLmlzT3BlbiA9IHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XHJcbiAgICBpZiAoY2hhbmdlc1snbG9jYWxlJ10gfHwgY2hhbmdlc1snY29uZmlnJ10pIHtcclxuICAgICAgdGhpcy5pbml0aWFsaXplQ2FsZW5kYXIoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIEBIb3N0TGlzdGVuZXIoJ2RvY3VtZW50OmNsaWNrJywgWyckZXZlbnQnXSlcclxuICBvbkRvY3VtZW50Q2xpY2soZXZlbnQ6IEV2ZW50KSB7XHJcbiAgICBpZiAoIXRoaXMuaW5saW5lICYmIHRoaXMuaXNPcGVuKSB7XHJcbiAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldCBhcyBFbGVtZW50O1xyXG4gICAgICBjb25zdCBjYWxlbmRhckVsZW1lbnQgPSAoZXZlbnQudGFyZ2V0IGFzIEVsZW1lbnQpLmNsb3Nlc3QoJ3NhLWNhbGVuZGFyJyk7XHJcbiAgICAgIGlmICghY2FsZW5kYXJFbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZUNhbGVuZGFyKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldCBjYWxlbmRhcklkKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gdGhpcy5pZCB8fCB0aGlzLl9nZW5lcmF0ZWRJZDtcclxuICB9XHJcblxyXG4gIGdldCBtZXJnZWRDb2xvcnMoKTogQ2FsZW5kYXJDb2xvcnMge1xyXG4gICAgcmV0dXJuIHsgLi4uREVGQVVMVF9DQUxFTkRBUl9DT0xPUlMsIC4uLnRoaXMuY29sb3JzIH07XHJcbiAgfVxyXG5cclxuICBnZXQgbWVyZ2VkQ29uZmlnKCk6IENhbGVuZGFyQ29uZmlnIHtcclxuICAgIHJldHVybiB7IC4uLkRFRkFVTFRfQ0FMRU5EQVJfQ09ORklHLCAuLi50aGlzLmNvbmZpZyB9O1xyXG4gIH1cclxuXHJcbiAgZ2V0IG1lcmdlZExvY2FsZSgpOiBDYWxlbmRhckxvY2FsZSB7XHJcbiAgICByZXR1cm4geyAuLi5ERUZBVUxUX0NBTEVOREFSX0xPQ0FMRSwgLi4udGhpcy5sb2NhbGUgfTtcclxuICB9XHJcblxyXG4gIGdldCBpbnB1dFZhbHVlKCk6IHN0cmluZyB7XHJcbiAgICBpZiAoIXRoaXMuX3ZhbHVlKSByZXR1cm4gJyc7XHJcbiAgICBcclxuICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMuX3ZhbHVlKSkge1xyXG4gICAgICBpZiAodGhpcy5tZXJnZWRDb25maWcuYWxsb3dSYW5nZVNlbGVjdCAmJiB0aGlzLl92YWx1ZS5sZW5ndGggPT09IDIpIHtcclxuICAgICAgICByZXR1cm4gYCR7dGhpcy5mb3JtYXREYXRlKHRoaXMuX3ZhbHVlWzBdKX0gLSAke3RoaXMuZm9ybWF0RGF0ZSh0aGlzLl92YWx1ZVsxXSl9YDtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcy5fdmFsdWUubWFwKGRhdGUgPT4gdGhpcy5mb3JtYXREYXRlKGRhdGUpKS5qb2luKCcsICcpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gdGhpcy5mb3JtYXREYXRlKHRoaXMuX3ZhbHVlKTtcclxuICB9XHJcblxyXG4gIGdldCBpbnB1dENsYXNzZXMoKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IHNpemVNYXAgPSB7XHJcbiAgICAgICdzbSc6ICdmb3JtLWNvbnRyb2wtc20nLFxyXG4gICAgICAnbWQnOiAnJyxcclxuICAgICAgJ2xnJzogJ2Zvcm0tY29udHJvbC1sZydcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgYmFzZUNsYXNzZXMgPSBbJ2Zvcm0tY29udHJvbCcsICdjYWxlbmRhci1pbnB1dCddO1xyXG4gICAgXHJcbiAgICBpZiAoc2l6ZU1hcFt0aGlzLnNpemVdICYmIHNpemVNYXBbdGhpcy5zaXplXSAhPT0gJycpIHtcclxuICAgICAgYmFzZUNsYXNzZXMucHVzaChzaXplTWFwW3RoaXMuc2l6ZV0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAodGhpcy5zdGF0dXMgPT09ICdlcnJvcicgfHwgdGhpcy5lcnJvclRleHQpIHtcclxuICAgICAgYmFzZUNsYXNzZXMucHVzaCgnaXMtaW52YWxpZCcpO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLnN0YXR1cyA9PT0gJ3N1Y2Nlc3MnKSB7XHJcbiAgICAgIGJhc2VDbGFzc2VzLnB1c2goJ2lzLXZhbGlkJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGJhc2VDbGFzc2VzLmpvaW4oJyAnKTtcclxuICB9XHJcblxyXG4gIGdldCBsYWJlbENsYXNzZXMoKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IHNpemVNYXAgPSB7XHJcbiAgICAgICdzbSc6ICdmb3JtLWxhYmVsIGxhYmVsLXNtJyxcclxuICAgICAgJ21kJzogJ2Zvcm0tbGFiZWwgbGFiZWwtbWQnLFxyXG4gICAgICAnbGcnOiAnZm9ybS1sYWJlbCBsYWJlbC1sZydcclxuICAgIH07XHJcbiAgICBcclxuICAgIHJldHVybiBzaXplTWFwW3RoaXMuc2l6ZV0gfHwgJ2Zvcm0tbGFiZWwgbGFiZWwtbWQnO1xyXG4gIH1cclxuXHJcbiAgLy8gQ29udHJvbFZhbHVlQWNjZXNzb3IgaW1wbGVtZW50YXRpb25cclxuICB3cml0ZVZhbHVlKHZhbHVlOiBhbnkpOiB2b2lkIHtcclxuICAgIHRoaXMuX3ZhbHVlID0gdmFsdWU7XHJcbiAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkRGF0ZXMoKTtcclxuICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xyXG4gIH1cclxuXHJcbiAgcmVnaXN0ZXJPbkNoYW5nZShmbjogYW55KTogdm9pZCB7XHJcbiAgICB0aGlzLm9uQ2hhbmdlID0gZm47XHJcbiAgfVxyXG5cclxuICByZWdpc3Rlck9uVG91Y2hlZChmbjogYW55KTogdm9pZCB7XHJcbiAgICB0aGlzLm9uVG91Y2hlZCA9IGZuO1xyXG4gIH1cclxuXHJcbiAgc2V0RGlzYWJsZWRTdGF0ZShpc0Rpc2FibGVkOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICB0aGlzLmRpc2FibGVkID0gaXNEaXNhYmxlZDtcclxuICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xyXG4gIH1cclxuXHJcbiAgLy8gQ2FsZW5kYXIgaW5pdGlhbGl6YXRpb25cclxuICBwcml2YXRlIGluaXRpYWxpemVDYWxlbmRhcigpIHtcclxuICAgIHRoaXMudXBkYXRlU2VsZWN0ZWREYXRlcygpO1xyXG4gICAgdGhpcy5nZW5lcmF0ZUNhbGVuZGFyRGF5cygpO1xyXG4gICAgdGhpcy5nZW5lcmF0ZUNhbGVuZGFyTW9udGhzKCk7XHJcbiAgICB0aGlzLmdlbmVyYXRlQ2FsZW5kYXJZZWFycygpO1xyXG4gICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHVwZGF0ZVNlbGVjdGVkRGF0ZXMoKSB7XHJcbiAgICB0aGlzLnNlbGVjdGVkRGF0ZXMgPSBbXTtcclxuICAgIGlmICh0aGlzLl92YWx1ZSkge1xyXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLl92YWx1ZSkpIHtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZXMgPSBbLi4udGhpcy5fdmFsdWVdO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlcyA9IFt0aGlzLl92YWx1ZV07XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIENhbGVuZGFyIGdlbmVyYXRpb24gbWV0aG9kc1xyXG4gIHByaXZhdGUgZ2VuZXJhdGVDYWxlbmRhckRheXMoKSB7XHJcbiAgICBjb25zdCB5ZWFyID0gdGhpcy5jdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgY29uc3QgbW9udGggPSB0aGlzLmN1cnJlbnREYXRlLmdldE1vbnRoKCk7XHJcbiAgICBcclxuICAgIGNvbnN0IGZpcnN0RGF5ID0gbmV3IERhdGUoeWVhciwgbW9udGgsIDEpO1xyXG4gICAgY29uc3QgbGFzdERheSA9IG5ldyBEYXRlKHllYXIsIG1vbnRoICsgMSwgMCk7XHJcbiAgICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZShmaXJzdERheSk7XHJcbiAgICBjb25zdCBlbmREYXRlID0gbmV3IERhdGUobGFzdERheSk7XHJcblxyXG4gICAgLy8gQWRqdXN0IHN0YXJ0IGRhdGUgdG8gc2hvdyBwcmV2aW91cyBtb250aCBkYXlzIGlmIG5lZWRlZFxyXG4gICAgY29uc3QgZmlyc3REYXlPZldlZWsgPSB0aGlzLm1lcmdlZExvY2FsZS5maXJzdERheU9mV2VlaztcclxuICAgIGNvbnN0IHN0YXJ0RGF5T2ZXZWVrID0gZmlyc3REYXkuZ2V0RGF5KCk7XHJcbiAgICBjb25zdCBkaWZmID0gKHN0YXJ0RGF5T2ZXZWVrIC0gZmlyc3REYXlPZldlZWsgKyA3KSAlIDc7XHJcbiAgICBzdGFydERhdGUuc2V0RGF0ZShzdGFydERhdGUuZ2V0RGF0ZSgpIC0gZGlmZik7XHJcblxyXG4gICAgLy8gQWRqdXN0IGVuZCBkYXRlIHRvIHNob3cgbmV4dCBtb250aCBkYXlzXHJcbiAgICBjb25zdCBlbmREYXlPZldlZWsgPSBlbmREYXRlLmdldERheSgpO1xyXG4gICAgY29uc3QgZW5kRGlmZiA9ICg2IC0gZW5kRGF5T2ZXZWVrICsgZmlyc3REYXlPZldlZWspICUgNztcclxuICAgIGVuZERhdGUuc2V0RGF0ZShlbmREYXRlLmdldERhdGUoKSArIGVuZERpZmYpO1xyXG5cclxuICAgIHRoaXMuY2FsZW5kYXJEYXlzID0gW107XHJcbiAgICBjb25zdCB3ZWVrczogQ2FsZW5kYXJEYXlbXVtdID0gW107XHJcbiAgICBsZXQgd2VlazogQ2FsZW5kYXJEYXlbXSA9IFtdO1xyXG5cclxuICAgIGNvbnN0IGN1cnJlbnREYXRlSXRlciA9IG5ldyBEYXRlKHN0YXJ0RGF0ZSk7XHJcbiAgICB3aGlsZSAoY3VycmVudERhdGVJdGVyIDw9IGVuZERhdGUpIHtcclxuICAgICAgY29uc3QgY2FsZW5kYXJEYXkgPSB0aGlzLmNyZWF0ZUNhbGVuZGFyRGF5KGN1cnJlbnREYXRlSXRlciwgbW9udGgpO1xyXG4gICAgICB3ZWVrLnB1c2goY2FsZW5kYXJEYXkpO1xyXG5cclxuICAgICAgaWYgKHdlZWsubGVuZ3RoID09PSA3KSB7XHJcbiAgICAgICAgd2Vla3MucHVzaChbLi4ud2Vla10pO1xyXG4gICAgICAgIHdlZWsgPSBbXTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY3VycmVudERhdGVJdGVyLnNldERhdGUoY3VycmVudERhdGVJdGVyLmdldERhdGUoKSArIDEpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY2FsZW5kYXJEYXlzID0gd2Vla3M7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNyZWF0ZUNhbGVuZGFyRGF5KGRhdGU6IERhdGUsIGN1cnJlbnRNb250aDogbnVtYmVyKTogQ2FsZW5kYXJEYXkge1xyXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xyXG4gICAgY29uc3QgaXNUb2RheSA9IHRoaXMuaXNTYW1lRGF5KGRhdGUsIHRvZGF5KTtcclxuICAgIGNvbnN0IGlzU2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkRGF0ZXMuc29tZShzZWxlY3RlZERhdGUgPT4gdGhpcy5pc1NhbWVEYXkoZGF0ZSwgc2VsZWN0ZWREYXRlKSk7XHJcbiAgICBjb25zdCBpc0Rpc2FibGVkID0gdGhpcy5pc0RhdGVEaXNhYmxlZChkYXRlKTtcclxuICAgIGNvbnN0IGlzSW5DdXJyZW50TW9udGggPSBkYXRlLmdldE1vbnRoKCkgPT09IGN1cnJlbnRNb250aDtcclxuICAgIGNvbnN0IGlzV2Vla2VuZCA9IGRhdGUuZ2V0RGF5KCkgPT09IDAgfHwgZGF0ZS5nZXREYXkoKSA9PT0gNjtcclxuICAgIGNvbnN0IGhhc0V2ZW50ID0gdGhpcy5ldmVudHMuc29tZShldmVudCA9PiB0aGlzLmlzU2FtZURheShldmVudC5kYXRlLCBkYXRlKSk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgZGF0ZTogbmV3IERhdGUoZGF0ZSksXHJcbiAgICAgIGRheTogZGF0ZS5nZXREYXRlKCksXHJcbiAgICAgIG1vbnRoOiBkYXRlLmdldE1vbnRoKCksXHJcbiAgICAgIHllYXI6IGRhdGUuZ2V0RnVsbFllYXIoKSxcclxuICAgICAgaXNUb2RheSxcclxuICAgICAgaXNTZWxlY3RlZCxcclxuICAgICAgaXNEaXNhYmxlZCxcclxuICAgICAgaXNJbkN1cnJlbnRNb250aCxcclxuICAgICAgaXNXZWVrZW5kLFxyXG4gICAgICBoYXNFdmVudFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2VuZXJhdGVDYWxlbmRhck1vbnRocygpIHtcclxuICAgIGNvbnN0IGN1cnJlbnRZZWFyID0gdGhpcy5jdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgdGhpcy5jYWxlbmRhck1vbnRocyA9IHRoaXMubWVyZ2VkTG9jYWxlLm1vbnRocy5tYXAoKG1vbnRoLCBpbmRleCkgPT4gKHtcclxuICAgICAgbmFtZTogbW9udGgsXHJcbiAgICAgIG51bWJlcjogaW5kZXgsXHJcbiAgICAgIHllYXI6IGN1cnJlbnRZZWFyLFxyXG4gICAgICBpc1NlbGVjdGVkOiB0aGlzLnNlbGVjdGVkRGF0ZXMuc29tZShkYXRlID0+IFxyXG4gICAgICAgIGRhdGUuZ2V0RnVsbFllYXIoKSA9PT0gY3VycmVudFllYXIgJiYgZGF0ZS5nZXRNb250aCgpID09PSBpbmRleFxyXG4gICAgICApLFxyXG4gICAgICBpc0Rpc2FibGVkOiB0aGlzLmlzTW9udGhEaXNhYmxlZChjdXJyZW50WWVhciwgaW5kZXgpLFxyXG4gICAgICBpc0N1cnJlbnQ6IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSA9PT0gY3VycmVudFllYXIgJiYgbmV3IERhdGUoKS5nZXRNb250aCgpID09PSBpbmRleFxyXG4gICAgfSkpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZW5lcmF0ZUNhbGVuZGFyWWVhcnMoKSB7XHJcbiAgICBjb25zdCBjdXJyZW50WWVhciA9IHRoaXMuY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgIGNvbnN0IHN0YXJ0WWVhciA9IGN1cnJlbnRZZWFyIC0gMTA7XHJcbiAgICBjb25zdCBlbmRZZWFyID0gY3VycmVudFllYXIgKyAxMDtcclxuXHJcbiAgICB0aGlzLmNhbGVuZGFyWWVhcnMgPSBbXTtcclxuICAgIGZvciAobGV0IHllYXIgPSBzdGFydFllYXI7IHllYXIgPD0gZW5kWWVhcjsgeWVhcisrKSB7XHJcbiAgICAgIHRoaXMuY2FsZW5kYXJZZWFycy5wdXNoKHtcclxuICAgICAgICB5ZWFyLFxyXG4gICAgICAgIGlzU2VsZWN0ZWQ6IHRoaXMuc2VsZWN0ZWREYXRlcy5zb21lKGRhdGUgPT4gZGF0ZS5nZXRGdWxsWWVhcigpID09PSB5ZWFyKSxcclxuICAgICAgICBpc0Rpc2FibGVkOiB0aGlzLmlzWWVhckRpc2FibGVkKHllYXIpLFxyXG4gICAgICAgIGlzQ3VycmVudDogbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpID09PSB5ZWFyXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gRGF0ZSB2YWxpZGF0aW9uIG1ldGhvZHNcclxuICBwcml2YXRlIGlzRGF0ZURpc2FibGVkKGRhdGU6IERhdGUpOiBib29sZWFuIHtcclxuICAgIGlmICh0aGlzLnZhbGlkYXRpb24ubWluRGF0ZSAmJiBkYXRlIDwgdGhpcy52YWxpZGF0aW9uLm1pbkRhdGUpIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMudmFsaWRhdGlvbi5tYXhEYXRlICYmIGRhdGUgPiB0aGlzLnZhbGlkYXRpb24ubWF4RGF0ZSkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy52YWxpZGF0aW9uLmRpc2FibGVkRGF0ZXM/LnNvbWUoZGlzYWJsZWREYXRlID0+IHRoaXMuaXNTYW1lRGF5KGRhdGUsIGRpc2FibGVkRGF0ZSkpKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLnZhbGlkYXRpb24uZGlzYWJsZWREYXlzPy5pbmNsdWRlcyhkYXRlLmdldERheSgpKSkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy52YWxpZGF0aW9uLmVuYWJsZWREYXRlcyAmJiAhdGhpcy52YWxpZGF0aW9uLmVuYWJsZWREYXRlcy5zb21lKGVuYWJsZWREYXRlID0+IHRoaXMuaXNTYW1lRGF5KGRhdGUsIGVuYWJsZWREYXRlKSkpIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMudmFsaWRhdGlvbi5jdXN0b21WYWxpZGF0b3IgJiYgIXRoaXMudmFsaWRhdGlvbi5jdXN0b21WYWxpZGF0b3IoZGF0ZSkpIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBpc01vbnRoRGlzYWJsZWQoeWVhcjogbnVtYmVyLCBtb250aDogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICBjb25zdCBmaXJzdERheU9mTW9udGggPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgMSk7XHJcbiAgICBjb25zdCBsYXN0RGF5T2ZNb250aCA9IG5ldyBEYXRlKHllYXIsIG1vbnRoICsgMSwgMCk7XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgYWxsIGRheXMgaW4gdGhlIG1vbnRoIGFyZSBkaXNhYmxlZFxyXG4gICAgZm9yIChsZXQgZGF5ID0gMTsgZGF5IDw9IGxhc3REYXlPZk1vbnRoLmdldERhdGUoKTsgZGF5KyspIHtcclxuICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHllYXIsIG1vbnRoLCBkYXkpO1xyXG4gICAgICBpZiAoIXRoaXMuaXNEYXRlRGlzYWJsZWQoZGF0ZSkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgaXNZZWFyRGlzYWJsZWQoeWVhcjogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICAvLyBDaGVjayBpZiBhbGwgbW9udGhzIGluIHRoZSB5ZWFyIGFyZSBkaXNhYmxlZFxyXG4gICAgZm9yIChsZXQgbW9udGggPSAwOyBtb250aCA8IDEyOyBtb250aCsrKSB7XHJcbiAgICAgIGlmICghdGhpcy5pc01vbnRoRGlzYWJsZWQoeWVhciwgbW9udGgpKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICAvLyBFdmVudCBoYW5kbGVyc1xyXG4gIG9uSW5wdXRDbGljaygpIHtcclxuICAgIGlmICghdGhpcy5kaXNhYmxlZCAmJiAhdGhpcy5yZWFkb25seSAmJiAhdGhpcy5pbmxpbmUpIHtcclxuICAgICAgdGhpcy50b2dnbGVDYWxlbmRhcigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25JbnB1dEZvY3VzKGV2ZW50OiBGb2N1c0V2ZW50KSB7XHJcbiAgICB0aGlzLmlzRm9jdXNlZCA9IHRydWU7XHJcbiAgICB0aGlzLmZvY3VzLmVtaXQoZXZlbnQpO1xyXG4gIH1cclxuXHJcbiAgb25JbnB1dEJsdXIoZXZlbnQ6IEZvY3VzRXZlbnQpIHtcclxuICAgIHRoaXMuaXNGb2N1c2VkID0gZmFsc2U7XHJcbiAgICB0aGlzLm9uVG91Y2hlZCgpO1xyXG4gICAgdGhpcy5ibHVyLmVtaXQoZXZlbnQpO1xyXG4gIH1cclxuXHJcbiAgb25EYXlDbGljayhkYXk6IENhbGVuZGFyRGF5KSB7XHJcbiAgICBpZiAoZGF5LmlzRGlzYWJsZWQgfHwgdGhpcy5kaXNhYmxlZCB8fCB0aGlzLnJlYWRvbmx5KSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBzZWxlY3RlZERhdGUgPSBuZXcgRGF0ZShkYXkuZGF0ZSk7XHJcbiAgICB0aGlzLnNlbGVjdERhdGUoc2VsZWN0ZWREYXRlKTtcclxuICB9XHJcblxyXG4gIG9uTW9udGhDbGljayhtb250aDogQ2FsZW5kYXJNb250aCkge1xyXG4gICAgaWYgKG1vbnRoLmlzRGlzYWJsZWQpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY3VycmVudERhdGUgPSBuZXcgRGF0ZShtb250aC55ZWFyLCBtb250aC5udW1iZXIsIDEpO1xyXG4gICAgdGhpcy5zZXRWaWV3KCdkYXknKTtcclxuICAgIHRoaXMubW9udGhDaGFuZ2UuZW1pdChuZXcgRGF0ZSh0aGlzLmN1cnJlbnREYXRlKSk7XHJcbiAgfVxyXG5cclxuICBvblllYXJDbGljayh5ZWFyOiBDYWxlbmRhclllYXIpIHtcclxuICAgIGlmICh5ZWFyLmlzRGlzYWJsZWQpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY3VycmVudERhdGUgPSBuZXcgRGF0ZSh5ZWFyLnllYXIsIHRoaXMuY3VycmVudERhdGUuZ2V0TW9udGgoKSwgMSk7XHJcbiAgICB0aGlzLnNldFZpZXcoJ21vbnRoJyk7XHJcbiAgICB0aGlzLnllYXJDaGFuZ2UuZW1pdCh5ZWFyLnllYXIpO1xyXG4gIH1cclxuXHJcbiAgb25Ub2RheUNsaWNrKCkge1xyXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xyXG4gICAgaWYgKCF0aGlzLmlzRGF0ZURpc2FibGVkKHRvZGF5KSkge1xyXG4gICAgICB0aGlzLnNlbGVjdERhdGUodG9kYXkpO1xyXG4gICAgICB0aGlzLmN1cnJlbnREYXRlID0gbmV3IERhdGUodG9kYXkpO1xyXG4gICAgICB0aGlzLmdlbmVyYXRlQ2FsZW5kYXJEYXlzKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbkNsZWFyQ2xpY2soKSB7XHJcbiAgICB0aGlzLnNlbGVjdERhdGUobnVsbCk7XHJcbiAgfVxyXG5cclxuICBvbkNsZWFyVmFsdWUoZXZlbnQ6IE1vdXNlRXZlbnQpIHtcclxuICAgIC8vIFByZXZlbmlyIHByb3BhZ2FjacOzbiBkZWwgZXZlbnRvXHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICBcclxuICAgIGlmICghdGhpcy5kaXNhYmxlZCkge1xyXG4gICAgICB0aGlzLnNlbGVjdERhdGUobnVsbCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBOYXZpZ2F0aW9uIG1ldGhvZHNcclxuICBuYXZpZ2F0ZVByZXZpb3VzKCkge1xyXG4gICAgc3dpdGNoICh0aGlzLmN1cnJlbnRWaWV3KSB7XHJcbiAgICAgIGNhc2UgJ2RheSc6XHJcbiAgICAgICAgdGhpcy5jdXJyZW50RGF0ZSA9IG5ldyBEYXRlKHRoaXMuY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKSwgdGhpcy5jdXJyZW50RGF0ZS5nZXRNb250aCgpIC0gMSwgMSk7XHJcbiAgICAgICAgdGhpcy5nZW5lcmF0ZUNhbGVuZGFyRGF5cygpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdtb250aCc6XHJcbiAgICAgICAgdGhpcy5jdXJyZW50RGF0ZSA9IG5ldyBEYXRlKHRoaXMuY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKSAtIDEsIHRoaXMuY3VycmVudERhdGUuZ2V0TW9udGgoKSwgMSk7XHJcbiAgICAgICAgdGhpcy5nZW5lcmF0ZUNhbGVuZGFyTW9udGhzKCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ3llYXInOlxyXG4gICAgICAgIHRoaXMuY3VycmVudERhdGUgPSBuZXcgRGF0ZSh0aGlzLmN1cnJlbnREYXRlLmdldEZ1bGxZZWFyKCkgLSAyMSwgdGhpcy5jdXJyZW50RGF0ZS5nZXRNb250aCgpLCAxKTtcclxuICAgICAgICB0aGlzLmdlbmVyYXRlQ2FsZW5kYXJZZWFycygpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XHJcbiAgfVxyXG5cclxuICBuYXZpZ2F0ZU5leHQoKSB7XHJcbiAgICBzd2l0Y2ggKHRoaXMuY3VycmVudFZpZXcpIHtcclxuICAgICAgY2FzZSAnZGF5JzpcclxuICAgICAgICB0aGlzLmN1cnJlbnREYXRlID0gbmV3IERhdGUodGhpcy5jdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpLCB0aGlzLmN1cnJlbnREYXRlLmdldE1vbnRoKCkgKyAxLCAxKTtcclxuICAgICAgICB0aGlzLmdlbmVyYXRlQ2FsZW5kYXJEYXlzKCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ21vbnRoJzpcclxuICAgICAgICB0aGlzLmN1cnJlbnREYXRlID0gbmV3IERhdGUodGhpcy5jdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpICsgMSwgdGhpcy5jdXJyZW50RGF0ZS5nZXRNb250aCgpLCAxKTtcclxuICAgICAgICB0aGlzLmdlbmVyYXRlQ2FsZW5kYXJNb250aHMoKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAneWVhcic6XHJcbiAgICAgICAgdGhpcy5jdXJyZW50RGF0ZSA9IG5ldyBEYXRlKHRoaXMuY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKSArIDIxLCB0aGlzLmN1cnJlbnREYXRlLmdldE1vbnRoKCksIDEpO1xyXG4gICAgICAgIHRoaXMuZ2VuZXJhdGVDYWxlbmRhclllYXJzKCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcclxuICB9XHJcblxyXG4gIHNldFZpZXcodmlldzogQ2FsZW5kYXJWaWV3TW9kZSkge1xyXG4gICAgdGhpcy5jdXJyZW50VmlldyA9IHZpZXc7XHJcbiAgICB0aGlzLnZpZXdDaGFuZ2UuZW1pdCh7XHJcbiAgICAgIHZpZXcsXHJcbiAgICAgIGRhdGU6IG5ldyBEYXRlKHRoaXMuY3VycmVudERhdGUpLFxyXG4gICAgICBtb250aDogdGhpcy5jdXJyZW50RGF0ZS5nZXRNb250aCgpLFxyXG4gICAgICB5ZWFyOiB0aGlzLmN1cnJlbnREYXRlLmdldEZ1bGxZZWFyKClcclxuICAgIH0pO1xyXG4gICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVDYWxlbmRhcigpIHtcclxuICAgIHRoaXMuaXNPcGVuID0gIXRoaXMuaXNPcGVuO1xyXG4gICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XHJcbiAgfVxyXG5cclxuICBjbG9zZUNhbGVuZGFyKCkge1xyXG4gICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcclxuICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xyXG4gIH1cclxuXHJcbiAgLy8gRGF0ZSBzZWxlY3Rpb24gbG9naWNcclxuICBwcml2YXRlIHNlbGVjdERhdGUoZGF0ZTogRGF0ZSB8IG51bGwpIHtcclxuICAgIGlmIChkYXRlID09PSBudWxsKSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWREYXRlcyA9IFtdO1xyXG4gICAgICB0aGlzLl92YWx1ZSA9IG51bGw7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMubWVyZ2VkQ29uZmlnLmFsbG93TXVsdGlTZWxlY3QpIHtcclxuICAgICAgdGhpcy5oYW5kbGVNdWx0aVNlbGVjdChkYXRlKTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5tZXJnZWRDb25maWcuYWxsb3dSYW5nZVNlbGVjdCkge1xyXG4gICAgICB0aGlzLmhhbmRsZVJhbmdlU2VsZWN0KGRhdGUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zZWxlY3RlZERhdGVzID0gW2RhdGVdO1xyXG4gICAgICB0aGlzLl92YWx1ZSA9IGRhdGU7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy51cGRhdGVWYWx1ZSgpO1xyXG4gICAgXHJcbiAgICBpZiAodGhpcy5tZXJnZWRDb25maWcuY2xvc2VPblNlbGVjdCAmJiAhdGhpcy5tZXJnZWRDb25maWcuYWxsb3dNdWx0aVNlbGVjdCAmJiAhdGhpcy5tZXJnZWRDb25maWcuYWxsb3dSYW5nZVNlbGVjdCkge1xyXG4gICAgICB0aGlzLmNsb3NlQ2FsZW5kYXIoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgaGFuZGxlTXVsdGlTZWxlY3QoZGF0ZTogRGF0ZSkge1xyXG4gICAgY29uc3QgZXhpc3RpbmdJbmRleCA9IHRoaXMuc2VsZWN0ZWREYXRlcy5maW5kSW5kZXgoc2VsZWN0ZWREYXRlID0+IHRoaXMuaXNTYW1lRGF5KHNlbGVjdGVkRGF0ZSwgZGF0ZSkpO1xyXG4gICAgXHJcbiAgICBpZiAoZXhpc3RpbmdJbmRleCA+IC0xKSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWREYXRlcy5zcGxpY2UoZXhpc3RpbmdJbmRleCwgMSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnNlbGVjdGVkRGF0ZXMucHVzaChkYXRlKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl92YWx1ZSA9IFsuLi50aGlzLnNlbGVjdGVkRGF0ZXNdO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBoYW5kbGVSYW5nZVNlbGVjdChkYXRlOiBEYXRlKSB7XHJcbiAgICBpZiAodGhpcy5zZWxlY3RlZERhdGVzLmxlbmd0aCA9PT0gMCB8fCB0aGlzLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAyKSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWREYXRlcyA9IFtkYXRlXTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RlZERhdGVzLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICBjb25zdCBzdGFydERhdGUgPSB0aGlzLnNlbGVjdGVkRGF0ZXNbMF07XHJcbiAgICAgIGlmIChkYXRlIDwgc3RhcnREYXRlKSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVzID0gW2RhdGUsIHN0YXJ0RGF0ZV07XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVzID0gW3N0YXJ0RGF0ZSwgZGF0ZV07XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl92YWx1ZSA9IFsuLi50aGlzLnNlbGVjdGVkRGF0ZXNdO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB1cGRhdGVWYWx1ZSgpIHtcclxuICAgIGNvbnN0IHNlbGVjdEV2ZW50OiBDYWxlbmRhclNlbGVjdEV2ZW50ID0ge1xyXG4gICAgICBkYXRlOiB0aGlzLnNlbGVjdGVkRGF0ZXNbMF0gfHwgbmV3IERhdGUoKSxcclxuICAgICAgZm9ybWF0dGVkRGF0ZTogdGhpcy5pbnB1dFZhbHVlLFxyXG4gICAgICBzZWxlY3RlZERhdGVzOiBbLi4udGhpcy5zZWxlY3RlZERhdGVzXVxyXG4gICAgfTtcclxuXHJcbiAgICBpZiAodGhpcy5tZXJnZWRDb25maWcuYWxsb3dSYW5nZVNlbGVjdCAmJiB0aGlzLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAyKSB7XHJcbiAgICAgIHNlbGVjdEV2ZW50LmlzUmFuZ2UgPSB0cnVlO1xyXG4gICAgICBzZWxlY3RFdmVudC5zdGFydERhdGUgPSB0aGlzLnNlbGVjdGVkRGF0ZXNbMF07XHJcbiAgICAgIHNlbGVjdEV2ZW50LmVuZERhdGUgPSB0aGlzLnNlbGVjdGVkRGF0ZXNbMV07XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5vbkNoYW5nZSh0aGlzLl92YWx1ZSk7XHJcbiAgICB0aGlzLmRhdGVTZWxlY3QuZW1pdChzZWxlY3RFdmVudCk7XHJcbiAgICB0aGlzLmdlbmVyYXRlQ2FsZW5kYXJEYXlzKCk7XHJcbiAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcclxuICB9XHJcblxyXG4gIC8vIFV0aWxpdHkgbWV0aG9kc1xyXG4gIHByaXZhdGUgaXNTYW1lRGF5KGRhdGUxOiBEYXRlLCBkYXRlMjogRGF0ZSk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIGRhdGUxLmdldEZ1bGxZZWFyKCkgPT09IGRhdGUyLmdldEZ1bGxZZWFyKCkgJiZcclxuICAgICAgICAgICBkYXRlMS5nZXRNb250aCgpID09PSBkYXRlMi5nZXRNb250aCgpICYmXHJcbiAgICAgICAgICAgZGF0ZTEuZ2V0RGF0ZSgpID09PSBkYXRlMi5nZXREYXRlKCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGZvcm1hdERhdGUoZGF0ZTogRGF0ZSk6IHN0cmluZyB7XHJcbiAgICBjb25zdCBkYXkgPSBkYXRlLmdldERhdGUoKS50b1N0cmluZygpO1xyXG4gICAgY29uc3QgbW9udGggPSBkYXRlLmdldE1vbnRoKCk7XHJcbiAgICBjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCk7XHJcblxyXG4gICAgbGV0IGZvcm1hdHRlZERhdGUgPSB0aGlzLm1lcmdlZExvY2FsZS5kYXRlRm9ybWF0O1xyXG4gICAgXHJcbiAgICAvLyBSZWVtcGxhemFyIGTDrWFcclxuICAgIGZvcm1hdHRlZERhdGUgPSBmb3JtYXR0ZWREYXRlLnJlcGxhY2UoJ2RkJywgZGF5KTtcclxuICAgIFxyXG4gICAgLy8gUmVlbXBsYXphciBtZXMgKHZlcmlmaWNhciBzaSBlcyBmb3JtYXRvIGxhcmdvIG8gY29ydG8pXHJcbiAgICBpZiAoZm9ybWF0dGVkRGF0ZS5pbmNsdWRlcygnbW1tbScpKSB7XHJcbiAgICAgIC8vIE1lcyBjb21wbGV0byBlbiBlc3Bhw7FvbFxyXG4gICAgICBmb3JtYXR0ZWREYXRlID0gZm9ybWF0dGVkRGF0ZS5yZXBsYWNlKCdtbW1tJywgdGhpcy5tZXJnZWRMb2NhbGUubW9udGhzW21vbnRoXS50b0xvd2VyQ2FzZSgpKTtcclxuICAgIH0gZWxzZSBpZiAoZm9ybWF0dGVkRGF0ZS5pbmNsdWRlcygnbW1tJykpIHtcclxuICAgICAgLy8gTWVzIGFicmV2aWFkb1xyXG4gICAgICBmb3JtYXR0ZWREYXRlID0gZm9ybWF0dGVkRGF0ZS5yZXBsYWNlKCdtbW0nLCB0aGlzLm1lcmdlZExvY2FsZS5tb250aHNTaG9ydFttb250aF0pO1xyXG4gICAgfSBlbHNlIGlmIChmb3JtYXR0ZWREYXRlLmluY2x1ZGVzKCdtbScpKSB7XHJcbiAgICAgIC8vIE1lcyBudW3DqXJpY28gY29uIHBhZGRpbmdcclxuICAgICAgZm9ybWF0dGVkRGF0ZSA9IGZvcm1hdHRlZERhdGUucmVwbGFjZSgnbW0nLCAobW9udGggKyAxKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJykpO1xyXG4gICAgfSBlbHNlIGlmIChmb3JtYXR0ZWREYXRlLmluY2x1ZGVzKCdtJykpIHtcclxuICAgICAgLy8gTWVzIG51bcOpcmljbyBzaW4gcGFkZGluZ1xyXG4gICAgICBmb3JtYXR0ZWREYXRlID0gZm9ybWF0dGVkRGF0ZS5yZXBsYWNlKCdtJywgKG1vbnRoICsgMSkudG9TdHJpbmcoKSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFJlZW1wbGF6YXIgYcOxb1xyXG4gICAgZm9ybWF0dGVkRGF0ZSA9IGZvcm1hdHRlZERhdGUucmVwbGFjZSgneXl5eScsIHllYXIpO1xyXG5cclxuICAgIHJldHVybiBmb3JtYXR0ZWREYXRlO1xyXG4gIH1cclxuXHJcbiAgZ2V0SGVhZGVyVGl0bGUoKTogc3RyaW5nIHtcclxuICAgIHN3aXRjaCAodGhpcy5jdXJyZW50Vmlldykge1xyXG4gICAgICBjYXNlICdkYXknOlxyXG4gICAgICAgIHJldHVybiBgJHt0aGlzLm1lcmdlZExvY2FsZS5tb250aHNbdGhpcy5jdXJyZW50RGF0ZS5nZXRNb250aCgpXX0gJHt0aGlzLmN1cnJlbnREYXRlLmdldEZ1bGxZZWFyKCl9YDtcclxuICAgICAgY2FzZSAnbW9udGgnOlxyXG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnREYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKTtcclxuICAgICAgY2FzZSAneWVhcic6XHJcbiAgICAgICAgY29uc3Qgc3RhcnRZZWFyID0gdGhpcy5jdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpIC0gMTA7XHJcbiAgICAgICAgY29uc3QgZW5kWWVhciA9IHRoaXMuY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKSArIDEwO1xyXG4gICAgICAgIHJldHVybiBgJHtzdGFydFllYXJ9IC0gJHtlbmRZZWFyfWA7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0V2Vla2RheXMoKTogc3RyaW5nW10ge1xyXG4gICAgY29uc3Qgd2Vla2RheXMgPSBbLi4udGhpcy5tZXJnZWRMb2NhbGUud2Vla2RheXNNaW5dO1xyXG4gICAgY29uc3QgZmlyc3REYXkgPSB0aGlzLm1lcmdlZExvY2FsZS5maXJzdERheU9mV2VlaztcclxuICAgIFxyXG4gICAgcmV0dXJuIFtcclxuICAgICAgLi4ud2Vla2RheXMuc2xpY2UoZmlyc3REYXkpLFxyXG4gICAgICAuLi53ZWVrZGF5cy5zbGljZSgwLCBmaXJzdERheSlcclxuICAgIF07XHJcbiAgfVxyXG59XHJcbiIsIjxkaXYgY2xhc3M9XCJzYS1jYWxlbmRhci1jb250YWluZXJcIj5cclxuICA8IS0tIElucHV0IGZpZWxkIChpZiBub3QgaW5saW5lKSAtLT5cclxuICA8ZGl2ICpuZ0lmPVwiIWlubGluZVwiIGNsYXNzPVwiY2FsZW5kYXItaW5wdXQtY29udGFpbmVyXCI+XHJcbiAgICA8bGFiZWwgKm5nSWY9XCJsYWJlbFwiIFtmb3JdPVwiY2FsZW5kYXJJZFwiIFtjbGFzc109XCJsYWJlbENsYXNzZXNcIj5cclxuICAgICAge3sgbGFiZWwgfX1cclxuICAgICAgPHNwYW4gKm5nSWY9XCJyZXF1aXJlZFwiIGNsYXNzPVwidGV4dC1kYW5nZXJcIj4qPC9zcGFuPlxyXG4gICAgPC9sYWJlbD5cclxuXHJcbiAgICA8ZGl2IGNsYXNzPVwicG9zaXRpb24tcmVsYXRpdmVcIj5cclxuICAgICAgPGlucHV0XHJcbiAgICAgICAgW2lkXT1cImNhbGVuZGFySWRcIlxyXG4gICAgICAgIFtuYW1lXT1cIm5hbWVcIlxyXG4gICAgICAgIFtjbGFzc109XCJpbnB1dENsYXNzZXNcIlxyXG4gICAgICAgIHR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICBbdmFsdWVdPVwiaW5wdXRWYWx1ZVwiXHJcbiAgICAgICAgW3BsYWNlaG9sZGVyXT1cInBsYWNlaG9sZGVyXCJcclxuICAgICAgICBbcmVxdWlyZWRdPVwicmVxdWlyZWRcIlxyXG4gICAgICAgIHJlYWRvbmx5PVwidHJ1ZVwiXHJcbiAgICAgICAgW2Rpc2FibGVkXT1cImRpc2FibGVkXCJcclxuICAgICAgICBzcGVsbGNoZWNrPVwiZmFsc2VcIlxyXG4gICAgICAgIGF1dG9jb21wbGV0ZT1cIm9mZlwiXHJcbiAgICAgICAgKGNsaWNrKT1cIm9uSW5wdXRDbGljaygpXCJcclxuICAgICAgICAoZm9jdXMpPVwib25JbnB1dEZvY3VzKCRldmVudClcIlxyXG4gICAgICAgIChibHVyKT1cIm9uSW5wdXRCbHVyKCRldmVudClcIlxyXG4gICAgICAvPlxyXG4gICAgICBcclxuICAgICAgPCEtLSBDbGVhciBpY29uIChYKSBjdWFuZG8gaGF5IHZhbG9yIC0tPlxyXG4gICAgICA8ZGl2IFxyXG4gICAgICAgICpuZ0lmPVwiaW5wdXRWYWx1ZSAmJiAhZGlzYWJsZWRcIlxyXG4gICAgICAgIGNsYXNzPVwiY2xlYXItaWNvblwiIFxyXG4gICAgICAgIChjbGljayk9XCJvbkNsZWFyVmFsdWUoJGV2ZW50KVwiXHJcbiAgICAgICAgdGl0bGU9XCJMaW1waWFyIGZlY2hhXCI+XHJcbiAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiPlxyXG4gICAgICAgICAgPGxpbmUgeDE9XCIxOFwiIHkxPVwiNlwiIHgyPVwiNlwiIHkyPVwiMThcIj48L2xpbmU+XHJcbiAgICAgICAgICA8bGluZSB4MT1cIjZcIiB5MT1cIjZcIiB4Mj1cIjE4XCIgeTI9XCIxOFwiPjwvbGluZT5cclxuICAgICAgICA8L3N2Zz5cclxuICAgICAgPC9kaXY+XHJcblxyXG4gICAgICA8IS0tIENhbGVuZGFyIGljb24gKGN1YW5kbyBubyBoYXkgdmFsb3IgbyBlc3TDoSBkZXNoYWJpbGl0YWRvKSAtLT5cclxuICAgICAgPGRpdiBcclxuICAgICAgICAqbmdJZj1cIiFpbnB1dFZhbHVlIHx8IGRpc2FibGVkXCJcclxuICAgICAgICBjbGFzcz1cImNhbGVuZGFyLWljb25cIiBcclxuICAgICAgICBbY2xhc3MuZGlzYWJsZWRdPVwiZGlzYWJsZWQgfHwgcmVhZG9ubHlcIlxyXG4gICAgICAgIChjbGljayk9XCJvbklucHV0Q2xpY2soKVwiPlxyXG4gICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIj5cclxuICAgICAgICAgIDxyZWN0IHg9XCIzXCIgeT1cIjRcIiB3aWR0aD1cIjE4XCIgaGVpZ2h0PVwiMThcIiByeD1cIjJcIiByeT1cIjJcIj48L3JlY3Q+XHJcbiAgICAgICAgICA8bGluZSB4MT1cIjE2XCIgeTE9XCIyXCIgeDI9XCIxNlwiIHkyPVwiNlwiPjwvbGluZT5cclxuICAgICAgICAgIDxsaW5lIHgxPVwiOFwiIHkxPVwiMlwiIHgyPVwiOFwiIHkyPVwiNlwiPjwvbGluZT5cclxuICAgICAgICAgIDxsaW5lIHgxPVwiM1wiIHkxPVwiMTBcIiB4Mj1cIjIxXCIgeTI9XCIxMFwiPjwvbGluZT5cclxuICAgICAgICA8L3N2Zz5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuXHJcbiAgICA8ZGl2ICpuZ0lmPVwiaGVscGVyVGV4dCAmJiAhZXJyb3JUZXh0XCIgY2xhc3M9XCJmb3JtLXRleHRcIj57eyBoZWxwZXJUZXh0IH19PC9kaXY+XHJcbiAgICA8ZGl2ICpuZ0lmPVwiZXJyb3JUZXh0XCIgY2xhc3M9XCJpbnZhbGlkLWZlZWRiYWNrIGQtYmxvY2tcIj57eyBlcnJvclRleHQgfX08L2Rpdj5cclxuICA8L2Rpdj5cclxuXHJcbiAgPCEtLSBDYWxlbmRhciBwb3B1cC9pbmxpbmUgLS0+XHJcbiAgPGRpdiBcclxuICAgIGNsYXNzPVwiY2FsZW5kYXItcG9wdXBcIiBcclxuICAgIFtjbGFzcy5pbmxpbmVdPVwiaW5saW5lXCJcclxuICAgIFtjbGFzcy5vcGVuXT1cImlzT3BlblwiXHJcbiAgICBbc3R5bGUuLS1wcmltYXJ5LWNvbG9yXT1cIm1lcmdlZENvbG9ycy5wcmltYXJ5XCJcclxuICAgIFtzdHlsZS4tLXNlY29uZGFyeS1jb2xvcl09XCJtZXJnZWRDb2xvcnMuc2Vjb25kYXJ5XCJcclxuICAgIFtzdHlsZS4tLXN1Y2Nlc3MtY29sb3JdPVwibWVyZ2VkQ29sb3JzLnN1Y2Nlc3NcIlxyXG4gICAgW3N0eWxlLi0tZXJyb3ItY29sb3JdPVwibWVyZ2VkQ29sb3JzLmVycm9yXCJcclxuICAgIFtzdHlsZS4tLWJhY2tncm91bmQtY29sb3JdPVwibWVyZ2VkQ29sb3JzLmJhY2tncm91bmRcIlxyXG4gICAgW3N0eWxlLi0tc3VyZmFjZS1jb2xvcl09XCJtZXJnZWRDb2xvcnMuc3VyZmFjZVwiXHJcbiAgICBbc3R5bGUuLS1ib3JkZXItY29sb3JdPVwibWVyZ2VkQ29sb3JzLmJvcmRlclwiXHJcbiAgICBbc3R5bGUuLS1kaXNhYmxlZC1jb2xvcl09XCJtZXJnZWRDb2xvcnMuZGlzYWJsZWRcIlxyXG4gICAgW3N0eWxlLi0taG92ZXItY29sb3JdPVwibWVyZ2VkQ29sb3JzLmhvdmVyXCJcclxuICAgIFtzdHlsZS4tLXdlZWtkYXktaGVhZGVyLWJnXT1cIm1lcmdlZENvbG9ycy53ZWVrZGF5SGVhZGVyQmdcIlxyXG4gICAgW3N0eWxlLi0td2Vla2RheS1oZWFkZXItY29sb3JdPVwibWVyZ2VkQ29sb3JzLndlZWtkYXlIZWFkZXJDb2xvclwiXHJcbiAgICAqbmdJZj1cImlubGluZSB8fCBpc09wZW5cIj5cclxuICAgIFxyXG4gICAgPCEtLSBDYWxlbmRhciBoZWFkZXIgLS0+XHJcbiAgICA8ZGl2IGNsYXNzPVwiY2FsZW5kYXItaGVhZGVyXCIgKm5nSWY9XCJtZXJnZWRDb25maWcuc2hvd0hlYWRlclwiPlxyXG4gICAgICA8IS0tIE5hdmlnYXRpb24gLS0+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJjYWxlbmRhci1uYXZpZ2F0aW9uXCIgKm5nSWY9XCJtZXJnZWRDb25maWcuc2hvd05hdmlnYXRpb25cIj5cclxuICAgICAgICA8YnV0dG9uIFxyXG4gICAgICAgICAgdHlwZT1cImJ1dHRvblwiIFxyXG4gICAgICAgICAgY2xhc3M9XCJuYXYtYnV0dG9uIHByZXZcIiBcclxuICAgICAgICAgIChjbGljayk9XCJuYXZpZ2F0ZVByZXZpb3VzKClcIlxyXG4gICAgICAgICAgW2Rpc2FibGVkXT1cImRpc2FibGVkXCI+XHJcbiAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCI+XHJcbiAgICAgICAgICAgIDxwb2x5bGluZSBwb2ludHM9XCIxNSwxOCA5LDEyIDE1LDZcIj48L3BvbHlsaW5lPlxyXG4gICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgPC9idXR0b24+XHJcblxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXItdGl0bGUtY29udGFpbmVyXCI+XHJcbiAgICAgICAgICA8YnV0dG9uIFxyXG4gICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCIgXHJcbiAgICAgICAgICAgIGNsYXNzPVwiaGVhZGVyLXRpdGxlXCJcclxuICAgICAgICAgICAgKGNsaWNrKT1cImN1cnJlbnRWaWV3ID09PSAnZGF5JyA/IHNldFZpZXcoJ21vbnRoJykgOiBjdXJyZW50VmlldyA9PT0gJ21vbnRoJyA/IHNldFZpZXcoJ3llYXInKSA6IG51bGxcIlxyXG4gICAgICAgICAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWRcIj5cclxuICAgICAgICAgICAge3sgZ2V0SGVhZGVyVGl0bGUoKSB9fVxyXG4gICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgIDxidXR0b24gXHJcbiAgICAgICAgICB0eXBlPVwiYnV0dG9uXCIgXHJcbiAgICAgICAgICBjbGFzcz1cIm5hdi1idXR0b24gbmV4dFwiIFxyXG4gICAgICAgICAgKGNsaWNrKT1cIm5hdmlnYXRlTmV4dCgpXCJcclxuICAgICAgICAgIFtkaXNhYmxlZF09XCJkaXNhYmxlZFwiPlxyXG4gICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiPlxyXG4gICAgICAgICAgICA8cG9seWxpbmUgcG9pbnRzPVwiOSwxOCAxNSwxMiA5LDZcIj48L3BvbHlsaW5lPlxyXG4gICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgPC9idXR0b24+XHJcbiAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgPCEtLSBBY3Rpb24gYnV0dG9ucyAob2N1bHRvcyBwb3IgZGVmZWN0byBwYXJhIGRpc2XDsW8gbcOhcyBsaW1waW8pIC0tPlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiY2FsZW5kYXItYWN0aW9uc1wiICpuZ0lmPVwibWVyZ2VkQ29uZmlnLnNob3dUb2RheUJ1dHRvbiB8fCBtZXJnZWRDb25maWcuc2hvd0NsZWFyQnV0dG9uXCI+XHJcbiAgICAgICAgPGJ1dHRvbiBcclxuICAgICAgICAgICpuZ0lmPVwibWVyZ2VkQ29uZmlnLnNob3dUb2RheUJ1dHRvblwiXHJcbiAgICAgICAgICB0eXBlPVwiYnV0dG9uXCIgXHJcbiAgICAgICAgICBjbGFzcz1cImFjdGlvbi1idXR0b24gdG9kYXktYnV0dG9uXCJcclxuICAgICAgICAgIChjbGljayk9XCJvblRvZGF5Q2xpY2soKVwiXHJcbiAgICAgICAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWRcIj5cclxuICAgICAgICAgIHt7IG1lcmdlZExvY2FsZS50b2RheSB9fVxyXG4gICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgIFxyXG4gICAgICAgIDxidXR0b24gXHJcbiAgICAgICAgICAqbmdJZj1cIm1lcmdlZENvbmZpZy5zaG93Q2xlYXJCdXR0b25cIlxyXG4gICAgICAgICAgdHlwZT1cImJ1dHRvblwiIFxyXG4gICAgICAgICAgY2xhc3M9XCJhY3Rpb24tYnV0dG9uIGNsZWFyLWJ1dHRvblwiXHJcbiAgICAgICAgICAoY2xpY2spPVwib25DbGVhckNsaWNrKClcIlxyXG4gICAgICAgICAgW2Rpc2FibGVkXT1cImRpc2FibGVkXCI+XHJcbiAgICAgICAgICB7eyBtZXJnZWRMb2NhbGUuY2xlYXIgfX1cclxuICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuXHJcbiAgICA8IS0tIENhbGVuZGFyIGNvbnRlbnQgLS0+XHJcbiAgICA8ZGl2IGNsYXNzPVwiY2FsZW5kYXItY29udGVudFwiPlxyXG4gICAgICA8IS0tIERheSB2aWV3IC0tPlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiY2FsZW5kYXItZGF5c1wiICpuZ0lmPVwiY3VycmVudFZpZXcgPT09ICdkYXknXCI+XHJcbiAgICAgICAgPCEtLSBXZWVrZGF5IGhlYWRlcnMgLS0+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cIndlZWtkYXlzXCI+XHJcbiAgICAgICAgICA8ZGl2IFxyXG4gICAgICAgICAgICBjbGFzcz1cIndlZWtkYXktaGVhZGVyXCIgXHJcbiAgICAgICAgICAgICpuZ0Zvcj1cImxldCB3ZWVrZGF5IG9mIGdldFdlZWtkYXlzKClcIj5cclxuICAgICAgICAgICAge3sgd2Vla2RheSB9fVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgIDwhLS0gQ2FsZW5kYXIgZ3JpZCAtLT5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGF5cy1ncmlkXCI+XHJcbiAgICAgICAgICA8ZGl2IFxyXG4gICAgICAgICAgICBjbGFzcz1cIndlZWstcm93XCIgXHJcbiAgICAgICAgICAgICpuZ0Zvcj1cImxldCB3ZWVrIG9mIGNhbGVuZGFyRGF5c1wiPlxyXG4gICAgICAgICAgICA8ZGl2IFxyXG4gICAgICAgICAgICAgIGNsYXNzPVwiZGF5LWNlbGxcIlxyXG4gICAgICAgICAgICAgICpuZ0Zvcj1cImxldCBkYXkgb2Ygd2Vla1wiXHJcbiAgICAgICAgICAgICAgW2NsYXNzLnRvZGF5XT1cImRheS5pc1RvZGF5ICYmIG1lcmdlZENvbmZpZy5oaWdobGlnaHRUb2RheVwiXHJcbiAgICAgICAgICAgICAgW2NsYXNzLnNlbGVjdGVkXT1cImRheS5pc1NlbGVjdGVkXCJcclxuICAgICAgICAgICAgICBbY2xhc3MuZGlzYWJsZWRdPVwiZGF5LmlzRGlzYWJsZWRcIlxyXG4gICAgICAgICAgICAgIFtjbGFzcy5vdGhlci1tb250aF09XCIhZGF5LmlzSW5DdXJyZW50TW9udGhcIlxyXG4gICAgICAgICAgICAgIFtjbGFzcy53ZWVrZW5kXT1cImRheS5pc1dlZWtlbmQgJiYgbWVyZ2VkQ29uZmlnLmhpZ2hsaWdodFdlZWtlbmRzXCJcclxuICAgICAgICAgICAgICBbY2xhc3MuaGFzLWV2ZW50XT1cImRheS5oYXNFdmVudFwiXHJcbiAgICAgICAgICAgICAgKGNsaWNrKT1cIm9uRGF5Q2xpY2soZGF5KVwiPlxyXG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGF5LW51bWJlclwiPnt7IGRheS5kYXkgfX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgPGRpdiAqbmdJZj1cImRheS5oYXNFdmVudFwiIGNsYXNzPVwiZXZlbnQtaW5kaWNhdG9yXCI+PC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgPCEtLSBNb250aCB2aWV3IC0tPlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiY2FsZW5kYXItbW9udGhzXCIgKm5nSWY9XCJjdXJyZW50VmlldyA9PT0gJ21vbnRoJ1wiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJtb250aHMtZ3JpZFwiPlxyXG4gICAgICAgICAgPGRpdiBcclxuICAgICAgICAgICAgY2xhc3M9XCJtb250aC1jZWxsXCJcclxuICAgICAgICAgICAgKm5nRm9yPVwibGV0IG1vbnRoIG9mIGNhbGVuZGFyTW9udGhzXCJcclxuICAgICAgICAgICAgW2NsYXNzLnNlbGVjdGVkXT1cIm1vbnRoLmlzU2VsZWN0ZWRcIlxyXG4gICAgICAgICAgICBbY2xhc3MuZGlzYWJsZWRdPVwibW9udGguaXNEaXNhYmxlZFwiXHJcbiAgICAgICAgICAgIFtjbGFzcy5jdXJyZW50XT1cIm1vbnRoLmlzQ3VycmVudFwiXHJcbiAgICAgICAgICAgIChjbGljayk9XCJvbk1vbnRoQ2xpY2sobW9udGgpXCI+XHJcbiAgICAgICAgICAgIHt7IG1vbnRoLm5hbWUgfX1cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuXHJcbiAgICAgIDwhLS0gWWVhciB2aWV3IC0tPlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiY2FsZW5kYXIteWVhcnNcIiAqbmdJZj1cImN1cnJlbnRWaWV3ID09PSAneWVhcidcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwieWVhcnMtZ3JpZFwiPlxyXG4gICAgICAgICAgPGRpdiBcclxuICAgICAgICAgICAgY2xhc3M9XCJ5ZWFyLWNlbGxcIlxyXG4gICAgICAgICAgICAqbmdGb3I9XCJsZXQgeWVhciBvZiBjYWxlbmRhclllYXJzXCJcclxuICAgICAgICAgICAgW2NsYXNzLnNlbGVjdGVkXT1cInllYXIuaXNTZWxlY3RlZFwiXHJcbiAgICAgICAgICAgIFtjbGFzcy5kaXNhYmxlZF09XCJ5ZWFyLmlzRGlzYWJsZWRcIlxyXG4gICAgICAgICAgICBbY2xhc3MuY3VycmVudF09XCJ5ZWFyLmlzQ3VycmVudFwiXHJcbiAgICAgICAgICAgIChjbGljayk9XCJvblllYXJDbGljayh5ZWFyKVwiPlxyXG4gICAgICAgICAgICB7eyB5ZWFyLnllYXIgfX1cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gIDwvZGl2PlxyXG48L2Rpdj5cclxuIl19
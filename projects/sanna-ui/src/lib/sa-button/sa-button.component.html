<button
  #buttonElement
  [class]="buttonClasses"
  [type]="type"
  [attr.disabled]="disabled || loading ? '' : null"
  [disabled]="disabled || loading"
  [class.has-tooltip]="tooltip"
  (click)="onClick($event)"
  [attr.style]="criticalInlineStyles"
>
  <!-- Contenido del botón -->
  <div class="button-content" [class.loading-hidden]="showSpinner">
    <fa-icon *ngIf="iconDefinition && (position === 'left' || iconOnly)" [icon]="iconDefinition" [class.me-1]="!iconOnly"></fa-icon>
    <span #buttonText *ngIf="!iconOnly">{{ label }}</span>
    <fa-icon *ngIf="iconDefinition && position === 'right' && !iconOnly" [icon]="iconDefinition" class="ms-1"></fa-icon>
  </div>
  
  <!-- Spinner que se superpone cuando está loading -->
  <div *ngIf="showSpinner" class="spinner-overlay">
    <fa-icon 
      [icon]="spinnerIcon" 
      class="spinner-icon"
      [class.spinning]="loading">
    </fa-icon>
  </div>
  
  <!-- Tooltip personalizado -->
  <div *ngIf="tooltip" 
       class="custom-tooltip" 
       [class.tooltip-top]="tooltipPosition === 'top'"
       [class.tooltip-bottom]="tooltipPosition === 'bottom'"
       [class.tooltip-left]="tooltipPosition === 'left'"
       [class.tooltip-right]="tooltipPosition === 'right'"
       [class.multiline]="isLongTooltip"
       [attr.data-tooltip]="tooltip">
    {{ tooltip }}
  </div>
</button>

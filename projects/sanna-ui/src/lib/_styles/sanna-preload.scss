// ===================================================================
// SANNA UI - ESTILOS DE PRECARGA OPTIMIZADOS PARA EVITAR FOUC
// ===================================================================
// Este archivo está optimizado para ser incluido en angular.json
// y proporcionar estilos críticos antes de que se carguen los componentes

// ===================================================================
// 1. FUENTES OPTIMIZADAS CON PRELOAD
// ===================================================================

// Preload de Google Fonts con font-display: swap para mejor rendimiento
@import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap');

// Variables de fuente
$sanna-font-primary: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;

// ===================================================================
// 2. VARIABLES CSS CRÍTICAS
// ===================================================================

:root {
  --sanna-font-family: #{$sanna-font-primary};
  
  // Colores base críticos para evitar FOUC
  --sanna-primary: #0066cc;
  --sanna-secondary: #6c757d;
  --sanna-success: #28a745;
  --sanna-danger: #dc3545;
  --sanna-warning: #ffc107;
  --sanna-info: #17a2b8;
  --sanna-light: #f8f9fa;
  --sanna-dark: #343a40;
  
  // Espaciado base
  --sanna-spacing-xs: 0.25rem;
  --sanna-spacing-sm: 0.5rem;
  --sanna-spacing-md: 1rem;
  --sanna-spacing-lg: 1.5rem;
  --sanna-spacing-xl: 2rem;
  
  // Bordes y radios
  --sanna-border-radius: 0.375rem;
  --sanna-border-width: 1px;
  --sanna-border-color: #dee2e6;
}

// ===================================================================
// 3. ESTILOS BASE CRÍTICOS PARA COMPONENTES SANNA
// ===================================================================

// Aplicar fuente inmediatamente a todos los componentes Sanna
[class*="sa-"],
[class^="sanna-"],
sa-input,
sa-button,
sa-select,
sa-textarea,
sa-checkbox,
sa-radio,
sa-switch,
sa-date,
sa-table,
sa-tag,
sa-text,
sa-heading,
sa-icon,
sa-legend,
sa-messagebox {
  font-family: var(--sanna-font-family) !important;
  font-optical-sizing: auto;
  font-style: normal;
  
  // Prevenir layout shift
  * {
    box-sizing: border-box;
  }
}

// ===================================================================
// 4. ESTILOS CRÍTICOS BASE PARA INPUTS
// ===================================================================

sa-input,
.sa-input {
  display: block;
  
  .input-wrapper {
    position: relative;
    width: 100%;
  }
  
  .form-control {
    font-family: var(--sanna-font-family) !important;
    border: var(--sanna-border-width) solid var(--sanna-border-color);
    border-radius: var(--sanna-border-radius);
    padding: 0.5rem 0.75rem;
    width: 100%;
    transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
    
    &:focus {
      outline: 0;
      border-color: var(--sanna-primary);
      box-shadow: 0 0 0 0.2rem rgba(0, 102, 204, 0.25);
    }
  }
}

// ===================================================================
// 5. ESTILOS CRÍTICOS BASE PARA BOTONES
// ===================================================================

sa-button,
.sa-button {
  .btn {
    font-family: var(--sanna-font-family) !important;
    border-radius: var(--sanna-border-radius);
    padding: 0.5rem 1rem;
    font-weight: 500;
    text-align: center;
    cursor: pointer;
    border: var(--sanna-border-width) solid transparent;
    transition: all 0.15s ease-in-out;
    
    &.btn-primary {
      background-color: var(--sanna-primary);
      border-color: var(--sanna-primary);
      color: white;
    }
    
    &.btn-secondary {
      background-color: var(--sanna-secondary);
      border-color: var(--sanna-secondary);
      color: white;
    }
  }
}

// ===================================================================
// 6. PREVENCIÓN DE LAYOUT SHIFT
// ===================================================================

// Asegurar que los contenedores mantengan sus dimensiones
.sanna-component-container {
  min-height: 1px; // Evitar colapso
}

// Skeleton/placeholder para componentes que cargan
.sanna-loading-placeholder {
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200% 100%;
  animation: loading 1.5s infinite;
}

@keyframes loading {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

// ===================================================================
// 7. RESET ESPECÍFICO PARA SHADOW DOM
// ===================================================================

// Para componentes que usan Shadow DOM, aplicar estilos base
:host {
  font-family: var(--sanna-font-family) !important;
  
  *, *::before, *::after {
    box-sizing: border-box;
  }
}
